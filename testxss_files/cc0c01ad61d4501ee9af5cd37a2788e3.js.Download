
(function(bh,t){var EMOS_VERSION='cm50.10',bV="emos3",m=bh[bV],TRACK_VERSION=(typeof(window.emosTrackVersion)=="number")?window.emosTrackVersion:1;if(!m){bh[bV]=m={}}else{TRACK_VERSION=3}if(!m.config){m.config={}}if(!m.defaults){m.defaults={}}var DFLTS={siteid:'0'};var bK=l("JUNK_SIZE",1600),T=l("CLIENT_COOKIE_LIFETIME",30),X=l("COOKIENAME_SESSION_ID","emos_jcsid"),bm=l("COOKIENAME_VISITOR_ID","emos_jcvid"),aD=l("COOKIENAME_CAMPAIGN","emos_jckamp"),u=l("COOKIENAME_POSTVIEWCAMPAIGN","emos_postview"),C=l("COOKIENAME_POSTVIEW",null),ap=l("COOKIE_DOMAIN",null),bO=l("TRACK_FIRSTPARTY",true),av=l("TRACK_POSTCONVERSION",true),bG=l("CLIENT_KEY",window.emosClientKey?window.emosClientKey:'0000284a-c282e5b1-eccd-3bba-abec-930bdd51a6ac'),h=l("TRACK_THIRD_PARTY",true),w=l("SAMPLING_RATE",1),ab=l("BEST_PRODUCTS_COOKIE",false),bi=l("PRODUCT_ID_IN_EC_EVENT",1),A=l("COOKIENAME_BEST_PRODUCTS","emos_best_products"),aN=l("BEST_PRODUCTS_COOKIE_LIFETIME",2592000),a7=l("PMAP",{}),ao=l("P_MAP",{}),Y=l("PARAM_TO_PROP",{'emosmarker':'marker', 'ecmUid':'newsuid', 'incpc':'incpc'}),bY=l("MC_COOKIE",{kw:30,cp:30,nl:30}),o=l("ADD_COOKIE_PARAMS",{all:["empid","empcode","empcode2"]}),d=l("ADD_COOKIE_PROPS",{}),bL=l("TIMEOUT",6000),bf=l("DO_NOT_TRACK",false),bg=l("JSID",false),aY=l("SEO_BLACK",[]),bn=l("GCLID",true),aU=l("VCL",730),aR=l("PAGEID_FROM_URL",false),bE=l("SAMPLING_MODE_CLICKONLY",true),bJ=l("CAPTURE_CLICKS",typeof bh.emosTrackClicks!="undefined"?bh.emosTrackClicks:true),a9=l("SCROLL",-1),x="www.econda-monitor.de",p="emos_clickmonitor",bt="https://monitor.econda-monitor.de/click",aK=0,ae=null,D=0,a4=0,a6=0,aO=0,aE,Z,bU=0,H,bk=[],J=false,aZ=null,aQ={},y=false;try{if(bh.sessionStorage&&bh.sessionStorage.length>=0){y=true}}catch(bs){}var ax=false,bT,au,al=null,F=-1,E=-1,bN=65536,bM=65536,be=false;function N(i){var e=af(i);if(e){al=e.substring(0,254);i.pageId=al}if(i.pageid){delete i.pageid}}function af(e){if(e.pageId){return e.pageId}if(e.pageid){return e.pageid}if(bh.emosPageId){return bh.emosPageId}if(al){return al}if(aR){var i=bh.location;return i.protocol+"//"+i.host+i.pathname}return null}function at(){if(!bG&&bh.emos_kdnr){var i=bh.emos_kdnr-723;var e=(i%673===0)?(i/673-100):0;var b4=e.toString(16);while(b4.length<8){b4="0"+b4}ai("xtc");bG=b4+"-xtc~"+bh.emos_kdnr}}function aI(e){return parseInt(e,10)}function l(e,b4){var i=m.config[e];return(typeof i!="undefined")?i:b4}var bj=(bh.encodeURIComponent)?bh.encodeURIComponent:bh.escape;function bZ(i){try{if(bh.decodeURIComponent){try{return bh.decodeURIComponent(i.replace(/\+/g,"%20"))}catch(b5){return bh.unescape(i)}}else{return bh.unescape(i)}}catch(b4){return i}}function bu(b5,b4,i){if(b5.addEventListener){b5.addEventListener(b4,i,true)}else{if(b5.attachEvent){b5.attachEvent("on"+b4,i)}else{var e=b5["on"+b4];if(!e){b5["on"+b4]=i}else{b5["on"+b4]=function(b6){i(b6);e(b6)}}}}}function aM(cb,ca,b5){var b4=ca.cookie;var e=null;var cc=null;if(b4){if(ca.emcl){e=aI(ca.emcl)}if(!e){e=T}e=e*86400;cc=a3(b4)}aW(cb);var b8=c(bz(ad(q(cb))));var b9=Math.floor(b8.length/bK)+1;var b6=[];for(var b7=0;b7<b9;b7++){b6[b7]={};b6[b7].v="4";b6[b7].emrid=b5;if(bO){b6[b7].emsid=D;b6[b7].emvid=a6}if(b7===0&&h&&av){if(b4){b6[b7].emcl=e;b6[b7].emcc=cc}}b6[b7].emnc=b9;b6[b7].emtn=b7+1;b6[b7].emhost=location.hostname;if(h){b6[b7].tpct=1;if(aU!==730){b6[b7].vclt=aU}}b6[b7].d=b8.substr(b7*bK,bK)}return b6}function aA(){if(bh.emosDoNotTrack){return}if(bf){return}var i=bw();var e={};ba(i,e);ay(i,e)}function ba(i,e){B(i,e);if(bh.emosBillingPageArray){br(bh.emosBillingPageArray,i)}if(bh.emosECPageArray){bb(bh.emosECPageArray,i)}bF(i);if(bh.emosBasketPageArray){ak(bh.emosBasketPageArray,i)}aC(i)}function an(b8){if(!ab){return}var b6=b8.ec_Event;if(!az(b6)||b6.length===0){return}var b5=[];for(var b7=0;b7<b6.length&&b5.length<5;b7++){var b9=b6[b7];if(b9!==null&&typeof b9==="object"){var b4=(Q(b9))?b9[bi]:b9.pid;if(b4){b5.push(bj(b4))}}}if(b5.length===0){return}if(b5.length<5){var e=P();if(e){for(var b7=0;b7<e.length&&b5.length<5;b7++){b5.push(e[b7])}}}b2(A,b5.join(":"),aN)}function P(){var e=bW(A);if(e&&e.length>0){return e.split(":")}return null}function B(b4,i){var b5=bB(i);bC(b4);aX(b4,i,b5);var e=K();if(e){b4.pvdata=e}S(b4,b5,i);if(TRACK_VERSION===1){j(b4)}if(!b4.content){b4.content="HTML-Title/"+t.title}}function L(i){if(typeof i.customReferrer!="undefined"){return i.customReferrer}if(typeof bh.emosReferrer!="undefined"){ai("ref");return bh.emosReferrer}try{return top.document.referrer}catch(b4){return t.referrer}}var G=null;try{G=top.location.search}catch(bs){G=location.search}function bB(i){if(i.customParam){return i.customParam}var b6=aw(G,true);for(var e in a7){var b5=a7[e];var b4=b6[b5];if(b4){b6[e]=b4;delete b6[b5]}else{delete b6[e]}}for(var b5 in ao){var e=ao[b5];if(e){var b4=b6[b5];if(b4){b6[e]=b4}}else{if(e===null){delete b6[b5]}}}return b6}function bC(i){var b5=screen.width+"x"+screen.height;var e=bh.devicePixelRatio;if(typeof e==="number"&&e>1){b5=b5+"|"+Math.round(e*100)/100}var b4=bh.orientation;if(typeof b4==="number"&&b4!==0){b5=b5+"o"+b4}i.swsh=b5;i.tz=new Date().getTimezoneOffset()/60;if(TRACK_VERSION!==3){ai("tv"+TRACK_VERSION)}}function aj(b9,b6){try{if(b9===null||b9.length===0){return"http://unknown"}if(b9.substr(0,4)!="http"){b9="http://"+b9}if(b6>=0){var b5=b9.split("/");if(b5.length<b6){b6=b5.length}b9="";for(var b4=0;b4<b6;b4++){if(b4!==0){b9=b9+"/"}b9=b9+b5[b4]}}var ca=b9.indexOf("?");if(ca>=0){b9=b9.substring(0,ca)}var b8=b9.indexOf("#");if(b8>=0){b9=b9.substring(0,b8)}}catch(b7){}return b9.substring(0,127)}function r(b5){if(!al){return}if(!bG){return}if(bf){return}if(!ax){return}if(!ae){return}if(bh.emosDoNotTrack){return}if(!b5){b5=bh.event}var b6={};if((b5.which&&b5.which!=1)||(!b5.which&&b5.button!=1)){return}var cg=b5.pageX;var b7=b5.pageY;var b9=t.documentElement&&t.documentElement.clientHeight!==0?t.documentElement:t.body;if(isNaN(cg)||isNaN(b7)){cg=b5.clientX+((isNaN(bh.pageXOffset)?b9.scrollLeft:bh.pageXOffset));b7=b5.clientY+((isNaN(bh.pageYOffset)?b9.scrollTop:bh.pageYOffset))}var cc=b5.target?b5.target:b5.srcElement;if(!cc.nodeName){return}var ce=cc.nodeName.toLowerCase();if(ce=="base"){return}while(cc!==null&&cc.nodeType!==1){cc=cc.parentNode}if(ce=="map"){cc=bS(cc,cg,b7)}else{if(ce=="area"){cc=bS(cc.parentNode,cg,b7)}}if(ce=="option"){cc=cc.parentNode;if(cc.nodeName.toLowerCase()=="optgroup"){cc=cc.parentNode}}if(typeof cc.getBoundingClientRect=="function"){if(cc==t.body.parentNode){cc=t.body}}else{if(cc==t.body){cc=t.body.parentNode}}var b8=new Date().getTime();var cd=Math.floor((b8-au)/1000);var ch=Math.floor((b8-H)/1000);au=b8;if(t.body.parentNode==cc||t.body==cc){var b4,e;if(bh.innerHeight){b4=bh.innerWidth-17;e=bh.innerHeight-17}else{b4=b9.clientWidth;e=b9.clientHeight}if(b4<b5.clientX||e<b5.clientY){return}}var ca=I(cc);if(!ca){return}var i=cg-ca[0];var ci=b7-ca[1];var cf=bT++;var cb=M(cc).toLowerCase();b6.click=[[cg,b7,ch,i,ci,cf,cd,cb,w]];b6.plReqId=ae;b6.emosV=s();aS(b6);W(b6,{},aB())}function aS(e){if(bJ&&ax&&a9){z();if(be){e.scroll=[bN,bM,F,E];be=false}}}function z(){if(!ax){return}var e,b6;if(bh.pageXOffset!==undefined){e=bh.pageXOffset;b6=bh.pageYOffset}else{var i=t.compatMode!="BackCompat"?t.documentElement:t.body;e=i.scrollLeft;b6=i.scrollTop}var b5=e+bh.innerWidth;var b4=b6+bh.innerHeight;if(b5>F){F=b5;be=true}if(b4>E){E=b4;be=true}if(b6<bM){bM=b6;be=true}if(e<bN){bN=e;be=true}}function b(e){if(ax){z();if(be){bl({scroll:[bN,bM,F,E]},{noimg:e});be=false}}}function M(i){var b4=i.parentNode;if(!b4||b4==t){return"/"+i.nodeName}var e=M(b4);return e+"/"+i.nodeName+"["+k(b4,i)+"]"}function k(b6,b5){var e=b6.childNodes;var b7=0;for(var b4=0;b4<e.length;b4++){if(e[b4]==b5){return b7}else{if(e[b4].nodeName==b5.nodeName){b7++}}}return -1}function bS(b7,e,b4){var b9="#"+b7.getAttribute("name");var ca=t.getElementsByTagName("img");for(var b6=0;b6<ca.length;b6++){var b5=ca[b6];if(b5.getAttribute("usemap")==b9){var b8=I(b5);if(b8){if(e>=b8[0]&&b4>=b8[1]&&e<=b8[0]+b5.clientWidth&&b4<=b8[1]+b5.clientHeight){return b5}}}}return t.body.parentNode}function ay(cc,ca){N(cc);var b7=location.search.indexOf("clickmonitor=econda")>=0||location.hash.indexOf("clickmonitor_econda")>=0;if(b7){a0(p,"true")}if((b7||bW(p)=="true")&&!bh.emosClickmonitor){bh.emosClickmonitor={pageId:cc.pageId,cookieName:p,cookieDomain:ap,urlClickmonitor:bt,ckey:bG};var cf=t.documentElement;var b4=cf.namespaceURI;var b9=cf.prefix;var b6=b9?b9+":head":"head";var cb=cf.childNodes;var ce=null;for(var b8=0;b8<cb.length;b8++){var cd=cb[b8];if(cd.nodeType==1&&cd.nodeName.toLowerCase()==b6){ce=cd;break}}if(!ce){ce=b4?t.createElementNS(b4,b6):t.createElement(b6);cf.insertBefore(ce,cf.firstChild)}var e=b9?b9+":script":"script";var b5=b4?t.createElementNS(b4,e):t.createElement(e);b5.setAttribute("type","text/javascript");b5.setAttribute("src",bt+"/scripts/click.js");ce.appendChild(b5);J=false;ax=false;return}if(ca.cookie){ag(d,cc,ca.cookie.source,ca.cookie)}H=new Date().getTime();ae=aB();au=H;bT=0;bA(cc,ca);if(!J){return}if(bJ&&ax){bu(t,"mousedown",r);if(a9){aS(cc);bh.setInterval(z,1000);bu(bh,"unload",function(){b(true)});if(a9>0){bh.setInterval(function(){b(false)},a9*1000)}}}an(cc);cc.emosV=s();W(cc,ca,ae)}function W(b8,e,b9){if(bh.console&&bh.console.log&&location.search.indexOf("emosdebug=yxcvbnm")>=0){bh.console.log(b8)}var b7=aM(b8,e,b9);for(var b6=0;b6<b7.length;b6++){aK=aK+1;bP(b7[b6],e,aK)}if(e.delay){var b4=aI(e.delay);if(isFinite(b4)&&b4>0&&b4<1000){var b5=new Date().getTime()+b4;while(new Date().getTime()<b5){}}}}function I(b4){if(typeof b4.getBoundingClientRect=="function"){var i;var b6;if(typeof bh.pageXOffset=="number"){i=bh.pageXOffset;b6=bh.pageYOffset}else{var e=t.compatMode!="BackCompat"?t.documentElement:t.body;i=e.scrollLeft;b6=e.scrollTop}var b5=b4.getBoundingClientRect();if(b5===null){return null}if(b5.top===0&&b5.right===0&&b5.bottom===0&&b5.left===0){return null}return[i+aI(b5.left),b6+aI(b5.top)]}return bR(b4)}function bR(e){if(e.offsetParent!==null){var b4=bR(e.offsetParent);if(!b4){return null}b4[0]+=e.offsetLeft;b4[1]+=e.offsetTop;return b4}else{var i=e.nodeName.toLowerCase();if(i=="html"||i=="body"){return[0,0]}else{return null}}}function n(){var i=bG.indexOf("-");var e;var b4;if(i===8){e=bG.substring(0,8);b4=bG.substring(9)}else{e="00000000";b4=bG}return((location.protocol=="http:")?"http://":"https://")+x+"/l/"+e+"/t/"+b4+"?"}var b0="emosTransmit";var b1="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function bP(b8,b6,b5){var i=a3(b8);var ca=b0+b5;if(y){try{var cb=bh.sessionStorage;cb.setItem(ca,i)}catch(b7){}}else{a0(ca,i)}if(!b6.noimg){var b4=new Image();var b9=bh.setTimeout(function(){b4.src=b1},bL);bk[b5]=b4;b4.onload=function(){bD(ca,b5,b9)};b4.src=n()+i}}function bD(b6,b5,i){try{if(y){bh.sessionStorage.removeItem(b6)}else{g(b6)}}catch(b4){}bk[b5]=null;bh.clearTimeout(i)}function a3(i){var b4="";for(var b5 in i){var e=typeof i[b5];if(e==="string"||e==="boolean"||e==="number"){if(b4!==""){b4+="&"}b4+=b5+"="+bj(i[b5])}}return b4}function ar(b5){var b6=b5.split("&");var i={};for(var e=0;e<b6.length;e++){var b4=b6[e].split("=");i[b4[0]]=bZ(b4[1])}return i}function Q(e){return Object.prototype.toString.apply(e)==="[object Array]"}function az(e){return e!==null&&typeof e==="object"&&Q(e)}function aW(e){for(var b4 in e){var i=e[b4];if(az(i)&&i.length>1){v(i,b4,e)}}}function v(b6,b7,b9){var b8={};var ca=false;for(var b5=0;b5<b6.length;b5++){var cb=b6[b5];if(typeof cb==="object"&&Object.prototype.toString.apply(cb)!="[object Array]"){bQ(cb,b8);ca=true}else{if(cb===null){}else{return}}}if(!ca){return}for(var b5=0;b5<b6.length;b5++){var cb=b6[b5];if(cb!==null){bH(cb,b8)}}var e=q(b6).length;var b4=q(b8).length;if(b4<e){b9[b7]=b8}}function bQ(e,i){for(var b4 in e){if(!i[b4]){i[b4]=[]}}}function bH(i,b4){for(var b6 in b4){var b5=i[b6];var e=b4[b6];if(b5===undefined){e.push(null)}else{e.push(b5)}}}function q(b8){switch(typeof b8){case"string":return ah(b8);case"number":return isFinite(b8)?String(b8):"null";case"boolean":case"null":return String(b8);case"object":if(!b8){return"null"}var b5=[];if(Q(b8)){var b7=b8.length;for(var b6=0;b6<b7;b6++){b5[b6]=q(b8[b6])||"null"}return b5.length===0?"[]":"["+b5.join(",")+"]"}for(var b4 in b8){if(Object.prototype.hasOwnProperty.call(b8,b4)){var e=q(b8[b4]);if(e){b5.push(ah(b4)+":"+e)}}}return b5.length===0?"{}":"{"+b5.join(",")+"}"}return undefined}var bd=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,U={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function ah(e){if(bd.test(e)){return'"'+e.replace(bd,function(i){var b4=U[i];return typeof b4==="string"?b4:"\\u"+("0000"+i.charCodeAt(0).toString(16)).slice(-4)})+'"'}else{return'"'+e+'"'}}function bq(){var b7=b0.length;var ce=[];if(y){try{var cd=bh.sessionStorage;for(var b8=0;b8<cd.length;b8++){var cb=cd.key(b8);if(cb.substr(0,b7)==b0){var b4=Number(cb.substr(b7));var b5=cd.getItem(cb);if(b5){if(b4>=aK){aK=b4+1}ce.push([b4,b5])}}}for(var b8=0;b8<ce.length;b8++){cd.removeItem(b0+ce[b8][0])}}catch(b9){}}else{var cc=t.cookie.split(";");for(var b8=0;b8<cc.length;b8++){var b6=cc[b8];if(b6.charAt(0)==" "){b6=b6.substr(1)}if(b6.substr(0,b7)==b0){var ca=b6.indexOf("=");if(ca<0){continue}var b4=Number(b6.substring(b7,ca));var b5=b6.substring(ca+1);g(b0+b4);if(b5){if(b4>=aK){aK=b4+1}ce.push([b4,b5])}}}}bc(ce)}function bc(b5){if(b5.length>0){var b4=b5.pop();var e=b4[0];var i=new Image();var b6=bh.setTimeout(function(){i.onload=function(){};i.src=b1},bL);bk[e]=i;i.onload=function(){aT(e,b5,b6)};i.src=n()+b4[1]}}function aT(b4,e,i){bk[b4]=null;bh.clearTimeout(i);bc(e)}function bA(cc,ca){if(!bO){J=true;ax=true;return}var cg=0;if(cc.billing&&cc.billing.length>0&&cc.billing[0].length>3){var b8=Number(cc.billing[0][3]);if(!isNaN(b8)){cg=Math.round(b8*100)}}var cf=true;var b9=bW(X);if(b9&&b9.length>0){var cd=b9.split(":");if(cd.length==4){D=cd[0];a4=aI(cd[1])+1;if(!isNaN(a4)){cf=false;a0(X,D+":"+a4+":"+ae+":"+H)}}}if(cf){var b4=aB();var i=b4+":1:"+ae+":"+H;a0(X,i);var b6=bW(X);if(i==b6){D=b4;a4=1;cf=true}else{D="NULL";a4=-1;cf=false}}var ch=bW(bm);if(ch&&ch.length>0){var cd=ch.split(":");if(cd.length==5||cd.length==7){a6=cd[0];aO=aI(cd[1])+((cf)?1:0);var e=cd[2];var b7=aI(cd[3]);if(cf){aE=e;Z=H-b7;b7=H}else{aE=null;Z=null}bU=cg;var cb=aI(cd[4]);if(cd.length==7){ax=("true"==cd[5]);var b5=aI(cd[6]);if(b5!=w){ax=Math.random()*w<=1}}else{ax=Math.random()*w<=1}if(bE){J=true}else{J=ax}if(!isNaN(cb)){bU+=cb}if(!isNaN(aO)&&a6&&a6!="undefined"){var i=a6+":"+aO+":"+D+":"+b7+":"+bU+":"+ax+":"+w;b2(bm,i,aU*86400);return}}}var ce;if(aZ){ce=aZ;cc.t=1}else{ce=D;if(bg&&!aJ){cc.t=2}}bU=cg;ax=Math.random()*w<=1;if(bE){J=true}else{J=ax}var i=ce+":1:"+D+":"+H+":"+bU+":"+ax+":"+w;b2(bm,i,aU*86400);var b6=bW(bm);if(i==b6){a6=ce;aO=1}else{a6="NULL";aO=-1}}function bW(b7){if(!b7){return null}var b4=t.cookie.split(";");for(var b6=0;b6<b4.length;b6++){var b5=b4[b6];if(b5.charAt(0)==" "){b5=b5.substr(1)}var e=b7+"=";if(b5.substr(0,e.length)==e){return b5.substring(e.length)}}return null}function a0(e,i){b2(e,i,null)}function b2(i,b5,e){var b4=i+"="+b5+";path=/;";if(ap){b4=b4+"domain="+ap+";"}if(e){b4=b4+"max-age="+e+";expires="+new Date(new Date().getTime()+e*1000).toGMTString()+";"}t.cookie=b4}function g(e){var i=e+"=;path=/;max-age=0;";if(ap){i=i+"domain="+ap+";"}t.cookie=i}function aB(){var b7=new Date().getTime();var ca=b7&4294967295;var b8=(b7/4294967296)&4294967295;var e=[];e.push(b8>>>8&255);e.push(b8&255);e.push(ca>>>24);e.push(ca>>>16&255);e.push(ca>>>8&255);e.push(ca&255);for(var b5=0;b5<9;b5++){var b6=65536*Math.random();e.push(b6>>>8&255);e.push(b6&255)}var b4=navigator.userAgent;if(b4){for(var b5=0;b5<b4.length;b5++){var b9=6+(b5%18);e[b9]=(e[b9]^b4.charCodeAt(b5))&255}}return c(e)}function bz(b6){var b5=0;var e=b6.length;for(var b4=0;b4<e;b4++){b5+=b6[b4]}b6.push((b5&65280)>>8);b6.push(b5&255);return b6}function ad(e){var i=[];for(var b5=0;b5<e.length;b5++){var b4=e.charCodeAt(b5);if(b4<128){if(b4>=32||b4==9){i.push(b4)}}else{if((b4>127)&&(b4<2048)){i.push((b4>>6)|192);i.push((b4&63)|128)}else{i.push((b4>>12)|224);i.push(((b4>>6)&63)|128);i.push((b4&63)|128)}}}return i}var aa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789*_";function c(b8){var b5=aa,b6=[],b4=0,e=b8.length;if((e%3)==1){b8.push(0);b8.push(0)}else{if((e%3)==2){b8.push(0)}}var b7=b8.length;while(b4<b7){b6.push(b5.charAt(b8[b4]>>2));b6.push(b5.charAt(((b8[b4]&3)<<4)|(b8[b4+1]>>4)));b6.push(b5.charAt(((b8[b4+1]&15)<<2)|(b8[b4+2]>>6)));b6.push(b5.charAt(b8[b4+2]&63));b4+=3}if((e%3)==1){b6[b6.length-1]=b6[b6.length-2]=""}if((e%3)==2){b6[b6.length-1]=""}return b6.join("")}function ac(ca,b9,b7){var cc=L(b9);var b5=aj(cc,3);var i=aw(cc,false);ca.ref=b5;for(var b8 in Y){if(b7[b8]){ca[Y[b8]]=b7[b8]}}if(b9.cookie||ca.source){return}if(!b9.customMktDetect){var cd=b9.customCampaign;var cb=b9.customSource;if(!cd){cd=bh.emos_campaignName;if(cd){ai("dcn")}}if(!cb){cb=bh.emos_sourceId;if(cb){ai("ds")}}if(b7.refID){cd=b7.refID;if(b7.emsrc){cb=b7.emsrc}}if(cd){if(cb){if(cb=="kw"){b7.adword=cd}else{if(cb=="nl"){b7.newsletter=cd}else{b7.campaign=cd}}}else{cb="cp";b7.campaign=cd}}if(b7.campaign){var e=cb?cb:"cp";if(cb&&!bY[cb]){bY[cb]=bY.cp}var b4=aH(ca,b9,b7,e);b4.campaign=b7.campaign;if(b7.efp){b4.efp=b7.efp}if(b7.efc){b4.efc=b7.efc}if(b7.efpn){b4.efpn=b7.efpn}if(b7.mktsp){b4.mktsp=b7.mktsp}b4.ref=b5;aG(i,b4);return}if(b7.newsletter||b7.ecmId){var b4=aH(ca,b9,b7,"nl");if(b7.newsletter){b4.news=b7.newsletter}if(b7.ecmId){b4.newsmid=b7.ecmId}return}if(b7.adword||b7.amktid||(bn&&b7.gclid)){var b4=aH(ca,b9,b7,"kw");var b6=b7.adword;if(b7.gclid){if(!b6){b6="google auto tagging"}b4.gclid=b7.gclid}if(b6){b4.adword=b6}if(b7.amktid){b4.amktid=b7.amktid}b4.ref=b5;aG(i,b4);a1(b4,null,true,b5,b7,i);return}}if(cc===null||cc.length===0){if(f(ca)){return}aH(ca,b9,b7,"direct");return}if(by(b5)){if(f(ca)){return}ca.ref=aj(cc,-1);ca.source="intern";return}if(a1(ca,b9,false,b5,b7,i)){return}aH(ca,b9,b7,"ref").ref=b5}function aG(b4,i){var e=b4.url?bZ(b4.url).substring(0,127):null;if(e){i.refUrl=e}}function aH(b4,e,b6,b5){if(bY[b5]){if(!e.cookie){e.cookie={}}var i=e.cookie;e.emcl=bY[b5];ag(o,b6,b5,i);i.source=b5;return i}else{b4.source=b5;return b4}}function ag(e,b4,b5,i){if(e.all){aL(e.all,b4,i)}if(e[b5]){aL(e[b5],b4,i)}}function aL(b7,b6,b5){for(var b4=0;b4<b7.length;b4++){var e=b6[b7[b4]];if(e){b5[b7[b4]]=e}}}function f(i){var e=bW(u);if(e&&e.length>0){i.source="cp";i.campaign=bZ(e);return true}return false}function aX(b4,i,b6){ac(b4,i,b6);if(i.cookie&&!(h&&av)){O(b4,i.cookie);b4.postconv="0"}if(bO&&av){if(i.cookie){var b7=null;if(i.emcl){b7=aI(i.emcl)}if(!b7){b7=T}b7=b7*86400;b2(aD,a3(i.cookie)+"&ccbt="+Math.floor(new Date().getTime()/1000),b7)}else{var b5=bW(aD);if(b5&&b5.length>0){var e=ar(b5);b4.postconv="1";e.ccbtd=Math.floor(new Date().getTime()/1000)-aI(e.ccbt);delete e.ccbt;O(b4,e)}}}}function K(){var b9=bW(C);if(b9&&b9.length>0){var b7=new Date().getTime();b9=bZ(b9);var b4=[];var e=b9.split("@");for(var b5=0;b5<e.length;b5++){if(e[b5]){var b6=ar(e[b5]);var b8=aI(b6.t);if(isFinite(b8)){b6.td=b7-b8;delete b6.t}b4.push(a3(b6))}}return b4.join("@")}return null}function by(e){return(e.split("/")[2]==location.host)}var am=[["q",null,"ie","start",1],["p",null,null,"b",1],["su",null,null,"pageIndex",10],["query",null,null],["qry_str",null,null],["begriff",null,null],["words",null,null],["encquery",null,null],["qt",null,null],["terms",null,null],["text",/yandex\./g,null],["wd",/\.baidu\./g,null],["w",/\.soso\./g,null],["searchfor",/\.ask\./g,null],["searchfor",/\.ask-tb\./g,null],[null,/www\.google\./g,null],[null,/duckduckgo\./g,null],[null,/search\.yahoo\.com/g,null]];function a1(cc,ca,b9,b5,cg,e){if(aY){for(var b7=0;b7<aY.length;b7++){if(b5.indexOf(aY[b7])>=0){return false}}}for(var b8=0;b8<am.length;b8++){var b6=am[b8];var b4=b6[1];if(b4===null||b5.search(b4)>=0){var cd=(b6[0])?e[b6[0]]:null;if(!cd&&b4!==null){cd="not provided"}if(cd){var cb=b9?cc:aH(cc,ca,cg,"suma");var cf=b6[2];if(cf&&e[cf]){cb.smqpe=e[cf];cb.smqp=cd}else{cb.smqp=bZ(cd)}if(b6.length==5&&e[b6[3]]){var ce=aI(e[b6[3]]);if(!isNaN(ce)){cb.smstart=ce*b6[4]}}if(!b9){cb.ref=b5}return true}}}return false}function S(b5,b7,e){var b4=aF(b7,e);if(b4){if(!b4[3]){var i=b5.ec_Event;if(az(i)&&i.length>0){var b6=i[0];if(b6!==null&&typeof b6==="object"){b4[3]=(Q(b6))?b6[bi]:b6.pid}}}b5.crossData=[b4]}}function aF(b4,e){var i=e.crossData;if(az(i)&&typeof i[0]=="string"){return i}if(e.emcs0){return[e.emcs0,e.emcs1,e.emcs2,e.emcs3]}if(bh.emcs0){return[bh.emcs0,bh.emcs1,bh.emcs2,bh.emcs3]}if(b4.emcs0){return[b4.emcs0,b4.emcs1,b4.emcs2,b4.emcs3]}return null}function ai(e){aQ[e]=e}function s(){var e=EMOS_VERSION;for(var i in aQ){var b4=aQ[i];if(typeof i=="string"&&b4===i){e+=("|"+i)}}return e}function j(b8){var b7=t.getElementsByName("emos_name");var b9=false;for(var b6=0;b6<b7.length;b6++){var e=b7[b6].title;var b5=b7[b6].rel;var b4=b7[b6].rev;if(e.length>0){if(b5.length>0){b9=true;if(b4.length>0){b8[e]=[[bZ(b5),bZ(b4)]]}else{b8[e]=bZ(b5)}}}}if(b9){ai("tag")}}function bb(b7,b5){try{if(b7){if(b7.length&&b7.length>0){b5.ec_Event=[];for(var b4=0;b4<b7.length;b4++){b5.ec_Event[b5.ec_Event.length]=a2(b7[b4])}}else{b5.ec_Event=[a2(b7)]}ai("ecp")}}catch(b6){}}function a2(b4){var e=a(b4,"event");var i=a(b4,"id");var b8=a(b4,"name");var cb=a(b4,"preis");var ca=a(b4,"group");var b9=a(b4,"anzahl");var b7=a(b4,"var1");var b6=a(b4,"var2");var b5=a(b4,"var3");return[e,i,b8,cb,ca,b9,b7,b6,b5]}function a(i,e){return i[e]?bZ(i[e]):"NULL"}function bF(i){try{if(bh.emosCustomPageArray){i[bZ(bh.emosCustomPageArray[0])]=[bo(bh.emosCustomPageArray.slice(1))];ai("cpa")}}catch(b4){}}function aC(b6){try{if(bh.emosCustomMultiArray&&bh.emosMultiArrayID){var b4=[];for(var b5=0;b5<bh.emosCustomMultiArray.length;b5++){b4[b5]=bo(bh.emosCustomMultiArray[b5])}b6[bZ(bh.emosMultiArrayID)]=b4;ai("cma")}}catch(b7){}}function br(b5,i){try{if(b5){i.billing=[bo(b5)];ai("bill")}}catch(b4){}}function ak(b4,b6){try{if(b4){b6.ec_Event=[];for(var i=0;i<b4.length;i++){var b5=["buy"];for(var b8=0;b8<b4[i].length;b8++){b5[b8+1]=bZ(b4[i][b8])}b6.ec_Event[b6.ec_Event.length]=b5}ai("bpa")}}catch(b7){}}function aP(b6,b4,b8){try{if(b4&&b6){var b5=[];for(var b7=0;b7<b4.length;b7++){b5[b7]=bo(b4[b7])}b8[bZ(b6)]=b5;ai("free")}}catch(b9){}}function aq(){if(ap===null){var e=bh.location.hostname.split(".");var b6=e[e.length-1];var b7=e[e.length-2];var b5=(b6=="uk"||b6=="tr"||b6=="br"||(b6=="at"&&b7=="co")||(b6=="jp"&&(b7=="co"||b7=="ac"||b7=="go"||b7=="ne"||b7=="or")))?3:2;if(isNaN(aI(b6))&&e.length>=b5){ap="";for(var b4=e.length-b5;b4<e.length;b4++){ap+=("."+e[b4])}}else{ap=bh.location.hostname}}}function O(b4,i){for(var e in i){b4[e]=i[e]}}function bl(i,e){if(!ae){return}i.emosV=s();i.plReqId=ae;W(i,e,aB())}function bw(){var e={};O(e,DFLTS);if(bh.emosGlobalProperties){ai("gp");O(e,bh.emosGlobalProperties)}if(m.defaults){O(e,m.defaults)}return e}bh.emos_ecEvent=function(b9,i,e,cb,ca,b7,b6,b5,b4){ai("ecE");var b8={};b8.ec_Event=[[b9,i,e,cb,ca,b7,b6,b5,b4]];return R(b8)};function bx(ca){if(bh.emosDoNotTrack){return true}if(!bG){return true}if(bf){return true}var b4=ca.config;if(b4){delete ca.config}else{b4={}}if(az(m.plugins)){var b5=m.plugins;for(var b7=0;b7<b5.length;b7++){try{b5[b7](ca,b4)}catch(b9){}}}if((ca.type&&ca.type=="event")||(b4.type&&b4.type=="event")){if(ca.type){delete ca.type}aS(ca);bl(ca,b4);return true}var b6=bw();O(b6,ca);B(b6,b4);O(b6,ca);ay(b6,b4);if(az(b4.cb)){var b8=b4.cb;for(var b7=0;b7<b8.length;b7++){try{b8[b7]()}catch(b9){}}}return true}var a8=[];var R=function(e){a8.push(e)};if(az(m.stored)){for(var bp=0;bp<m.stored.length;bp++){R(m.stored[bp])}delete m.stored}if(bg&&!aZ){var bI=t.getElementsByTagName("script");var b3=bI[bI.length-1];var aJ=("async" in b3);if(aJ&&!bW(bm)){var aV=t.createElement("script");aV.type="text/javascript";aV.async=true;m.initWithVid=function(e){aZ=e;a5()};aV.src="https://"+x+"/jsid/"+bV;b3.parentNode.insertBefore(aV,b3)}else{a5()}}else{a5()}function V(){return t.visibilityState}function a5(){if(V()==="prerender"){t.addEventListener("visibilitychange",function(){var e=V();if(e!=="prerender"&&e!=="unloaded"){bv()}},false)}else{bv()}}function bv(){R=bx;for(var e=0;e<a8.length;e++){R(a8[e])}}bh.emosPropertiesEvent=function(e){ai("pE");return R(e)};m.send=function(e){return R(e)};bh.emos_userEvent1=function(e,b4){ai("uE1");var i={};i[e]=b4;return R(i)};bh.emos_userEvent2=function(e,b4,i){ai("uE2");var b5={};b5[e]=[[b4,i]];return R(b5)};bh.emosTargetEvent=function(b5,b7,b6,b4){ai("tE");var e={};var i=0;if(typeof b6=="boolean"){if(b6){e.cGoal="1";i=1}}else{if(typeof b6=="number"){if(b6!==0){e.cGoal="1";i=b6}}else{if(typeof b6=="string"){if(b6!="0"){e.cGoal="1";i=b6}}}}if(typeof b4!="string"){b4="d"}e.Target=[[b5,b7,i,b4]];e.content="Target_"+b5+"_"+b7;return R(e)};bh.emosLeadEvent=function(b5,b8,b6,b4,i,b7){ai("lE");var e={};e.LeadEvent=[[b5,b8,b6,b4,i]];if(b7){e.cGoal="1"}return R(e)};bh.emosCustomEvent=function(b6,b5,e,i,b7){ai("cE");var b4={};b4[b6]=[[b5,e,i,b7]];return R(b4)};bh.emosUserEvent=function(i,b5,b4){ai("uE");var e={};e.uEvent=[[i,b5,b4]];return R(e)};function bo(b4){var i=[];for(var e=0;e<b4.length;e++){i[e]=bZ(b4[e])}return i}bh.emosBuyEvent=function(b4,e){ai("bE");var i={};br(b4,i);ak(e,i);return R(i)};bh.emosFreeEvent=function(i,e){ai("fE");var b4={};aP(i,e,b4);return R(b4)};bh.emos_submitFormData=function(b5){ai("sfd");var b4=t.forms[b5];if(!b4){return true}var i={};var e=[];for(var b6=0;b6<(b4.elements.length);b6++){if(b4.elements[b6].value!==""){e[b6]=[b4.elements[b6].name,b4.elements[b6].value]}}i.fName=b5;i.fData=[e];return R(i)};function aw(ca,b5){var b9={};if(!ca){return b9}var b8=ca.indexOf("?");if(b8>=0){ca=ca.substr(b8+1)}var b6=ca.split("&");for(var b4=0;b4<b6.length;b4++){var b7=b6[b4].split("=");var e=b7[0];if(e){if(b7[1]){if(b5){b9[e]=bZ(b7[1])}else{b9[e]=b7[1]}}else{b9[e]=""}}}return b9}function bX(){aq();at();bq();if(TRACK_VERSION===1){aA()}if(TRACK_VERSION===1&&bh.addEventListener){bh.addEventListener("pageshow",function(e){if(e.persisted){aA()}},false)}}bX()})(window,document);
(function(){var SAMPLING_RATE=20,CUT_OFF=60000;function a(l){if(Math.random()*SAMPLING_RATE>1){return}if(!window.performance){return}var q=window.performance.timing;if(!q){return}if(!q.domComplete){return}if(!q.loadEventStart){return}var r=q.responseEnd-q.responseStart;if(r==2147483647){return}var n=q.loadEventStart-q.navigationStart;if(n>CUT_OFF){return}var j=l.perf=[];j.push(q.redirectEnd-q.redirectStart);j.push(q.domainLookupEnd-q.domainLookupStart);j.push(q.connectEnd-q.connectStart);j.push(q.responseStart-q.requestStart);j.push(r);j.push(q.responseEnd-q.navigationStart);j.push(q.domComplete-q.domLoading);j.push(n);var g=window.performance.getEntries();var m={};for(var f=0;f<g.length;f++){var o=g[f];var k;var e=o.initiatorType;if(e=="img"){k=e}else{if(e=="script"){k=e}else{if(e=="subdocument"){k="iframe"}else{if(e=="iframe"){k=e}else{if(e=="xmlhttprequest"){k=e}else{k=c(o.name)}}}}}var h=m[k];if(!h){h={};h.duration=o.duration;h.count=1;h.startTime=o.startTime;h.responseEnd=o.responseEnd;m[k]=h}else{h.duration=h.duration+o.duration;h.count=h.count+1;h.startTime=Math.min(h.startTime,o.startTime);h.responseEnd=Math.max(h.responseEnd,o.responseEnd)}}var p=l.perfr=[];for(var k in m){var d=[];p.push(d);var h=m[k];d.push(k);d.push(h.count);d.push(Math.round(h.duration));d.push(Math.round(h.responseEnd-h.startTime))}}function c(f){var d=f.lastIndexOf("?");if(d<0){d=f.lastIndexOf("#")}if(d>=0){f=f.substring(0,d)}var e=f.lastIndexOf(".");if(e>=0){var g=f.substr(e+1);if(g==="js"){return"script"}else{if(g==="css"){return"css"}else{if(["ico","jpg","jp2","jps","bmp","tiff","mng","png","gif","webp","jxr","hdp","wdp","svg"].indexOf(g)>0){return"img"}}}}return"unknown"}function b(){var d={};a(d);d.type="event";if(!window.emos3){window.emos3={stored:[],send:function(e){this.stored.push(e)}}}emos3.send(d)}if(document.readyState==="complete"){b()}else{window.addEventListener("load",b)}})();
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="1.12.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;try{if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(!l.ownFirst)for(b in a)return k.call(a,b);for(b in a);return void 0===b||k.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(h)return h.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=e.call(arguments,2),d=function(){return a.apply(b||this,c.concat(e.call(arguments)))},d.guid=a.guid=a.guid||n.guid++,d):void 0},now:function(){return+new Date},support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++)if(n.contains(d[b],this))return!0}));for(b=0;e>b;b++)n.find(a,d[b],c);return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}if(f=d.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return A.find(a);this.length=1,this[0]=f}return this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(n.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||(e=n.uniqueSort(e)),D.test(a)&&(e=e.reverse())),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=!0,c||j.disable(),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.addEventListener?(d.removeEventListener("DOMContentLoaded",K),a.removeEventListener("load",K)):(d.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))}function K(){(d.addEventListener||"load"===a.event.type||"complete"===d.readyState)&&(J(),n.ready())}n.ready.promise=function(b){if(!I)if(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll)a.setTimeout(n.ready);else if(d.addEventListener)d.addEventListener("DOMContentLoaded",K),a.addEventListener("load",K);else{d.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&d.documentElement}catch(e){}c&&c.doScroll&&!function f(){if(!n.isReady){try{c.doScroll("left")}catch(b){return a.setTimeout(f,50)}J(),n.ready()}}()}return I.promise(b)},n.ready.promise();var L;for(L in n(l))break;l.ownFirst="0"===L,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c,e;c=d.getElementsByTagName("body")[0],c&&c.style&&(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),"undefined"!=typeof b.style.zoom&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",l.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(e))}),function(){var a=d.createElement("div");l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}a=null}();var M=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b},N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else c=void 0;
}return c}function Q(a){var b;for(b in a)if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function R(a,b,d,e){if(M(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),"object"!=typeof b&&"function"!=typeof b||(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f}}function S(a,b,c){if(M(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!Q(d):!n.isEmptyObject(d))return}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=void 0)}}}n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}}),function(){var a;l.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,e;return c=d.getElementsByTagName("body")[0],c&&c.style?(b=d.createElement("div"),e=d.createElement("div"),e.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(e).appendChild(b),"undefined"!=typeof b.style.zoom&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(d.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(e),a):void 0}}();var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),V=["Top","Right","Bottom","Left"],W=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function X(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&U.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var Y=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)Y(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Z=/^(?:checkbox|radio)$/i,$=/<([\w:-]+)/,_=/^$|\/(?:java|ecma)script/i,aa=/^\s+/,ba="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";function ca(a){var b=ba.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}!function(){var a=d.createElement("div"),b=d.createDocumentFragment(),c=d.createElement("input");a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",l.leadingWhitespace=3===a.firstChild.nodeType,l.tbody=!a.getElementsByTagName("tbody").length,l.htmlSerialize=!!a.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==d.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,b.appendChild(c),l.appendChecked=c.checked,a.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue,b.appendChild(a),c=d.createElement("input"),c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),a.appendChild(c),l.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!!a.addEventListener,a[n.expando]=1,l.attributes=!a.getAttribute(n.expando)}();var da={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};da.optgroup=da.option,da.tbody=da.tfoot=da.colgroup=da.caption=da.thead,da.th=da.td;function ea(a,b){var c,d,e=0,f="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||n.nodeName(d,b)?f.push(d):n.merge(f,ea(d,b));return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function fa(a,b){for(var c,d=0;null!=(c=a[d]);d++)n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}var ga=/<|&#?\w+;/,ha=/<tbody/i;function ia(a){Z.test(a.type)&&(a.defaultChecked=a.checked)}function ja(a,b,c,d,e){for(var f,g,h,i,j,k,m,o=a.length,p=ca(b),q=[],r=0;o>r;r++)if(g=a[r],g||0===g)if("object"===n.type(g))n.merge(q,g.nodeType?[g]:g);else if(ga.test(g)){i=i||p.appendChild(b.createElement("div")),j=($.exec(g)||["",""])[1].toLowerCase(),m=da[j]||da._default,i.innerHTML=m[1]+n.htmlPrefilter(g)+m[2],f=m[0];while(f--)i=i.lastChild;if(!l.leadingWhitespace&&aa.test(g)&&q.push(b.createTextNode(aa.exec(g)[0])),!l.tbody){g="table"!==j||ha.test(g)?"<table>"!==m[1]||ha.test(g)?0:i:i.firstChild,f=g&&g.childNodes.length;while(f--)n.nodeName(k=g.childNodes[f],"tbody")&&!k.childNodes.length&&g.removeChild(k)}n.merge(q,i.childNodes),i.textContent="";while(i.firstChild)i.removeChild(i.firstChild);i=p.lastChild}else q.push(b.createTextNode(g));i&&p.removeChild(i),l.appendChecked||n.grep(ea(q,"input"),ia),r=0;while(g=q[r++])if(d&&n.inArray(g,d)>-1)e&&e.push(g);else if(h=n.contains(g.ownerDocument,g),i=ea(p.appendChild(g),"script"),h&&fa(i),c){f=0;while(g=i[f++])_.test(g.type||"")&&c.push(g)}return i=null,p}!function(){var b,c,e=d.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(l[b]=c in a)||(e.setAttribute(c,"t"),l[b]=e.attributes[c].expando===!1);e=null}();var ka=/^(?:input|select|textarea)$/i,la=/^key/,ma=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,na=/^(?:focusinfocus|focusoutblur)$/,oa=/^([^.]*)(?:\.(.+)|)/;function pa(){return!0}function qa(){return!1}function ra(){try{return d.activeElement}catch(a){}}function sa(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)sa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=qa;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return"undefined"==typeof n||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(G)||[""],h=b.length;while(h--)f=oa.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=oa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;while(f--)g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(i=m=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!na.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),h=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),l=n.event.special[q]||{},f||!l.trigger||l.trigger.apply(e,c)!==!1)){if(!f&&!l.noBubble&&!n.isWindow(e)){for(j=l.delegateType||q,na.test(j+q)||(i=i.parentNode);i;i=i.parentNode)p.push(i),m=i;m===(e.ownerDocument||d)&&p.push(m.defaultView||m.parentWindow||a)}o=0;while((i=p[o++])&&!b.isPropagationStopped())b.type=o>1?j:l.bindType||q,g=(n._data(i,"events")||{})[b.type]&&n._data(i,"handle"),g&&g.apply(i,c),g=h&&i[h],g&&g.apply&&M(i)&&(b.result=g.apply(i,c),b.result===!1&&b.preventDefault());if(b.type=q,!f&&!b.isDefaultPrevented()&&(!l._default||l._default.apply(p.pop(),c)===!1)&&M(e)&&h&&e[q]&&!n.isWindow(e)){m=e[h],m&&(e[h]=null),n.event.triggered=q;try{e[q]()}catch(s){}n.event.triggered=void 0,m&&(e[h]=m)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ma.test(f)?this.mouseHooks:la.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=g.srcElement||d),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,h.filter?h.filter(a,g):a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button,h=b.fromElement;return null==a.pageX&&null!=b.clientX&&(e=a.target.ownerDocument||d,f=e.documentElement,c=e.body,a.pageX=b.clientX+(f&&f.scrollLeft||c&&c.scrollLeft||0)-(f&&f.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(f&&f.scrollTop||c&&c.scrollTop||0)-(f&&f.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?b.toElement:h),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ra()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===ra()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b),d.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=d.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)}:function(a,b,c){var d="on"+b;a.detachEvent&&("undefined"==typeof a[d]&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?pa:qa):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:qa,isPropagationStopped:qa,isImmediatePropagationStopped:qa,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=pa,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=pa,a&&!this.isSimulated&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=pa,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submit||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:void n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?n.prop(b,"form"):void 0;c&&!n._data(c,"submit")&&(n.event.add(c,"submit._submit",function(a){a._submitBubble=!0}),n._data(c,"submit",!0))})},postDispatch:function(a){a._submitBubble&&(delete a._submitBubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a))},teardown:function(){return n.nodeName(this,"form")?!1:void n.event.remove(this,"._submit")}}),l.change||(n.event.special.change={setup:function(){return ka.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._justChanged=!0)}),n.event.add(this,"click._change",function(a){this._justChanged&&!a.isTrigger&&(this._justChanged=!1),n.event.simulate("change",this,a)})),!1):void n.event.add(this,"beforeactivate._change",function(a){var b=a.target;ka.test(b.nodeName)&&!n._data(b,"change")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a)}),n._data(b,"change",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!ka.test(this.nodeName)}}),l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d){return sa(this,a,b,c,d)},one:function(a,b,c,d){return sa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=qa),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ta=/ jQuery\d+="(?:null|\d+)"/g,ua=new RegExp("<(?:"+ba+")[\\s/>]","i"),va=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,wa=/<script|<style|<link/i,xa=/checked\s*(?:[^=]|=\s*.checked.)/i,ya=/^true\/(.*)/,za=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Aa=ca(d),Ba=Aa.appendChild(d.createElement("div"));function Ca(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function Da(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function Ea(a){var b=ya.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Fa(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)n.event.add(b,c,h[c][d])}g.data&&(g.data=n.extend({},g.data))}}function Ga(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events)n.removeEvent(b,d,e.handle);b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(Da(b).text=a.text,Ea(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Z.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}}function Ha(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&xa.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),Ha(f,b,c,d)});if(o&&(k=ja(b,a[0].ownerDocument,!1,a,d),e=k.firstChild,1===k.childNodes.length&&(k=e),e||d)){for(i=n.map(ea(k,"script"),Da),h=i.length;o>m;m++)g=k,m!==p&&(g=n.clone(g,!0,!0),h&&n.merge(i,ea(g,"script"))),c.call(a[m],g,m);if(h)for(j=i[i.length-1].ownerDocument,n.map(i,Ea),m=0;h>m;m++)g=i[m],_.test(g.type||"")&&!n._data(g,"globalEval")&&n.contains(j,g)&&(g.src?n._evalUrl&&n._evalUrl(g.src):n.globalEval((g.text||g.textContent||g.innerHTML||"").replace(za,"")));k=e=null}return a}function Ia(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(ea(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&fa(ea(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(va,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!ua.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Ba.innerHTML=a.outerHTML,Ba.removeChild(f=Ba.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(d=ea(f),h=ea(a),g=0;null!=(e=h[g]);++g)d[g]&&Ga(e,d[g]);if(b)if(c)for(h=h||ea(a),d=d||ea(f),g=0;null!=(e=h[g]);g++)Fa(e,d[g]);else Fa(a,f);return d=ea(f,"script"),d.length>0&&fa(d,!i&&ea(a,"script")),d=h=e=null,f},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.attributes,m=n.event.special;null!=(d=a[h]);h++)if((b||M(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle);j[f]&&(delete j[f],k||"undefined"==typeof d.removeAttribute?d[i]=void 0:d.removeAttribute(i),c.push(f))}}}),n.fn.extend({domManip:Ha,detach:function(a){return Ia(this,a,!0)},remove:function(a){return Ia(this,a)},text:function(a){return Y(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||d).createTextNode(a))},null,a,arguments.length)},append:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.appendChild(a)}})},prepend:function(){return Ha(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Ca(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ha(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&n.cleanData(ea(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return Y(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(ta,""):void 0;if("string"==typeof a&&!wa.test(a)&&(l.htmlSerialize||!ua.test(a))&&(l.leadingWhitespace||!aa.test(a))&&!da[($.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ea(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ha(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(ea(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],f=n(a),h=f.length-1;h>=d;d++)c=d===h?this:this.clone(!0),n(f[d])[b](c),g.apply(e,c.get());return this.pushStack(e)}});var Ja,Ka={HTML:"block",BODY:"block"};function La(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function Ma(a){var b=d,c=Ka[a];return c||(c=La(a,b),"none"!==c&&c||(Ja=(Ja||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Ja[0].contentWindow||Ja[0].contentDocument).document,b.write(),b.close(),c=La(a,b),Ja.detach()),Ka[a]=c),c}var Na=/^margin/,Oa=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Pa=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Qa=d.documentElement;!function(){var b,c,e,f,g,h,i=d.createElement("div"),j=d.createElement("div");if(j.style){j.style.cssText="float:left;opacity:.5",l.opacity="0.5"===j.style.opacity,l.cssFloat=!!j.style.cssFloat,j.style.backgroundClip="content-box",j.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===j.style.backgroundClip,i=d.createElement("div"),i.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",j.innerHTML="",i.appendChild(j),l.boxSizing=""===j.style.boxSizing||""===j.style.MozBoxSizing||""===j.style.WebkitBoxSizing,n.extend(l,{reliableHiddenOffsets:function(){return null==b&&k(),f},boxSizingReliable:function(){return null==b&&k(),e},pixelMarginRight:function(){return null==b&&k(),c},pixelPosition:function(){return null==b&&k(),b},reliableMarginRight:function(){return null==b&&k(),g},reliableMarginLeft:function(){return null==b&&k(),h}});function k(){var k,l,m=d.documentElement;m.appendChild(i),j.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",b=e=h=!1,c=g=!0,a.getComputedStyle&&(l=a.getComputedStyle(j),b="1%"!==(l||{}).top,h="2px"===(l||{}).marginLeft,e="4px"===(l||{width:"4px"}).width,j.style.marginRight="50%",c="4px"===(l||{marginRight:"4px"}).marginRight,k=j.appendChild(d.createElement("div")),k.style.cssText=j.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",k.style.marginRight=k.style.width="0",j.style.width="1px",g=!parseFloat((a.getComputedStyle(k)||{}).marginRight),j.removeChild(k)),j.style.display="none",f=0===j.getClientRects().length,f&&(j.style.display="",j.innerHTML="<table><tr><td></td><td>t</td></tr></table>",j.childNodes[0].style.borderCollapse="separate",k=j.getElementsByTagName("td"),k[0].style.cssText="margin:0;border:0;padding:0;display:none",f=0===k[0].offsetHeight,f&&(k[0].style.display="",k[1].style.display="none",f=0===k[0].offsetHeight)),m.removeChild(i)}}}();var Ra,Sa,Ta=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ra=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Oa.test(g)&&Na.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0===g?g:g+""}):Qa.currentStyle&&(Ra=function(a){return a.currentStyle},Sa=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Oa.test(g)&&!Ta.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Ua(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Va=/alpha\([^)]*\)/i,Wa=/opacity\s*=\s*([^)]*)/i,Xa=/^(none|table(?!-c[ea]).+)/,Ya=new RegExp("^("+T+")(.*)$","i"),Za={position:"absolute",visibility:"hidden",display:"block"},$a={letterSpacing:"0",fontWeight:"400"},_a=["Webkit","O","Moz","ms"],ab=d.createElement("div").style;function bb(a){if(a in ab)return a;var b=a.charAt(0).toUpperCase()+a.slice(1),c=_a.length;while(c--)if(a=_a[c]+b,a in ab)return a}function cb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&W(d)&&(f[g]=n._data(d,"olddisplay",Ma(d.nodeName)))):(e=W(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function db(a,b,c){var d=Ya.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function eb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+V[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+V[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+V[f]+"Width",!0,e))):(g+=n.css(a,"padding"+V[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+V[f]+"Width",!0,e)));return g}function fb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ra(a),g=l.boxSizing&&"border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Sa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Oa.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+eb(a,b,c||(g?"border":"content"),d,f)+"px"}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Sa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=U.exec(c))&&e[1]&&(c=X(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=bb(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Sa(a,b,d)),"normal"===f&&b in $a&&(f=$a[b]),""===c||c?(e=parseFloat(f),c===!0||isFinite(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Xa.test(n.css(a,"display"))&&0===a.offsetWidth?Pa(a,Za,function(){return fb(a,b,d)}):fb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ra(a);return db(a,c,d?eb(a,b,d,l.boxSizing&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Wa.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Va,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Va.test(f)?f.replace(Va,e):f+" "+e)}}),n.cssHooks.marginRight=Ua(l.reliableMarginRight,function(a,b){return b?Pa(a,{display:"inline-block"},Sa,[a,"marginRight"]):void 0}),n.cssHooks.marginLeft=Ua(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Sa(a,"marginLeft"))||(n.contains(a.ownerDocument,a)?a.getBoundingClientRect().left-Pa(a,{
marginLeft:0},function(){return a.getBoundingClientRect().left}):0))+"px":void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+V[d]+b]=f[d]||f[d-2]||f[0];return e}},Na.test(a)||(n.cssHooks[a+b].set=db)}),n.fn.extend({css:function(a,b){return Y(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ra(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return cb(this,!0)},hide:function(){return cb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){W(this)?n(this).show():n(this).hide()})}});function gb(a,b,c,d,e){return new gb.prototype.init(a,b,c,d,e)}n.Tween=gb,gb.prototype={constructor:gb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=gb.propHooks[this.prop];return a&&a.get?a.get(this):gb.propHooks._default.get(this)},run:function(a){var b,c=gb.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):gb.propHooks._default.set(this),this}},gb.prototype.init.prototype=gb.prototype,gb.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},gb.propHooks.scrollTop=gb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=gb.prototype.init,n.fx.step={};var hb,ib,jb=/^(?:toggle|show|hide)$/,kb=/queueHooks$/;function lb(){return a.setTimeout(function(){hb=void 0}),hb=n.now()}function mb(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=V[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function nb(a,b,c){for(var d,e=(qb.tweeners[b]||[]).concat(qb.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ob(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&W(a),r=n._data(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k="none"===j?n._data(a,"olddisplay")||Ma(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==Ma(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],jb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(o))"inline"===("none"===j?Ma(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o)n.style(a,b,o[b])});for(d in o)g=nb(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function pb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function qb(a,b,c){var d,e,f=0,g=qb.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=hb||lb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:hb||lb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(pb(k,j.opts.specialEasing);g>f;f++)if(d=qb.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,nb,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(qb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return X(c.elem,a,U.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],qb.tweeners[c]=qb.tweeners[c]||[],qb.tweeners[c].unshift(b)},prefilters:[ob],prefilter:function(a,b){b?qb.prefilters.unshift(a):qb.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(W).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=qb(this,n.extend({},a),f);(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&kb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(mb(b,!0),a,d,e)}}),n.each({slideDown:mb("show"),slideUp:mb("hide"),slideToggle:mb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(hb=n.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||n.fx.stop(),hb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ib||(ib=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(ib),ib=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a,b=d.createElement("input"),c=d.createElement("div"),e=d.createElement("select"),f=e.appendChild(d.createElement("option"));c=d.createElement("div"),c.setAttribute("className","t"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],b.setAttribute("type","checkbox"),c.appendChild(b),a=c.getElementsByTagName("a")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==c.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=f.selected,l.enctype=!!d.createElement("form").enctype,e.disabled=!0,l.optDisabled=!f.disabled,b=d.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value}();var rb=/\r/g,sb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(rb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(sb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>-1)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var tb,ub,vb=n.expr.attrHandle,wb=/^(?:checked|selected)$/i,xb=l.getSetAttribute,yb=l.input;n.fn.extend({attr:function(a,b){return Y(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ub:tb)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)?yb&&xb||!wb.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(xb?c:d)}}),ub={set:function(a,b,c){return b===!1?n.removeAttr(a,c):yb&&xb||!wb.test(c)?a.setAttribute(!xb&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=vb[b]||n.find.attr;yb&&xb||!wb.test(b)?vb[b]=function(a,b,d){var e,f;return d||(f=vb[b],vb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,vb[b]=f),e}:vb[b]=function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),yb&&xb||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?void(a.defaultValue=b):tb&&tb.set(a,b,c)}}),xb||(tb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},vb.id=vb.name=vb.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:tb.set},n.attrHooks.contenteditable={set:function(a,b,c){tb.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var zb=/^(?:input|select|textarea|button|object)$/i,Ab=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return Y(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):zb.test(a.nodeName)||Ab.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var Bb=/[\t\r\n\f]/g;function Cb(a){return n.attr(a,"class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,Cb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=Cb(c),d=1===c.nodeType&&(" "+e+" ").replace(Bb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,Cb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=Cb(c),d=1===c.nodeType&&(" "+e+" ").replace(Bb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&n.attr(c,"class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,Cb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=Cb(this),b&&n._data(this,"__className__",b),n.attr(this,"class",b||a===!1?"":n._data(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+Cb(c)+" ").replace(Bb," ").indexOf(b)>-1)return!0;return!1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Db=a.location,Eb=n.now(),Fb=/\?/,Gb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(Gb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new a.DOMParser,c=d.parseFromString(b,"text/xml")):(c=new a.ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var Hb=/#.*$/,Ib=/([?&])_=[^&]*/,Jb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Kb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Lb=/^(?:GET|HEAD)$/,Mb=/^\/\//,Nb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ob={},Pb={},Qb="*/".concat("*"),Rb=Db.href,Sb=Nb.exec(Rb.toLowerCase())||[];function Tb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Ub(a,b,c,d){var e={},f=a===Pb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Vb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&n.extend(!0,a,c),a}function Wb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Xb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rb,type:"GET",isLocal:Kb.test(Sb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Qb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Vb(Vb(a,n.ajaxSettings),b):Vb(n.ajaxSettings,a)},ajaxPrefilter:Tb(Ob),ajaxTransport:Tb(Pb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var d,e,f,g,h,i,j,k,l=n.ajaxSetup({},c),m=l.context||l,o=l.context&&(m.nodeType||m.jquery)?n(m):n.event,p=n.Deferred(),q=n.Callbacks("once memory"),r=l.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!k){k={};while(b=Jb.exec(g))k[b[1].toLowerCase()]=b[2]}b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return j&&j.abort(b),y(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,l.url=((b||l.url||Rb)+"").replace(Hb,"").replace(Mb,Sb[1]+"//"),l.type=c.method||c.type||l.method||l.type,l.dataTypes=n.trim(l.dataType||"*").toLowerCase().match(G)||[""],null==l.crossDomain&&(d=Nb.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Sb[1]&&d[2]===Sb[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Sb[3]||("http:"===Sb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=n.param(l.data,l.traditional)),Ub(Ob,l,c,w),2===u)return w;i=n.event&&l.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Lb.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Fb.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Ib.test(f)?f.replace(Ib,"$1_="+Eb++):f+(Fb.test(f)?"&":"?")+"_="+Eb++)),l.ifModified&&(n.lastModified[f]&&w.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&w.setRequestHeader("If-None-Match",n.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",l.contentType),w.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Qb+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)w.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,w,l)===!1||2===u))return w.abort();v="abort";for(e in{success:1,error:1,complete:1})w[e](l[e]);if(j=Ub(Pb,l,c,w)){if(w.readyState=1,i&&o.trigger("ajaxSend",[w,l]),2===u)return w;l.async&&l.timeout>0&&(h=a.setTimeout(function(){w.abort("timeout")},l.timeout));try{u=1,j.send(s,y)}catch(x){if(!(2>u))throw x;y(-1,x)}}else y(-1,"No Transport");function y(b,c,d,e){var k,s,t,v,x,y=c;2!==u&&(u=2,h&&a.clearTimeout(h),j=void 0,g=e||"",w.readyState=b>0?4:0,k=b>=200&&300>b||304===b,d&&(v=Wb(l,w,d)),v=Xb(l,v,w,k),k?(l.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(n.lastModified[f]=x),x=w.getResponseHeader("etag"),x&&(n.etag[f]=x)),204===b||"HEAD"===l.type?y="nocontent":304===b?y="notmodified":(y=v.state,s=v.data,t=v.error,k=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),w.status=b,w.statusText=(c||y)+"",k?p.resolveWith(m,[s,y,w]):p.rejectWith(m,[w,y,t]),w.statusCode(r),r=void 0,i&&o.trigger(k?"ajaxSuccess":"ajaxError",[w,l,k?s:t]),q.fireWith(m,[w,y]),i&&(o.trigger("ajaxComplete",[w,l]),--n.active||n.event.trigger("ajaxStop")))}return w},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a))return this.each(function(b){n(this).wrapAll(a.call(this,b))});if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}});function Yb(a){return a.style&&a.style.display||n.css(a,"display")}function Zb(a){if(!n.contains(a.ownerDocument||d,a))return!0;while(a&&1===a.nodeType){if("none"===Yb(a)||"hidden"===a.type)return!0;a=a.parentNode}return!1}n.expr.filters.hidden=function(a){return l.reliableHiddenOffsets()?a.offsetWidth<=0&&a.offsetHeight<=0&&!a.getClientRects().length:Zb(a)},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var $b=/%20/g,_b=/\[\]$/,ac=/\r?\n/g,bc=/^(?:submit|button|image|reset|file)$/i,cc=/^(?:input|select|textarea|keygen)/i;function dc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||_b.test(a)?d(a,e):dc(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)dc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)dc(c,a[c],b,e);return d.join("&").replace($b,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&cc.test(this.nodeName)&&!bc.test(a)&&(this.checked||!Z.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(ac,"\r\n")}}):{name:b.name,value:c.replace(ac,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return this.isLocal?ic():d.documentMode>8?hc():/^(get|post|head|put|delete|options)$/i.test(this.type)&&hc()||ic()}:hc;var ec=0,fc={},gc=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in fc)fc[a](void 0,!0)}),l.cors=!!gc&&"withCredentials"in gc,gc=l.ajax=!!gc,gc&&n.ajaxTransport(function(b){if(!b.crossDomain||l.cors){var c;return{send:function(d,e){var f,g=b.xhr(),h=++ec;if(g.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(f in b.xhrFields)g[f]=b.xhrFields[f];b.mimeType&&g.overrideMimeType&&g.overrideMimeType(b.mimeType),b.crossDomain||d["X-Requested-With"]||(d["X-Requested-With"]="XMLHttpRequest");for(f in d)void 0!==d[f]&&g.setRequestHeader(f,d[f]+"");g.send(b.hasContent&&b.data||null),c=function(a,d){var f,i,j;if(c&&(d||4===g.readyState))if(delete fc[h],c=void 0,g.onreadystatechange=n.noop,d)4!==g.readyState&&g.abort();else{j={},f=g.status,"string"==typeof g.responseText&&(j.text=g.responseText);try{i=g.statusText}catch(k){i=""}f||!b.isLocal||b.crossDomain?1223===f&&(f=204):f=j.text?200:404}j&&e(f,i,j,g.getAllResponseHeaders())},b.async?4===g.readyState?a.setTimeout(c):g.onreadystatechange=fc[h]=c:c()},abort:function(){c&&c(void 0,!0)}}}});function hc(){try{return new a.XMLHttpRequest}catch(b){}}function ic(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=d.head||n("head")[0]||d.documentElement;return{send:function(e,f){b=d.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||f(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var jc=[],kc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=jc.pop()||n.expando+"_"+Eb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(kc.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&kc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(kc,"$1"+e):b.jsonp!==!1&&(b.url+=(Fb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,jc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ja([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var lc=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&lc)return lc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h,a.length)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function mc(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,n.contains(b,e)?("undefined"!=typeof e.getBoundingClientRect&&(d=e.getBoundingClientRect()),c=mc(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Qa})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return Y(this,function(a,d,e){var f=mc(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ua(l.pixelPosition,function(a,c){return c?(c=Sa(a,b),Oa.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({
padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return Y(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var nc=a.jQuery,oc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=oc),b&&a.jQuery===n&&(a.jQuery=nc),n},b||(a.jQuery=a.$=n),n});
"undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,c,e,f){if(Object.defineProperty)try{return void Object.defineProperty(b,c,{configurable:!0,enumerable:!0,get:function(){return d(f),e},set:function(a){d(f),e=a}})}catch(g){}a._definePropertyBroken=!0,b[c]=e}a.migrateVersion="1.4.1";var f={};a.migrateWarnings=[],b.console&&b.console.log&&b.console.log("JQMIGRATE: Migrate is installed"+(a.migrateMute?"":" with logging active")+", version "+a.migrateVersion),a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(h.length<4&&d("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):("type"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return f===!0||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d("jQuery.fn.attr('"+j+"') might use property instead of attribute")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?j.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value', val) no longer sets properties"),void(a.value=b))}};var o,p,q=a.fn.init,r=a.find,s=a.parseJSON,t=/^\s*</,u=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,v=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,w=/^([^<]*)(<[\w\W]+>)([^>]*)$/;a.fn.init=function(b,e,f){var g,h;return b&&"string"==typeof b&&!a.isPlainObject(e)&&(g=w.exec(a.trim(b)))&&g[0]&&(t.test(b)||d("$(html) HTML strings must start with '<' character"),g[3]&&d("$(html) HTML text after last tag is ignored"),"#"===g[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),e&&e.context&&e.context.nodeType&&(e=e.context),a.parseHTML)?q.call(this,a.parseHTML(g[2],e&&e.ownerDocument||e||document,!0),e,f):(h=q.apply(this,arguments),b&&b.selector!==c?(h.selector=b.selector,h.context=b.context):(h.selector="string"==typeof b?b:"",b&&(h.context=b.nodeType?b:e||document)),h)},a.fn.init.prototype=a.fn,a.find=function(a){var b=Array.prototype.slice.call(arguments);if("string"==typeof a&&u.test(a))try{document.querySelector(a)}catch(c){a=a.replace(v,function(a,b,c,d){return"["+b+c+'"'+d+'"]'});try{document.querySelector(a),d("Attribute selector with '#' must be quoted: "+b[0]),b[0]=a}catch(e){d("Attribute selector with '#' was not fixed: "+b[0])}}return r.apply(this,b)};var x;for(x in r)Object.prototype.hasOwnProperty.call(r,x)&&(a.find[x]=r[x]);a.parseJSON=function(a){return a?s.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,"browser",a.browser,"jQuery.browser is deprecated"),a.boxModel=a.support.boxModel="CSS1Compat"===document.compatMode,e(a,"boxModel",a.boxModel,"jQuery.boxModel is deprecated"),e(a.support,"boxModel",a.support.boxModel,"jQuery.support.boxModel is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){var f=a.fn.init.call(this,d,e,c);return f instanceof b?f:b(f)},b.fn.init.prototype=b.fn;var c=b(document);return d("jQuery.sub() is deprecated"),b},a.fn.size=function(){return d("jQuery.fn.size() is deprecated; use the .length property"),this.length};var y=!1;a.swap&&a.each(["height","width","reliableMarginRight"],function(b,c){var d=a.cssHooks[c]&&a.cssHooks[c].get;d&&(a.cssHooks[c].get=function(){var a;return y=!0,a=d.apply(this,arguments),y=!1,a})}),a.swap=function(a,b,c,e){var f,g,h={};y||d("jQuery.swap() is undocumented and deprecated");for(g in b)h[g]=a.style[g],a.style[g]=b[g];f=c.apply(a,e||[]);for(g in b)a.style[g]=h[g];return f},a.ajaxSetup({converters:{"text json":a.parseJSON}});var z=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?z.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),f)};var A=/\/(java|ecma)script/i;a.clean||(a.clean=function(b,c,e,f){c=c||document,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,d("jQuery.clean() is deprecated");var g,h,i,j,k=[];if(a.merge(k,a.buildFragment(b,c).childNodes),e)for(i=function(a){return!a.type||A.test(a.type)?f?f.push(a.parentNode?a.parentNode.removeChild(a):a):e.appendChild(a):void 0},g=0;null!=(h=k[g]);g++)a.nodeName(h,"script")&&i(h)||(e.appendChild(h),"undefined"!=typeof h.getElementsByTagName&&(j=a.grep(a.merge([],h.getElementsByTagName("script")),i),k.splice.apply(k,[g+1,0].concat(j)),g+=j.length));return k});var B=a.event.add,C=a.event.remove,D=a.event.trigger,E=a.fn.toggle,F=a.fn.live,G=a.fn.die,H=a.fn.load,I="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",J=new RegExp("\\b(?:"+I+")\\b"),K=/(?:^|\s)hover(\.\S+|)\b/,L=function(b){return"string"!=typeof b||a.event.special.hover?b:(K.test(b)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(K,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&e(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,e,f){a!==document&&J.test(b)&&d("AJAX events should be attached to document: "+b),B.call(this,a,L(b||""),c,e,f)},a.event.remove=function(a,b,c,d,e){C.call(this,a,L(b)||"",c,d,e)},a.each(["load","unload","error"],function(b,c){a.fn[c]=function(){var a=Array.prototype.slice.call(arguments,0);return"load"===c&&"string"==typeof a[0]?H.apply(this,a):(d("jQuery.fn."+c+"() is deprecated"),a.splice(0,0,c),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this))}}),a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return E.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,"lastToggle"+b.guid)||0)%g;return a._data(this,"lastToggle"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;g<e.length;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d("jQuery.fn.live() is deprecated"),F?F.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d("jQuery.fn.die() is deprecated"),G?G.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,e){return c||J.test(a)||d("Global events are undocumented and deprecated"),D.call(this,a,b,c||document,e)},a.each(I.split("|"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,function(){a.event.trigger(c,Array.prototype.slice.call(arguments,1),b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}}),a.event.special.ready={setup:function(){this===document&&d("'ready' event is deprecated")}};var M=a.fn.andSelf||a.fn.addBack,N=a.fn.find;if(a.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),M.apply(this,arguments)},a.fn.find=function(a){var b=N.apply(this,arguments);return b.context=this.context,b.selector=this.selector?this.selector+" "+a:a,b},a.Callbacks){var O=a.Deferred,P=[["resolve","done",a.Callbacks("once memory"),a.Callbacks("once memory"),"resolved"],["reject","fail",a.Callbacks("once memory"),a.Callbacks("once memory"),"rejected"],["notify","progress",a.Callbacks("memory"),a.Callbacks("memory")]];a.Deferred=function(b){var c=O(),e=c.promise();return c.pipe=e.pipe=function(){var b=arguments;return d("deferred.pipe() is deprecated"),a.Deferred(function(d){a.each(P,function(f,g){var h=a.isFunction(b[f])&&b[f];c[g[1]](function(){var b=h&&h.apply(this,arguments);b&&a.isFunction(b.promise)?b.promise().done(d.resolve).fail(d.reject).progress(d.notify):d[g[0]+"With"](this===e?d.promise():this,h?[b]:arguments)})}),b=null}).promise()},c.isResolved=function(){return d("deferred.isResolved is deprecated"),"resolved"===c.state()},c.isRejected=function(){return d("deferred.isRejected is deprecated"),"rejected"===c.state()},b&&b.call(c,c),c}}}(jQuery,window);
(function (d, D) {
function M(b, a) {
b = "" + b;
for (a = a || 2; b.length < a;) b = "0" + b;
return b
}
function N(b, a, d, g) {
var f = a.getDate(),
l = a.getDay(),
k = a.getMonth(),
c = a.getFullYear(),
f = {
d: f,
dd: M(f),
ddd: r[g].shortDays[l],
dddd: r[g].days[l],
m: k + 1,
mm: M(k + 1),
mmm: r[g].shortMonths[k],
mmmm: r[g].months[k],
yy: ("" + c).slice(2),
yyyy: c
}, b = O[b](d, a, f, g);
return S.html(b).html()
}
function l(b) {
return parseInt(b, 10)
}
function P(b, a) {
return b.getFullYear() === a.getFullYear() && b.getMonth() == a.getMonth() && b.getDate() == a.getDate()
}
function w(b) {
if (b !== D) {
if (b.constructor == Date) return b;
if ("string" == typeof b) {
var a = b.split("-");
if (3 == a.length) return new Date(l(a[0]), l(a[1]) - 1, l(a[2]));
if (!/^-?\d+$/.test(b)) return;
b = l(b)
}
a = new Date;
a.setDate(a.getDate() + b);
return a
}
}
function T(b, a) {
function j(a, t, c) {
o = a;
z = a.getFullYear();
B = a.getMonth();
A = a.getDate();
c || (c = d.Event("api"));
"click" == c.type && !d.browser.msie && b.focus();
c.type = "beforeChange";
C.trigger(c, [a]);
c.isDefaultPrevented() || (b.val(N(t.formatter, a, t.format, t.lang)), c.type = "change", C.trigger(c),
b.data("date", a), f.hide(c))
}
function g(a) {
a.type = "onShow";
C.trigger(a);
d(document).on("keydown.d", function (a) {
if (a.ctrlKey) return !0;
var e = a.keyCode;
if (8 == e || 46 == e) return b.val(""), f.hide(a);
if (27 == e || 9 == e) return f.hide(a);
if (0 <= d(Q).index(e)) {
if (!u) return f.show(a), a.preventDefault();
var h = d("#" + c.weeks + " a"),
j = d("." + c.focus),
g = h.index(j);
j.removeClass(c.focus);
if (74 == e || 40 == e) g += 7;
else if (75 == e || 38 == e) g -= 7;
else if (76 == e || 39 == e) g += 1;
else if (72 == e || 37 == e) g -= 1;
41 < g ? (f.addMonth(), j = d("#" + c.weeks + " a:eq(" + (g - 42) + ")")) : 0 > g ? (f.addMonth(-1), j = d("#" + c.weeks + " a:eq(" + (g + 42) + ")")) : j = h.eq(g);
j.addClass(c.focus);
return a.preventDefault()
}
if (34 == e) return f.addMonth();
if (33 == e) return f.addMonth(-1);
if (36 == e) return f.today();
13 == e && (d(a.target).is("select") || d("." + c.focus).click());
return 0 <= d([16, 17, 18, 9]).index(e)
});
d(document).on("click.d", function (a) {
var e = a.target;
!d(e).parents("#" + c.root).length && e != b[0] && (!E || e != E[0]) && f.hide(a)
})
}
var f = this,
q = new Date,
k = q.getFullYear(),
c = a.css,
F = r[a.lang],
i = d("#" + c.root),
K = i.find("#" + c.title),
E, G, H, z, B, A, o = b.attr("data-value") || a.value || b.val(),
n = b.attr("min") || a.min,
p = b.attr("max") || a.max,
u, I;
0 === n && (n = "0");
o = w(o) || q;
n = w(n || new Date(k + a.yearRange[0], 1, 1));
p = w(p || new Date(k + a.yearRange[1] + 1, 1, -1));
if (!F) throw "Dateinput: invalid language: " + a.lang;
"date" == b.attr("type") && (I = b.clone(), k = I.wrap("<div/>").parent().html(), k = d(k.replace(/type/i, "type=text data-orig-type")), a.value && k.val(a.value), b.replaceWith(k), b = k);
b.addClass(c.input);
var C = b.add(f);
if (!i.length) {
i = d("<div><div><a/><div/><a/></div><div><div/><div/></div></div>").hide().css({
position: "absolute"
}).attr("id", c.root);
i.children().eq(0).attr("id", c.head).end().eq(1).attr("id", c.body).children().eq(0).attr("id", c.days).end().eq(1).attr("id", c.weeks).end().end().end().find("a").eq(0).attr("id", c.prev).end().eq(1).attr("id", c.next);
K = i.find("#" + c.head).find("div").attr("id", c.title);
if (a.selectors) {
var x = d("<select/>").attr("id", c.month),
y = d("<select/>").attr("id", c.year);
K.html(x.add(y))
}
for (var k = i.find("#" + c.days), L = 0; 7 > L; L++) k.append(d("<span/>").text(F.shortDays[(L + a.firstDay) % 7]));
d("body").append(i)
}
a.trigger && (E = d("<a/>").attr("href", "#").addClass(c.trigger).click(function (e) {
a.toggle ? f.toggle() : f.show();
return e.preventDefault()
}).insertAfter(b));
var J = i.find("#" + c.weeks),
y = i.find("#" + c.year),
x = i.find("#" + c.month);
d.extend(f, {
show: function (e) {
if (!b.attr("readonly") && !b.attr("disabled") && !u) {
e = e || d.Event();
e.type = "onBeforeShow";
C.trigger(e);
if (!e.isDefaultPrevented()) {
d.each(R, function () {
this.hide()
});
u = true;
x.off("change").change(function () {
f.setValue(l(y.val()), l(d(this).val()))
});
y.off("change").change(function () {
f.setValue(l(d(this).val()), l(x.val()))
});
G = i.find("#" + c.prev).off("click").click(function () {
G.hasClass(c.disabled) || f.addMonth(-1);
return false
});
H = i.find("#" + c.next).off("click").click(function () {
H.hasClass(c.disabled) || f.addMonth();
return false
});
f.setValue(o);
var t = b.offset();
i.css({
top: t.top + b.outerHeight({
margins: true
}) + a.offset[0],
left: t.left + a.offset[1]
});
if (a.speed) i.show(a.speed, function () {
g(e)
});
else {
i.show();
g(e)
}
return f
}
}
},
setValue: function (e, b, g) {
var h = l(b) >= -1 ? new Date(l(e), l(b), l(g == D || isNaN(g) ? 1 : g)) : e || o;
h < n ? h = n : h > p && (h = p);
typeof e == "string" && (h = w(e));
e = h.getFullYear();
b = h.getMonth();
g = h.getDate();
if (b == -1) {
b = 11;
e--
} else if (b == 12) {
b = 0;
e++
}
if (!u) {
j(h, a);
return f
}
B = b;
z = e;
A = g;
var g = (new Date(e, b, 1 - a.firstDay)).getDay(),
i = (new Date(e, b + 1, 0)).getDate(),
k = (new Date(e, b - 1 + 1, 0)).getDate(),
r;
if (a.selectors) {
x.empty();
d.each(F.months, function (a, b) {
n < new Date(e, a + 1, 1) && p > new Date(e, a, 0) && x.append(d("<option/>").html(b).attr("value", a))
});
y.empty();
for (var h = q.getFullYear(), m = h + a.yearRange[0]; m < h + a.yearRange[1]; m++) n < new Date(m + 1, 0, 1) && p > new Date(m, 0, 0) && y.append(d("<option/>").text(m));
x.val(b);
y.val(e)
} else K.html(F.months[b] + " " + e);
J.empty();
G.add(H).removeClass(c.disabled);
for (var m = !g ? -7 : 0, s, v; m < (!g ? 35 : 42); m++) {
s = d("<a/>");
if (m % 7 === 0) {
r = d("<div/>").addClass(c.week);
J.append(r)
}
if (m < g) {
s.addClass(c.off);
v = k - g + m + 1;
h = new Date(e, b - 1, v)
} else if (m >= g + i) {
s.addClass(c.off);
v = m - i - g + 1;
h = new Date(e, b + 1, v)
} else {
v = m - g + 1;
h = new Date(e, b, v);
P(o, h) ? s.attr("id", c.current).addClass(c.focus) : P(q, h) && s.attr("id", c.today)
}
n && h < n && s.add(G).addClass(c.disabled);
p && h > p && s.add(H).addClass(c.disabled);
s.attr("href", "#" + v).text(v).data("date", h);
r.append(s)
}
J.find("a").click(function (b) {
var e = d(this);
if (!e.hasClass(c.disabled)) {
d("#" + c.current).removeAttr("id");
e.attr("id", c.current);
j(e.data("date"), a, b)
}
return false
});
c.sunday && J.find("." + c.week).each(function () {
var b = a.firstDay ? 7 - a.firstDay : 0;
d(this).children().slice(b, b + 1).addClass(c.sunday)
});
return f
},
setMin: function (a, b) {
n = w(a);
b && o < n && f.setValue(n);
return f
},
setMax: function (a, b) {
p = w(a);
b && o > p && f.setValue(p);
return f
},
today: function () {
return f.setValue(q)
},
addDay: function (a) {
return this.setValue(z, B, A + (a || 1))
},
addMonth: function (a) {
var a = B + (a || 1),
b = (new Date(z, a + 1, 0)).getDate();
return this.setValue(z, a, A <= b ? A : b)
},
addYear: function (a) {
return this.setValue(z + (a || 1), B, A)
},
destroy: function () {
b.add(document).off("click.d keydown.d");
i.add(E).remove();
b.removeData("dateinput").removeClass(c.input);
I && b.replaceWith(I)
},
hide: function (a) {
if (u) {
a = d.Event();
a.type = "onHide";
C.trigger(a);
if (a.isDefaultPrevented()) return;
d(document).off("click.d keydown.d");
i.hide();
u = false
}
return f
},
toggle: function () {
return f.isOpen() ? f.hide() : f.show()
},
getConf: function () {
return a
},
getInput: function () {
return b
},
getCalendar: function () {
return i
},
getValue: function (b) {
return b ? N(a.formatter, o, b,
a.lang) : o
},
isOpen: function () {
return u
}
});
d.each(["onBeforeShow", "onShow", "change", "onHide"], function (b, c) {
if (d.isFunction(a[c])) d(f).on(c, a[c]);
f[c] = function (a) {
if (a) d(f).on(c, a);
return f
}
});
a.editable || b.on("focus.d click.d", f.show).keydown(function (a) {
var c = a.keyCode;
if (!u && d(Q).index(c) >= 0) {
f.show(a);
return a.preventDefault()
}
(c == 8 || c == 46) && b.val("");
return a.shiftKey || a.ctrlKey || a.altKey || c == 9 ? true : a.preventDefault()
});
w(b.val()) && j(o, a)
}
d.tools = d.tools || {
version: "@VERSION"
};
var R = [],
O = {}, q, Q = [75, 76, 38, 39, 74, 72, 40, 37],
r = {};
q = d.tools.dateinput = {
conf: {
format: "mm/dd/yy",
formatter: "default",
selectors: !1,
yearRange: [-5, 5],
lang: "en",
offset: [0, 0],
speed: 0,
firstDay: 0,
min: D,
max: D,
trigger: 0,
toggle: 0,
editable: 0,
css: {
prefix: "cal",
input: "date",
root: 0,
head: 0,
title: 0,
prev: 0,
next: 0,
month: 0,
year: 0,
days: 0,
body: 0,
weeks: 0,
today: 0,
current: 0,
week: 0,
off: 0,
sunday: 0,
focus: 0,
disabled: 0,
trigger: 0
}
},
addFormatter: function (b, a) {
O[b] = a
},
localize: function (b, a) {
d.each(a, function (b, d) {
a[b] = d.split(",")
});
r[b] = a
}
};
q.localize("en", {
months: "January,February,March,April,May,June,July,August,September,October,November,December",
shortMonths: "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",
days: "Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",
shortDays: "Sun,Mon,Tue,Wed,Thu,Fri,Sat"
});
var S = d("<a/>");
q.addFormatter("default", function (b, a, d) {
return b.replace(/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g, function (a) {
return a in d ? d[a] : a
})
});
q.addFormatter("prefixed", function (b, a, d) {
return b.replace(/%(d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*')/g,
function (a, b) {
return b in d ? d[b] : a
})
});
d.expr[":"].date = function (b) {
var a = b.getAttribute("type");
return a && "date" == a || !!d(b).data("dateinput")
};
d.fn.dateinput = function (b) {
if (this.data("dateinput")) return this;
b = d.extend(!0, {}, q.conf, b);
d.each(b.css, function (a, d) {
!d && "prefix" != a && (b.css[a] = (b.css.prefix || "") + (d || a))
});
var a;
this.each(function () {
var j = new T(d(this), b);
R.push(j);
j = j.getInput().data("dateinput", j);
a = a ? a.add(j) : j
});
return a ? a : this
}
})(jQuery);
(function (b) {
function m(a, c) {
var d = this,
h = a.add(d),
n = b(window),
e, f, k, g = b.tools.expose && (c.mask || c.expose),
l = Math.random().toString().slice(10);
g && ("string" == typeof g && (g = {
color: g
}), g.closeOnClick = g.closeOnEsc = !1);
var i = c.target || a.attr("rel");
f = i ? b(i) : a;
if (!f.length) throw "Could not find Overlay: " + i;
a && -1 == a.index(f) && a.click(function (b) {
d.load(b);
return b.preventDefault()
});
b.extend(d, {
load: function (a) {
if (d.isOpened()) return d;
var p = o[c.effect];
if (!p) throw 'Overlay: cannot find effect : "' + c.effect + '"';
c.oneInstance && b.each(q, function () {
this.close(a)
});
a = a || b.Event();
a.type = "onBeforeLoad";
h.trigger(a);
if (a.isDefaultPrevented()) return d;
k = true;
g && b(f).expose(g);
var j = c.top,
e = c.left,
i = f.outerWidth({
margin: true
}),
m = f.outerHeight({
margin: true
});
typeof j == "string" && (j = j == "center" ? Math.max((n.height() - m) / 2, 0) : parseInt(j, 10) / 100 * n.height());
e == "center" && (e = Math.max((n.width() - i) / 2, 0));
p[0].call(d, {
top: j,
left: e
}, function () {
if (k) {
a.type = "onLoad";
h.trigger(a)
}
});
if (g && c.closeOnClick) b.mask.getMask().one("click",
d.close);
if (c.closeOnClick) b(document).on("click." + l, function (a) {
b(a.target).parents(f).length || d.close(a)
});
if (c.closeOnEsc) b(document).on("keydown." + l, function (a) {
a.keyCode == 27 && d.close(a)
});
return d
},
close: function (a) {
if (!d.isOpened()) return d;
a = a || b.Event();
a.type = "onBeforeClose";
h.trigger(a);
if (!a.isDefaultPrevented()) {
k = false;
o[c.effect][1].call(d, function () {
a.type = "onClose";
h.trigger(a)
});
b(document).off("click." + l + " keydown." + l);
g && b.mask.close();
return d
}
},
getOverlay: function () {
return f
},
getTrigger: function () {
return a
},
getClosers: function () {
return e
},
isOpened: function () {
return k
},
getConf: function () {
return c
}
});
b.each(["onBeforeLoad", "onStart", "onLoad", "onBeforeClose", "onClose"], function (a, e) {
if (b.isFunction(c[e])) b(d).on(e, c[e]);
d[e] = function (a) {
if (a) b(d).on(e, a);
return d
}
});
e = f.find(c.close || ".close");
!e.length && !c.close && (e = b('<a class="close"></a>'), f.prepend(e));
e.click(function (a) {
d.close(a)
});
c.load && d.load()
}
b.tools = b.tools || {
version: "@VERSION"
};
b.tools.overlay = {
addEffect: function (a, b, d) {
o[a] = [b, d]
},
conf: {
close: null,
closeOnClick: !0,
closeOnEsc: !0,
closeSpeed: "fast",
effect: "default",
fixed: !b.browser.msie || 6 < b.browser.version,
left: "center",
load: !1,
mask: null,
oneInstance: !0,
speed: "normal",
target: null,
top: "10%"
}
};
var q = [],
o = {};
b.tools.overlay.addEffect("default", function (a, c) {
var d = this.getConf(),
h = b(window);
d.fixed || (a.top += h.scrollTop(), a.left += h.scrollLeft());
a.position = d.fixed ? "fixed" : "absolute";
this.getOverlay().css(a).fadeIn(d.speed, c)
}, function (a) {
this.getOverlay().fadeOut(this.getConf().closeSpeed,
a)
});
b.fn.overlay = function (a) {
var c = this.data("overlay");
if (c) return c;
b.isFunction(a) && (a = {
onBeforeLoad: a
});
a = b.extend(!0, {}, b.tools.overlay.conf, a);
this.each(function () {
c = new m(b(this), a);
q.push(c);
b(this).data("overlay", c)
});
return a.api ? c : this
}
})(jQuery);
(function (h) {
function l(a) {
var e = a.offset();
return {
top: e.top + a.height() / 2,
left: e.left + a.width() / 2
}
}
var i = h.tools.overlay,
f = h(window);
h.extend(i.conf, {
start: {
top: null,
left: null
},
fadeInSpeed: "fast",
zIndex: 9999
});
i.addEffect("apple", function (a, e) {
var b = this.getOverlay(),
d = this.getConf(),
g = this.getTrigger(),
i = this,
m = b.outerWidth({
margin: !0
}),
c = b.data("img"),
n = d.fixed ? "fixed" : "absolute";
if (!c) {
c = b.css("backgroundImage");
if (!c) throw "background-image CSS property not set for overlay";
c = c.slice(c.indexOf("(") + 1, c.indexOf(")")).replace(/\"/g, "");
b.css("backgroundImage", "none");
c = h('<img src="' + c + '"/>');
c.css({
border: 0,
display: "none"
}).width(m);
h("body").append(c);
b.data("img", c)
}
var j = d.start.top || Math.round(f.height() / 2),
k = d.start.left || Math.round(f.width() / 2);
g && (g = l(g), j = g.top, k = g.left);
d.fixed ? (j -= f.scrollTop(), k -= f.scrollLeft()) : (a.top += f.scrollTop(), a.left += f.scrollLeft());
c.css({
position: "absolute",
top: j,
left: k,
width: 0,
zIndex: d.zIndex
}).show();
a.position = n;
b.css(a);
c.animate({
top: a.top,
left: a.left,
width: m
}, d.speed,function () {
b.css("zIndex", d.zIndex + 1).fadeIn(d.fadeInSpeed, function () {
i.isOpened() && !h(this).index(b) ? e.call() : b.hide()
})
}).css("position", n)
}, function (a) {
var e = this.getOverlay().hide(),
b = this.getConf(),
d = this.getTrigger(),
e = e.data("img"),
g = {
top: b.start.top,
left: b.start.left,
width: 0
};
d && h.extend(g, l(d));
b.fixed && e.css({
position: "absolute"
}).animate({
top: "+=" + f.scrollTop(),
left: "+=" + f.scrollLeft()
}, 0);
e.animate(g, b.closeSpeed, a)
})
})(jQuery);
(function (a) {
function z(c, b) {
var a = Math.pow(10, b);
return Math.round(c * a) / a
}
function m(c, b) {
var a = parseInt(c.css(b), 10);
return a ? a : (a = c[0].currentStyle) && a.width && parseInt(a.width, 10)
}
function y(a) {
return (a = a.data("events")) && a.onSlide
}
function A(c, b) {
function e(a, d, f, e) {
void 0 === f ? f = d / i * v : e && (f -= b.min);
s && (f = Math.round(f / s) * s);
if (void 0 === d || s) d = f * i / v;
if (isNaN(f)) return g;
d = Math.max(0, Math.min(d, i));
f = d / i * v;
if (e || !n) f += b.min;
n && (e ? d = i - d : f = b.max - f);
var f = z(f, r),
h = "click" == a.type;
if (u && void 0 !== k && !h && (a.type = "onSlide", w.trigger(a, [f, d]), a.isDefaultPrevented())) return g;
e = h ? b.speed : 0;
h = h ? function () {
a.type = "change";
w.trigger(a, [f])
} : null;
n ? (j.animate({
top: d
}, e, h), b.progress && x.animate({
height: i - d + j.height() / 2
}, e)) : (j.animate({
left: d
}, e, h), b.progress && x.animate({
width: d + j.width() / 2
}, e));
k = f;
c.val(f);
return g
}
function o() {
(n = b.vertical || m(h, "height") > m(h, "width")) ? (i = m(h, "height") - m(j, "height"), l = h.offset().top + i) : (i = m(h, "width") - m(j, "width"), l = h.offset().left)
}
function q() {
o();
g.setValue(void 0 !== b.value ? b.value : b.min)
}
var g = this,
p = b.css,
h = a("<div><div/><a href='#'/></div>").data("rangeinput", g),
n, k, l, i;
c.before(h);
var j = h.addClass(p.slider).find("a").addClass(p.handle),
x = h.find("div").addClass(p.progress);
a.each(["min", "max", "step", "value"], function (a, d) {
var f = c.attr(d);
parseFloat(f) && (b[d] = parseFloat(f, 10))
});
var v = b.max - b.min,
s = "any" == b.step ? 0 : b.step,
r = b.precision;
void 0 === r && (r = s.toString().split("."), r = 2 === r.length ? r[1].length : 0);
if ("range" == c.attr("type")) {
var t = c.clone().wrap("<div/>").parent().html(),
t = a(t.replace(/type/i, "type=text data-orig-type"));
t.val(b.value);
c.replaceWith(t);
c = t
}
c.addClass(p.input);
var w = a(g).add(c),
u = !0;
a.extend(g, {
getValue: function () {
return k
},
setValue: function (b, d) {
o();
return e(d || a.Event("api"), void 0, b, true)
},
getConf: function () {
return b
},
getProgress: function () {
return x
},
getHandle: function () {
return j
},
getInput: function () {
return c
},
step: function (c, d) {
d = d || a.Event();
g.setValue(k + (b.step == "any" ? 1 : b.step) * (c || 1), d)
},
stepUp: function (a) {
return g.step(a || 1)
},
stepDown: function (a) {
return g.step(-a || -1)
}
});
a.each(["onSlide", "change"], function (c, d) {
if (a.isFunction(b[d])) a(g).on(d, b[d]);
g[d] = function (b) {
if (b) a(g).on(d, b);
return g
}
});
j.drag({
drag: !1
}).on("dragStart",function () {
o();
u = y(a(g)) || y(c)
}).on("drag",function (a, b, f) {
if (c.is(":disabled")) return false;
e(a, n ? b : f)
}).on("dragEnd",function (a) {
if (!a.isDefaultPrevented()) {
a.type = "change";
w.trigger(a, [k])
}
}).click(function (a) {
return a.preventDefault()
});
h.click(function (a) {
if (c.is(":disabled") || a.target == j[0]) return a.preventDefault();
o();
var b = n ? j.height() / 2 : j.width() / 2;
e(a, n ? i - l - b + a.pageY : a.pageX - l - b)
});
b.keyboard && c.keydown(function (b) {
if (!c.attr("readonly")) {
var d = b.keyCode,
f = a([75, 76, 38, 33, 39]).index(d) != -1,
e = a([74, 72, 40, 34, 37]).index(d) != -1;
if ((f || e) && !b.shiftKey && !b.altKey && !b.ctrlKey) {
f ? g.step(d == 33 ? 10 : 1, b) : e && g.step(d == 34 ? -10 : -1, b);
return b.preventDefault()
}
}
});
c.blur(function (b) {
var c = a(this).val();
c !== k && g.setValue(c, b)
});
a.extend(c[0], {
stepUp: g.stepUp,
stepDown: g.stepDown
});
q();
i || a(window).load(q)
}
a.tools = a.tools || {
version: "@VERSION"
};
var u;
u = a.tools.rangeinput = {
conf: {
min: 0,
max: 100,
step: "any",
steps: 0,
value: 0,
precision: void 0,
vertical: 0,
keyboard: !0,
progress: !1,
speed: 100,
css: {
input: "range",
slider: "slider",
progress: "progress",
handle: "handle"
}
}
};
var q, l;
a.fn.drag = function (c) {
document.ondragstart = function () {
return !1
};
c = a.extend({
x: !0,
y: !0,
drag: !0
}, c);
q = q || a(document).on("mousedown mouseup", function (b) {
var e = a(b.target);
if ("mousedown" == b.type && e.data("drag")) {
var o = e.position(),
m = b.pageX - o.left,
g = b.pageY - o.top,
p = !0;
q.on("mousemove.drag",
function (a) {
var b = a.pageX - m,
a = a.pageY - g,
k = {};
c.x && (k.left = b);
c.y && (k.top = a);
p && (e.trigger("dragStart"), p = !1);
c.drag && e.css(k);
e.trigger("drag", [a, b]);
l = e
});
b.preventDefault()
} else try {
l && l.trigger("dragEnd")
} finally {
q.off("mousemove.drag"), l = null
}
});
return this.data("drag", !0)
};
a.expr[":"].range = function (c) {
var b = c.getAttribute("type");
return b && "range" == b || !!a(c).filter("input").data("rangeinput")
};
a.fn.rangeinput = function (c) {
if (this.data("rangeinput")) return this;
var c = a.extend(!0, {}, u.conf, c),
b;
this.each(function () {
var e = new A(a(this), a.extend(!0, {}, c)),
e = e.getInput().data("rangeinput", e);
b = b ? b.add(e) : e
});
return b ? b : this
}
})(jQuery);
(function (d) {
function p(f, b) {
var c = d(b);
return 2 > c.length ? c : f.parent().find(b)
}
function u(f, b) {
var c = this,
n = f.add(c),
g = f.children(),
l = 0,
j = b.vertical;
k || (k = c);
1 < g.length && (g = d(b.items, f));
1 < b.size && (b.circular = !1);
d.extend(c, {
getConf: function () {
return b
},
getIndex: function () {
return l
},
getSize: function () {
return c.getItems().size()
},
getNaviButtons: function () {
return h.add(m)
},
getRoot: function () {
return f
},
getItemWrap: function () {
return g
},
getItems: function () {
return g.find(b.item).not("." + b.clonedClass)
},
move: function (a, b) {
return c.seekTo(l + a, b)
},
next: function (a) {
return c.move(b.size, a)
},
prev: function (a) {
return c.move(-b.size, a)
},
begin: function (a) {
return c.seekTo(0, a)
},
end: function (a) {
return c.seekTo(c.getSize() - 1, a)
},
focus: function () {
return k = c
},
addItem: function (a) {
a = d(a);
if (b.circular) {
g.children().last().before(a);
g.children().first().replaceWith(a.clone().addClass(b.clonedClass))
} else {
g.append(a);
m.removeClass("disabled")
}
n.trigger("onAddItem", [a]);
return c
},
seekTo: function (a, e, f) {
a.jquery || (a = a * 1);
if (b.circular && a === 0 && l == -1 && e !== 0 || !b.circular && a < 0 || a > c.getSize() || a < -1) return c;
var i = a;
a.jquery ? a = c.getItems().index(a) : i = c.getItems().eq(a);
var h = d.Event("onBeforeSeek");
if (!f) {
n.trigger(h, [a, e]);
if (h.isDefaultPrevented() || !i.length) return c
}
i = j ? {
top: -i.position().top
} : {
left: -i.position().left
};
l = a;
k = c;
if (e === void 0) e = b.speed;
g.animate(i, e, b.easing, f || function () {
n.trigger("onSeek", [a])
});
return c
}
});
d.each(["onBeforeSeek", "onSeek", "onAddItem"], function (a, e) {
if (d.isFunction(b[e])) d(c).on(e,
b[e]);
c[e] = function (a) {
if (a) d(c).on(e, a);
return c
}
});
if (b.circular) {
var q = c.getItems().slice(-1).clone().prependTo(g),
r = c.getItems().slice(1,4).clone().appendTo(g);
q.add(r).addClass(b.clonedClass);
c.onBeforeSeek(function (a, b, d) {
if (!a.isDefaultPrevented()) {
if (b == -1) {
c.seekTo(q, d, function () {
c.end(0)
});
return a.preventDefault()
}
b == c.getSize() && c.seekTo(r, d, function () {
c.begin(0)
})
}
});
var o = f.parents().add(f).filter(function () {
if (d(this).css("display") === "none") return true
});
o.length ? (o.show(), c.seekTo(0, 0,
function () {
}), o.hide()) : c.seekTo(0, 0, function () {
})
}
var h = p(f, b.prev).click(function (a) {
a.stopPropagation();
c.prev()
}),
m = p(f, b.next).click(function (a) {
a.stopPropagation();
c.next()
});
b.circular || (c.onBeforeSeek(function (a, e) {
setTimeout(function () {
if (!a.isDefaultPrevented()) {
h.toggleClass(b.disabledClass, e <= 0);
m.toggleClass(b.disabledClass, e >= c.getSize() - 1)
}
}, 1)
}), b.initialIndex || h.addClass(b.disabledClass));
2 > c.getSize() && h.add(m).addClass(b.disabledClass);
b.mousewheel && d.fn.mousewheel && f.mousewheel(function (a, e) {
if (b.mousewheel) {
c.move(e < 0 ? 1 : -1, b.wheelSpeed || 50);
return false
}
});
if (b.touch) {
var s, t;
g[0].ontouchstart = function (a) {
a = a.touches[0];
s = a.clientX;
t = a.clientY
};
g[0].ontouchmove = function (a) {
if (a.touches.length == 1 && !g.is(":animated")) {
var b = a.touches[0],
d = s - b.clientX,
b = t - b.clientY;
c[j && b > 0 || !j && d > 0 ? "next" : "prev"]();
a.preventDefault()
}
}
}
if (b.keyboard) d(document).on("keydown.scrollable", function (a) {
if (b.keyboard && !a.altKey && !a.ctrlKey && !a.metaKey && !d(a.target).is(":input") && !(b.keyboard != "static" && k != c)) {
var e = a.keyCode;
if (j && (e == 38 || e == 40)) {
c.move(e == 38 ? -1 : 1);
return a.preventDefault()
}
if (!j && (e == 37 || e == 39)) {
c.move(e == 37 ? -1 : 1);
return a.preventDefault()
}
}
});
b.initialIndex && c.seekTo(b.initialIndex, 0, function () {
})
}
d.tools = d.tools || {
version: "@VERSION"
};
d.tools.scrollable = {
conf: {
activeClass: "active",
circular: !1,
clonedClass: "cloned",
disabledClass: "disabled",
easing: "swing",
initialIndex: 0,
item: "> *",
items: ".items",
keyboard: !0,
mousewheel: !1,
next: ".next",
prev: ".prev",
size: 1,
speed: 400,
vertical: !1,
touch: !0,
wheelSpeed: 0
}
};
var k;
d.fn.scrollable = function (f) {
var b = this.data("scrollable");
if (b) return b;
f = d.extend({}, d.tools.scrollable.conf, f);
this.each(function () {
b = new u(d(this), f);
d(this).data("scrollable", b)
});
return f.api ? b : this
}
})(jQuery);
(function (d) {
var h = d.tools.scrollable;
h.autoscroll = {
conf: {
autoplay: !0,
interval: 3E3,
autopause: !0
}
};
d.fn.autoscroll = function (b) {
"number" == typeof b && (b = {
interval: b
});
var e = d.extend({}, h.autoscroll.conf, b),
i;
this.each(function () {
function b() {
c && clearTimeout(c);
c = setTimeout(function () {
a.next()
}, e.interval)
}
var a = d(this).data("scrollable"),
f = a.getRoot(),
c, g = !1;
a && (i = a);
a.play = function () {
c || (g = !1, f.on("onSeek", b), b())
};
a.pause = function () {
c = clearTimeout(c);
f.off("onSeek", b)
};
a.resume = function () {
g || a.play()
};
a.stop = function () {
g = !0;
a.pause()
};
e.autopause && f.add(a.getNaviButtons()).hover(a.pause, a.resume);
e.autoplay && a.play()
});
return e.api ? i : this
}
})(jQuery);
(function (b) {
function m(a, f) {
var d = b(f);
return 2 > d.length ? d : a.parent().find(f)
}
var g = b.tools.scrollable;
g.navigator = {
conf: {
navi: ".navi",
naviItem: null,
activeClass: "active",
indexed: !1,
idPrefix: null,
history: !1
}
};
b.fn.navigator = function (a) {
"string" == typeof a && (a = {
navi: a
});
var a = b.extend({}, g.navigator.conf, a),
f;
this.each(function () {
function d() {
return i.find(a.naviItem || "> *")
}
function g(h) {
var e = b("<" + (a.naviItem || "a") + "/>").click(function (a) {
b(this);
c.seekTo(h);
a.preventDefault();
j && history.pushState({
i: h
}, "")
});
0 === h && e.addClass(k);
a.indexed && e.text(h + 1);
a.idPrefix && e.attr("id", a.idPrefix + h);
return e.appendTo(i)
}
var c = b(this).data("scrollable"),
i = a.navi.jquery ? a.navi : m(c.getRoot(), a.navi),
n = c.getNaviButtons(),
k = a.activeClass,
j = a.history && !!history.pushState,
l = c.getConf().size;
c && (f = c);
c.getNaviButtons = function () {
return n.add(i)
};
j && (history.pushState({
i: 0
}, ""), b(window).on("popstate", function (a) {
(a = a.originalEvent.state) && c.seekTo(a.i)
}));
d().length ? d().each(function (a) {
b(this).click(function (e) {
b(this);
c.seekTo(a);
e.preventDefault();
j && history.pushState({
i: a
}, "")
})
}) : b.each(c.getItems(), function (a) {
a % l == 0 && g(a)
});
c.onBeforeSeek(function (a, c) {
setTimeout(function () {
if (!a.isDefaultPrevented()) {
var b = c / l;
d().eq(b).length && d().removeClass(k).eq(b).addClass(k)
}
}, 1)
});
c.onAddItem(function (a, b) {
var d = c.getItems().index(b);
d % l == 0 && g(d)
})
});
return a.api ? f : this
}
})(jQuery);
(function (d) {
function n(c, a, b) {
var e = this,
l = c.add(this),
g = c.find(b.tabs),
f = a.jquery ? a : c.children(a),
i;
g.length || (g = c.children());
f.length || (f = c.parent().find(a));
f.length || (f = d(a));
d.extend(this, {
click: function (a, h) {
var f = g.eq(a),
j = !c.data("tabs");
"string" == typeof a && a.replace("#", "") && (f = g.filter('[href*="' + a.replace("#", "") + '"]'), a = Math.max(g.index(f), 0));
if (b.rotate) {
var k = g.length - 1;
if (0 > a) return e.click(k, h);
if (a > k) return e.click(0, h)
}
if (!f.length) {
if (0 <= i) return e;
a = b.initialIndex;
f = g.eq(a)
}
if (a === i) return e;
h = h || d.Event();
h.type = "onBeforeClick";
l.trigger(h, [a]);
if (!h.isDefaultPrevented()) return m[j ? b.initialEffect && b.effect || "default" : b.effect].call(e, a, function () {
i = a;
h.type = "onClick";
l.trigger(h, [a])
}), g.removeClass(b.current), f.addClass(b.current), e
},
getConf: function () {
return b
},
getTabs: function () {
return g
},
getPanes: function () {
return f
},
getCurrentPane: function () {
return f.eq(i)
},
getCurrentTab: function () {
return g.eq(i)
},
getIndex: function () {
return i
},
next: function () {
return e.click(i + 1)
},
prev: function () {
return e.click(i - 1)
},
destroy: function () {
g.off(b.event).removeClass(b.current);
f.find('a[href^="#"]').off("click.T");
return e
}
});
d.each(["onBeforeClick", "onClick"], function (a, c) {
if (d.isFunction(b[c])) d(e).on(c, b[c]);
e[c] = function (a) {
if (a) d(e).on(c, a);
return e
}
});
b.history && d.fn.history && (d.tools.history.init(g), b.event = "history");
g.each(function (a) {
d(this).on(b.event, function (b) {
e.click(a, b);
return b.preventDefault()
})
});
f.find('a[href^="#"]').on("click.T", function (a) {
e.click(d(this).attr("href"), a)
});
location.hash && "a" == b.tabs && c.find('[href="' + location.hash + '"]').length ? e.click(location.hash) : (0 === b.initialIndex || 0 < b.initialIndex) && e.click(b.initialIndex)
}
d.tools = d.tools || {
version: "@VERSION"
};
d.tools.tabs = {
conf: {
tabs: "a",
current: "current",
onBeforeClick: null,
onClick: null,
effect: "default",
initialEffect: !1,
initialIndex: 0,
event: "click",
rotate: !1,
slideUpSpeed: 400,
slideDownSpeed: 400,
history: !1
},
addEffect: function (c, a) {
m[c] = a
}
};
var m = {
"default": function (c, a) {
this.getPanes().hide().eq(c).show();
a.call()
},
fade: function (c, a) {
var b = this.getConf(),
e = b.fadeOutSpeed,
d = this.getPanes();
e ? d.fadeOut(e) : d.hide();
d.eq(c).fadeIn(b.fadeInSpeed, a)
},
slide: function (c, a) {
var b = this.getConf();
this.getPanes().slideUp(b.slideUpSpeed);
this.getPanes().eq(c).slideDown(b.slideDownSpeed, a)
},
ajax: function (c, a) {
this.getPanes().eq(0).load(this.getTabs().eq(c).attr("href"), a)
}
}, j, k;
d.tools.tabs.addEffect("horizontal", function (c, a) {
if (!j) {
var b = this.getPanes().eq(c),
e = this.getCurrentPane();
k || (k = this.getPanes().eq(0).width());
j = !0;
b.show();
e.animate({
width: 0
}, {
step: function (a) {
b.css("width", k - a)
},
complete: function () {
d(this).hide();
a.call();
j = !1
}
});
e.length || (a.call(), j = !1)
}
});
d.fn.tabs = function (c, a) {
var b = this.data("tabs");
b && (b.destroy(), this.removeData("tabs"));
d.isFunction(a) && (a = {
onBeforeClick: a
});
a = d.extend({}, d.tools.tabs.conf, a);
this.each(function () {
b = new n(d(this), c, a);
d(this).data("tabs", b)
});
return a.api ? b : this
}
})(jQuery);
(function (d) {
function n(c, a) {
function h(a) {
var b = d(a);
return 2 > b.length ? b : c.parent().find(a)
}
function i() {
g = setTimeout(function () {
e.next()
}, a.interval)
}
var b = this,
f = c.add(this),
e = c.data("tabs"),
g, j = !0,
m = h(a.next).click(function () {
e.next()
}),
k = h(a.prev).click(function () {
e.prev()
});
d.extend(b, {
getTabs: function () {
return e
},
getConf: function () {
return a
},
play: function () {
if (g) return b;
var a = d.Event("onBeforePlay");
f.trigger(a);
if (a.isDefaultPrevented()) return b;
j = !1;
f.trigger("onPlay");
f.on("onClick", i);
i();
return b
},
pause: function () {
if (!g) return b;
var a = d.Event("onBeforePause");
f.trigger(a);
if (a.isDefaultPrevented()) return b;
g = clearTimeout(g);
f.trigger("onPause");
f.off("onClick", i);
return b
},
resume: function () {
j || b.play()
},
stop: function () {
b.pause();
j = !0
}
});
d.each(["onBeforePlay", "onPlay", "onBeforePause", "onPause"], function (e, c) {
if (d.isFunction(a[c])) d(b).on(c, a[c]);
b[c] = function (a) {
return d(b).on(c, a)
}
});
a.autopause && e.getTabs().add(m).add(k).add(e.getPanes()).hover(b.pause, b.resume);
a.autoplay && b.play();
a.clickable && e.getPanes().click(function () {
e.next()
});
if (!e.getConf().rotate) {
var l = a.disabledClass;
e.getIndex() || k.addClass(l);
e.onBeforeClick(function (a, b) {
k.toggleClass(l, !b);
m.toggleClass(l, b == e.getTabs().length - 1)
})
}
}
var h;
h = d.tools.tabs.slideshow = {
conf: {
next: ".forward",
prev: ".backward",
disabledClass: "disabled",
autoplay: !1,
autopause: !0,
interval: 3E3,
clickable: !0,
api: !1
}
};
d.fn.slideshow = function (c) {
var a = this.data("slideshow");
if (a) return a;
c = d.extend({}, h.conf, c);
this.each(function () {
a = new n(d(this), c);
d(this).data("slideshow", a)
});
return c.api ? a : this
}
})(jQuery);
(function (b) {
function j() {
if (b.browser.msie) {
var a = b(document).height(),
c = b(window).height();
return [window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, 20 > a - c ? c : a]
}
return [b(document).width(), b(document).height()]
}
function g(a) {
if (a) return a.call(b.mask)
}
b.tools = b.tools || {
version: "@VERSION"
};
var k;
k = b.tools.expose = {
conf: {
maskId: "exposeMask",
loadSpeed: "slow",
closeSpeed: "fast",
closeOnClick: !0,
closeOnEsc: !0,
zIndex: 9998,
opacity: 0.8,
startOpacity: 0,
color: "#fff",
onLoad: null,
onClose: null
}
};
var c, h, d, e, i;
b.mask = {
load: function (a, f) {
if (d) return this;
"string" == typeof a && (a = {
color: a
});
a = a || e;
e = a = b.extend(b.extend({}, k.conf), a);
c = b("#" + a.maskId);
c.length || (c = b("<div/>").attr("id", a.maskId), b("body").append(c));
var l = j();
c.css({
position: "absolute",
top: 0,
left: 0,
width: l[0],
height: l[1],
display: "none",
opacity: a.startOpacity,
zIndex: a.zIndex
});
a.color && c.css("backgroundColor", a.color);
if (!1 === g(a.onBeforeLoad)) return this;
if (a.closeOnEsc) b(document).on("keydown.mask", function (a) {
a.keyCode == 27 && b.mask.close(a)
});
if (a.closeOnClick) c.on("click.mask", function (a) {
b.mask.close(a)
});
b(window).on("resize.mask", function () {
b.mask.fit()
});
f && f.length && (i = f.eq(0).css("zIndex"), b.each(f, function () {
var a = b(this);
/relative|absolute|fixed/i.test(a.css("position")) || a.css("position", "relative")
}), h = f.css({
zIndex: Math.max(a.zIndex + 1, "auto" == i ? 0 : i)
}));
c.css({
display: "block"
}).fadeTo(a.loadSpeed, a.opacity, function () {
b.mask.fit();
g(a.onLoad);
d = "full"
});
d = !0;
return this
},
close: function () {
if (d) {
if (!1 === g(e.onBeforeClose)) return this;
c.fadeOut(e.closeSpeed, function () {
g(e.onClose);
h && h.css({
zIndex: i
});
d = !1
});
b(document).off("keydown.mask");
c.off("click.mask");
b(window).off("resize.mask")
}
return this
},
fit: function () {
if (d) {
var a = j();
c.css({
width: a[0],
height: a[1]
})
}
},
getMask: function () {
return c
},
isLoaded: function (a) {
return a ? "full" == d : d
},
getConf: function () {
return e
},
getExposed: function () {
return h
}
};
b.fn.mask = function (a) {
b.mask.load(a);
return this
};
b.fn.expose = function (a) {
b.mask.load(a, this);
return this
}
})(jQuery);
(function () {
function h(a, b) {
if (b) for (var c in b) b.hasOwnProperty(c) && (a[c] = b[c]);
return a
}
function k(a, b) {
var c = [],
d;
for (d in a) a.hasOwnProperty(d) && (c[d] = b(a[d]));
return c
}
function l(a, b, c) {
if (e.isSupported(b.version)) a.innerHTML = e.getHTML(b, c);
else if (b.expressInstall && e.isSupported([6, 65])) a.innerHTML = e.getHTML(h(b, {
src: b.expressInstall
}), {
MMredirectURL: location.href,
MMplayerType: "PlugIn",
MMdoctitle: document.title
});
else if (a.innerHTML.replace(/\s/g, "") || (a.innerHTML = "<h2>Flash version " + b.version + " or greater is required</h2><h3>" + (0 < f[0] ? "Your version is " + f : "You have no flash plugin installed") + "</h3>" + ("A" == a.tagName ? "<p>Click here to download latest version</p>" : "<p>Download latest version from <a href='" + j + "'>here</a></p>"), "A" == a.tagName && (a.onclick = function () {
location.href = j
})), b.onFail) {
var d = b.onFail.call(this);
"string" == typeof d && (a.innerHTML = d)
}
i && (window[b.id] = document.getElementById(b.id));
h(this, {
getRoot: function () {
return a
},
getOptions: function () {
return b
},
getConf: function () {
return c
},
getApi: function () {
return a.firstChild
}
})
}
var i = document.all,
j = "http://www.adobe.com/go/getflashplayer",
m = "function" == typeof jQuery,
n = /(\d+)[^\d]+(\d+)[^\d]*(\d*)/,
g = {
width: "100%",
height: "100%",
id: "_" + ("" + Math.random()).slice(9),
allowfullscreen: !0,
allowscriptaccess: "always",
quality: "high",
version: [3, 0],
onFail: null,
expressInstall: null,
w3c: !1,
cachebusting: !1
};
window.attachEvent && window.attachEvent("onbeforeunload", function () {
__flash_unloadHandler = function () {
};
__flash_savedUnloadHandler = function () {
}
});
window.flashembed = function (a, b, c) {
"string" == typeof a && (a = document.getElementById(a.replace("#", "")));
if (a) return "string" == typeof b && (b = {
src: b
}), new l(a, h(h({}, g), b), c)
};
var e = h(window.flashembed, {
conf: g,
getVersion: function () {
var a, b;
try {
b = navigator.plugins["Shockwave Flash"].description.slice(16)
} catch (c) {
try {
b = (a = new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")) && a.GetVariable("$version")
} catch (d) {
try {
b = (a = new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6")) && a.GetVariable("$version")
} catch (e) {
}
}
}
return (b = n.exec(b)) ? [b[1], b[3]] : [0, 0]
},
asString: function (a) {
if (null === a || void 0 === a) return null;
var b = typeof a;
"object" == b && a.push && (b = "array");
switch (b) {
case "string":
return a = a.replace(RegExp('(["\\\\])', "g"), "\\$1"), a = a.replace(/^\s?(\d+\.?\d*)%/, "$1pct"), '"' + a + '"';
case "array":
return "[" + k(a,function (a) {
return e.asString(a)
}).join(",") + "]";
case "function":
return '"function()"';
case "object":
var b = [],
c;
for (c in a) a.hasOwnProperty(c) && b.push('"' + c + '":' + e.asString(a[c]));
return "{" + b.join(",") + "}"
}
return ("" + a).replace(/\s/g, " ").replace(/\'/g, '"')
},
getHTML: function (a, b) {
var a = h({}, a),
c = '<object width="' + a.width + '" height="' + a.height + '" id="' + a.id + '" name="' + a.id + '"';
a.cachebusting && (a.src += (-1 != a.src.indexOf("?") ? "&" : "?") + Math.random());
c = a.w3c || !i ? c + (' data="' + a.src + '" type="application/x-shockwave-flash"') : c + ' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"';
c += ">";
if (a.w3c || i) c += '<param name="movie" value="' + a.src + '" />';
a.width = a.height = a.id = a.w3c = a.src = null;
a.onFail = a.version = a.expressInstall = null;
for (var d in a) a[d] && (c += '<param name="' + d + '" value="' + a[d] + '" />');
d = "";
if (b) {
for (var f in b) if (b[f]) {
var g = b[f];
d += f + "=" + encodeURIComponent(/function|object/.test(typeof g) ? e.asString(g) : g) + "&"
}
d = d.slice(0, -1);
c += '<param name="flashvars" value=\'' + d + "' />"
}
return c + "</object>"
},
isSupported: function (a) {
return f[0] > a[0] || f[0] == a[0] && f[1] >= a[1]
}
}),
f = e.getVersion();
m && (jQuery.tools = jQuery.tools || {
version: "@VERSION"
}, jQuery.tools.flashembed = {
conf: g
}, jQuery.fn.flashembed = function (a, b) {
return this.each(function () {
jQuery(this).data("flashembed",
flashembed(this, a, b))
})
})
})();
(function (a) {
function g(a) {
if (a) {
var b = d.contentWindow.document;
b.open().close();
b.location.hash = a
}
}
var f, d, e, h;
a.tools = a.tools || {
version: "@VERSION"
};
a.tools.history = {
init: function (c) {
h || (a.browser.msie && "8" > a.browser.version ? d || (d = a("<iframe/>").attr("src", "javascript:false;").hide().get(0), a("body").append(d), setInterval(function () {
var b = d.contentWindow.document.location.hash;
f !== b && a(window).trigger("hash", b)
}, 100), g(location.hash || "#")) : setInterval(function () {
var b = location.hash;
b !== f && a(window).trigger("hash",
b)
}, 100), e = !e ? c : e.add(c), c.click(function (b) {
var c = a(this).attr("href");
d && g(c);
if (c.slice(0, 1) != "#") {
location.href = "#" + c;
return b.preventDefault()
}
}), h = !0)
}
};
a(window).on("hash", function (c, b) {
b ? e.filter(function () {
var c = a(this).attr("href");
return c == b || c == b.replace("#", "")
}).trigger("history", [b]) : e.eq(0).trigger("history", [b]);
f = b
});
a.fn.history = function (c) {
a.tools.history.init(this);
return this.on("history", c)
}
})(jQuery);
(function (b) {
function c(a) {
switch (a.type) {
case "mousemove":
return b.extend(a.data, {
clientX: a.clientX,
clientY: a.clientY,
pageX: a.pageX,
pageY: a.pageY
});
case "DOMMouseScroll":
b.extend(a, a.data);
a.delta = -a.detail / 3;
break;
case "mousewheel":
a.delta = a.wheelDelta / 120
}
a.type = "wheel";
return b.event.handle.call(this, a, a.delta)
}
b.fn.mousewheel = function (a) {
return this[a ? "on" : "trigger"]("wheel", a)
};
b.event.special.wheel = {
setup: function () {
b.event.add(this, d, c, {})
},
teardown: function () {
b.event.remove(this, d, c)
}
};
var d = !b.browser.mozilla ? "mousewheel" : "DOMMouseScroll" + ("1.9" > b.browser.version ? " mousemove" : "")
})(jQuery);
(function (e) {
function p(a, b, d) {
var f = d.relative ? a.position().top : a.offset().top,
c = d.relative ? a.position().left : a.offset().left,
h = d.position[0],
f = f - (b.outerHeight() - d.offset[0]),
c = c + (a.outerWidth() + d.offset[1]);
var i = b.outerHeight() + a.outerHeight();
"center" == h && (f += i / 2);
"bottom" == h && (f += i);
h = d.position[1];
a = b.outerWidth() + a.outerWidth();
"center" == h && (c -= a / 2);
"left" == h && (c -= a);
return {
top: f,
left: c
}
}
function n(a, b) {
var d = this,
f = a.add(d),
c,
h = 0,
i = 0,
m = a.attr("title"),
q = a.attr("data-tooltip"),
r = o[b.effect],
l, s = a.is(":input"),
n = s && a.is(":checkbox, :radio, select, :button, :submit"),
t = a.attr("type"),
j = b.events[t] || b.events[s ? n ? "widget" : "input" : "def"];
if (!r) throw 'Nonexistent effect "' + b.effect + '"';
j = j.split(/,\s*/);
if (2 != j.length) throw "Tooltip: bad events configuration for " + t;
a.on(j[0],function (a) {
clearTimeout(h);
b.predelay ? i = setTimeout(function () {
d.show(a)
}, b.predelay) : d.show(a)
}).on(j[1], function (a) {
clearTimeout(i);
b.delay ? h = setTimeout(function () {
d.hide(a)
},
b.delay) : d.hide(a)
});
m && b.cancelDefault && (a.removeAttr("title"), a.data("title", m));
e.extend(d, {
show: function (k) {
if (!c) {
if (q) c = e(q);
else if (b.tip) c = e(b.tip).eq(0);
else if (m) c = e(b.layout).addClass(b.tipClass).appendTo(document.body).hide().append(m);
else {
c = a.next();
c.length || (c = a.parent().next())
}
if (!c.length) throw "Cannot find tooltip for " + a;
}
if (d.isShown()) return d;
c.stop(true, true);
var g = p(a, c, b);
b.tip && c.html(a.data("title"));
k = e.Event();
k.type = "onBeforeShow";
f.trigger(k, [g]);
if (k.isDefaultPrevented()) return d;
g = p(a, c, b);
c.css({
position: "absolute",
top: g.top,
left: g.left
});
l = true;
r[0].call(d, function () {
k.type = "onShow";
l = "full";
f.trigger(k)
});
g = b.events.tooltip.split(/,\s*/);
if (!c.data("__set")) {
c.off(g[0]).on(g[0], function () {
clearTimeout(h);
clearTimeout(i)
});
if (g[1] && !a.is("input:not(:checkbox, :radio), textarea")) c.off(g[1]).on(g[1], function (b) {
b.relatedTarget != a[0] && a.trigger(j[1].split(" ")[0])
});
b.tip || c.data("__set", true)
}
return d
},
hide: function (a) {
if (!c || !d.isShown()) return d;
a = e.Event();
a.type = "onBeforeHide";
f.trigger(a);
if (!a.isDefaultPrevented()) {
l = false;
o[b.effect][1].call(d, function () {
a.type = "onHide";
f.trigger(a)
});
return d
}
},
isShown: function (a) {
return a ? l == "full" : l
},
getConf: function () {
return b
},
getTip: function () {
return c
},
getTrigger: function () {
return a
}
});
e.each(["onHide", "onBeforeShow", "onShow", "onBeforeHide"], function (a, c) {
if (e.isFunction(b[c])) e(d).on(c, b[c]);
d[c] = function (a) {
if (a) e(d).on(c, a);
return d
}
})
}
e.tools = e.tools || {
version: "@VERSION"
};
e.tools.tooltip = {
conf: {
effect: "toggle",
fadeOutSpeed: "fast",
predelay: 0,
delay: 30,
opacity: 1,
tip: 0,
fadeIE: !1,
position: ["top", "center"],
offset: [0, 0],
relative: !1,
cancelDefault: !0,
events: {
def: "mouseenter,mouseleave",
input: "focus,blur",
widget: "focus mouseenter,blur mouseleave",
tooltip: "mouseenter,mouseleave"
},
layout: "<div/>",
tipClass: "tooltip"
},
addEffect: function (a, b, d) {
o[a] = [b, d]
}
};
var o = {
toggle: [function (a) {
var b = this.getConf(),
d = this.getTip(),
b = b.opacity;
1 > b && d.css({
opacity: b
});
d.show();
a.call()
}, function (a) {
this.getTip().hide();
a.call()
}],
fade: [function (a) {
var b = this.getConf();
!e.browser.msie || b.fadeIE ? this.getTip().fadeTo(b.fadeInSpeed, b.opacity, a) : (this.getTip().show(), a())
}, function (a) {
var b = this.getConf();
!e.browser.msie || b.fadeIE ? this.getTip().fadeOut(b.fadeOutSpeed, a) : (this.getTip().hide(), a())
}]
};
e.fn.tooltip = function (a) {
var b = this.data("tooltip");
if (b) return b;
a = e.extend(!0, {}, e.tools.tooltip.conf, a);
"string" == typeof a.position && (a.position = a.position.split(/,?\s/));
this.each(function () {
b = new n(e(this), a);
e(this).data("tooltip", b)
});
return a.api ? b : this
}
})(jQuery);
(function (c) {
var i = c.tools.tooltip;
i.dynamic = {
conf: {
classNames: "top right bottom left"
}
};
c.fn.dynamic = function (f) {
"number" == typeof f && (f = {
speed: f
});
var f = c.extend({}, i.dynamic.conf, f),
l = c.extend(!0, {}, f),
j = f.classNames.split(/\s/),
e;
this.each(function () {
var h = c(this).tooltip().onBeforeShow(function (f, h) {
var d = this.getTip(),
a = this.getConf();
e || (e = [a.position[0], a.position[1], a.offset[0], a.offset[1], c.extend({}, a)]);
c.extend(a, e[4]);
a.position = [e[0], e[1]];
a.offset = [e[2], e[3]];
d.css({
visibility: "hidden",
position: "absolute",
top: h.top,
left: h.left
}).show();
var k = c.extend(!0, {}, l),
b;
b = c(window);
var g = b.width() + b.scrollLeft(),
i = b.height() + b.scrollTop();
b = [d.offset().top <= b.scrollTop(), g <= d.offset().left + d.width(), i <= d.offset().top + d.height(), b.scrollLeft() >= d.offset().left];
a: {
for (g = b.length; g--;) if (b[g]) {
g = !1;
break a
}
g = !0
}
if (!g) {
b[2] && (c.extend(a, k.top), a.position[0] = "top", d.addClass(j[0]));
b[3] && (c.extend(a, k.right), a.position[1] = "right", d.addClass(j[1]));
b[0] && (c.extend(a, k.bottom), a.position[0] = "bottom",
d.addClass(j[2]));
b[1] && (c.extend(a, k.left), a.position[1] = "left", d.addClass(j[3]));
if (b[0] || b[2]) a.offset[0] *= -1;
if (b[1] || b[3]) a.offset[1] *= -1
}
d.css({
visibility: "visible"
}).hide()
});
h.onBeforeShow(function () {
var c = this.getConf();
this.getTip();
setTimeout(function () {
c.position = [e[0], e[1]];
c.offset = [e[2], e[3]]
}, 0)
});
h.onHide(function () {
this.getTip().removeClass(f.classNames)
});
ret = h
});
return f.api ? ret : this
}
})(jQuery);
(function (b) {
var e = b.tools.tooltip;
b.extend(e.conf, {
direction: "up",
bounce: !1,
slideOffset: 10,
slideInSpeed: 200,
slideOutSpeed: 200,
slideFade: !b.browser.msie
});
var f = {
up: ["-", "top"],
down: ["+", "top"],
left: ["-", "left"],
right: ["+", "left"]
};
e.addEffect("slide", function (b) {
var a = this.getConf(),
g = this.getTip(),
c = a.slideFade ? {
opacity: a.opacity
} : {}, d = f[a.direction] || f.up;
c[d[1]] = d[0] + "=" + a.slideOffset;
a.slideFade && g.css({
opacity: 0
});
g.show().animate(c, a.slideInSpeed, b)
}, function (e) {
var a = this.getConf(),
g = a.slideOffset,
c = a.slideFade ? {
opacity: 0
} : {}, d = f[a.direction] || f.up,
h = "" + d[0];
a.bounce && (h = "+" == h ? "-" : "+");
c[d[1]] = h + "=" + g;
this.getTip().animate(c, a.slideOutSpeed, function () {
b(this).hide();
e.call()
})
})
})(jQuery);
(function (c) {
function i(b, a, f) {
var a = c(a).first() || a,
d = b.offset().top,
e = b.offset().left,
g = f.position.split(/,?\s+/),
j = g[0],
g = g[1],
d = d - (a.outerHeight() - f.offset[0]),
e = e + (b.outerWidth() + f.offset[1]);
f = a.outerHeight() + b.outerHeight();
"center" == j && (d += f / 2);
"bottom" == j && (d += f);
b = b.outerWidth();
"center" == g && (e -= (b + a.outerWidth()) / 2);
"left" == g && (e -= b);
return {
top: d,
left: e
}
}
function q(b) {
function a() {
return this.getAttribute("type") == b
}
a.key = '[type="' + b + '"]';
return a
}
function n(b, a, f) {
function p(a, b, e) {
if (f.grouped || !a.length) {
var g;
!1 === e || c.isArray(e) ? (g = d.messages[b.key || b] || d.messages["*"], g = g[f.lang] || d.messages["*"].en, (b = g.match(/\$\d/g)) && c.isArray(e) && c.each(b, function (a) {
g = g.replace(this, e[a])
})) : g = e[f.lang] || e;
a.push(g)
}
}
var e = this,
g = a.add(e),
b = b.not(":button, :image, :reset, :submit");
a.attr("novalidate", "novalidate");
c.extend(e, {
getConf: function () {
return f
},
getForm: function () {
return a
},
getInputs: function () {
return b
},
reflow: function () {
b.each(function () {
var a = c(this),
b = a.data("msg.el");
b && (a = i(a, b, f), b.css({
top: a.top,
left: a.left
}))
});
return e
},
invalidate: function (a, h) {
if (!h) {
var d = [];
c.each(a, function (a, f) {
var c = b.filter("[name='" + a + "']");
c.length && (c.trigger("OI", [f]), d.push({
input: c,
messages: [f]
}))
});
a = d;
h = c.Event()
}
h.type = "onFail";
g.trigger(h, [a]);
h.isDefaultPrevented() || l[f.effect][0].call(e, a, h);
return e
},
reset: function (a) {
a = a || b;
a.removeClass(f.errorClass).each(function () {
var a = c(this).data("msg.el");
a && (a.remove(), c(this).data("msg.el", null))
}).off(f.errorInputEvent + ".v" || "");
return e
},
destroy: function () {
a.off(f.formEvent + ".V reset.V");
b.off(f.inputEvent + ".V change.V");
return e.reset()
},
checkValidity: function (a, h) {
var a = a || b,
a = a.not(":disabled"),
d = {}, a = a.filter(function () {
var a = c(this).attr("name");
if (!d[a]) return d[a] = !0, c(this)
});
if (!a.length) return !0;
h = h || c.Event();
h.type = "onBeforeValidate";
g.trigger(h, [a]);
if (h.isDefaultPrevented()) return h.result;
var k = [];
a.each(function () {
var a = [],
b = c(this).data("messages", a),
d = m && b.is(":date") ? "onHide.v" : f.errorInputEvent + ".v";
b.off(d);
c.each(o, function () {
var c = this[0];
if (b.filter(c).length) {
var d = this[1].call(e, b, b.val());
if (!0 !== d) {
h.type = "onBeforeFail";
g.trigger(h, [b, c]);
if (h.isDefaultPrevented()) return !1;
var j = b.attr(f.messageAttr);
if (j) return a = [j], !1;
p(a, c, d)
}
}
});
if (a.length && (k.push({
input: b,
messages: a
}), b.trigger("OI", [a]), f.errorInputEvent)) b.on(d, function (a) {
e.checkValidity(b, a)
});
if (f.singleError && k.length) return !1
});
var i = l[f.effect];
if (!i) throw 'Validator: cannot find effect "' + f.effect + '"';
if (k.length) return e.invalidate(k,
h), !1;
i[1].call(e, a, h);
h.type = "onSuccess";
g.trigger(h, [a]);
a.off(f.errorInputEvent + ".v");
return !0
}
});
c.each(["onBeforeValidate", "onBeforeFail", "onFail", "onSuccess"], function (a, b) {
if (c.isFunction(f[b])) c(e).on(b, f[b]);
e[b] = function (a) {
if (a) c(e).on(b, a);
return e
}
});
if (f.formEvent) a.on(f.formEvent + ".V", function (b) {
if (!e.checkValidity(null, b)) return b.preventDefault();
b.target = a;
b.type = f.formEvent
});
a.on("reset.V", function () {
e.reset()
});
b[0] && b[0].validity && b.each(function () {
this.oninvalid = function () {
return !1
}
});
a[0] && (a[0].checkValidity = e.checkValidity);
if (f.inputEvent) b.on(f.inputEvent + ".V", function (a) {
e.checkValidity(c(this), a)
});
b.filter(":checkbox, select").filter("[required]").on("change.V", function (a) {
var b = c(this);
(this.checked || b.is("select") && c(this).val()) && l[f.effect][1].call(e, b, a)
});
b.filter(":radio[required]").on("change.V", function (a) {
var b = c("[name='" + c(a.srcElement).attr("name") + "']");
b != null && b.length != 0 && e.checkValidity(b, a)
});
c(window).resize(function () {
e.reflow()
})
}
c.tools = c.tools || {
version: "@VERSION"
};
var r = /\[type=([a-z]+)\]/,
s = /^-?[0-9]*(\.[0-9]+)?$/,
m = c.tools.dateinput,
t = /^([a-z0-9_\.\-\+]+)@([\da-z\.\-]+)\.([a-z\.]{2,6})$/i,
u = /^(https?:\/\/)?[\da-z\.\-]+\.[a-z\.]{2,6}[#&+_\?\/\w \.\-=]*$/i,
d;
d = c.tools.validator = {
conf: {
grouped: !1,
effect: "default",
errorClass: "invalid",
inputEvent: null,
errorInputEvent: "keyup",
formEvent: "submit",
lang: "en",
message: "<div/>",
messageAttr: "data-message",
messageClass: "error",
offset: [0, 0],
position: "center right",
singleError: !1,
speed: "normal"
},
messages: {
"*": {
en: "Please correct this value"
}
},
localize: function (b, a) {
c.each(a, function (a, c) {
d.messages[a] = d.messages[a] || {};
d.messages[a][b] = c
})
},
localizeFn: function (b, a) {
d.messages[b] = d.messages[b] || {};
c.extend(d.messages[b], a)
},
fn: function (b, a, f) {
c.isFunction(a) ? f = a : ("string" == typeof a && (a = {
en: a
}), this.messages[b.key || b] = a);
(a = r.exec(b)) && (b = q(a[1]));
o.push([b, f])
},
addEffect: function (b, a, f) {
l[b] = [a, f]
}
};
var o = [],
l = {
"default": [function (b) {
var a = this.getConf();
c.each(b, function (b, d) {
var e = d.input;
e.addClass(a.errorClass);
var g = e.data("msg.el");
g || (g = c(a.message).addClass(a.messageClass).appendTo(document.body), e.data("msg.el", g));
g.css({
visibility: "hidden"
}).find("p").remove();
c.each(d.messages, function (a, b) {
c("<p/>").html(b).appendTo(g)
});
g.outerWidth() == g.parent().width() && g.add(g.find("p")).css({
display: "inline"
});
e = i(e, g, a);
g.css({
visibility: "visible",
position: "absolute",
top: e.top,
left: e.left
}).fadeIn(a.speed)
})
}, function (b) {
var a = this.getConf();
b.removeClass(a.errorClass).each(function () {
var a = c(this).data("msg.el");
a && a.css({
visibility: "hidden"
})
})
}]
};
c.each(["email", "url", "number"], function (b, a) {
c.expr[":"][a] = function (b) {
return b.getAttribute("type") === a
}
});
c.fn.oninvalid = function (b) {
return this[b ? "on" : "trigger"]("OI", b)
};
d.fn(":email", "Please enter a valid email address", function (b, a) {
return !a || t.test(a)
});
d.fn(":url", "Please enter a valid URL", function (b, a) {
return !a || u.test(a)
});
d.fn(":number", "Please enter a numeric value.", function (b, a) {
return s.test(a)
});
d.fn("[max]", "Please enter a value no larger than $1", function (b, a) {
if ("" === a || m && b.is(":date")) return !0;
var c = b.attr("max");
return parseFloat(a) <= parseFloat(c) ? !0 : [c]
});
d.fn("[min]", "Please enter a value of at least $1", function (b, a) {
if ("" === a || m && b.is(":date")) return !0;
var c = b.attr("min");
return parseFloat(a) >= parseFloat(c) ? !0 : [c]
});
d.fn("[required]", "Please complete this mandatory field.", function (b, a) {
return b.is(":checkbox") ? b.is(":checked") : !!a
});
d.fn("[pattern]", function (b, a) {
return "" === a || RegExp("^" + b.attr("pattern") + "$").test(a)
});
d.fn(":radio", "Please select an option.", function (b) {
var a = !1;
c("[name='" + b.attr("name") + "']").each(function (b, d) {
c(d).is(":checked") && (a = !0)
});
return a ? !0 : !1
});
c.fn.validator = function (b) {
var a = this.data("validator");
a && (a.destroy(), this.removeData("validator"));
b = c.extend(!0, {}, d.conf, b);
if (this.is("form")) return this.each(function () {
var d = c(this);
a = new n(d.find(":input"), d, b);
d.data("validator", a)
});
a = new n(this, this.eq(0).closest("form"), b);
return this.data("validator", a)
}
})(jQuery);
(function ($) {
var toString = Object.prototype.toString;
if (!$.isArray || !$.isFunction) {
$.isArray = function (obj) {
return toString.call(obj) === "[object Array]";
};
$.isFunction = function (obj) {
return toString.call(obj) === "[object Function]";
};
}
var reEscape = new RegExp('(\\' + ['/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\'].join('|\\') + ')', 'g');
function fnFormatResult(value, data, currentValue) {
var pattern = '(' + currentValue.replace(reEscape, '\\$1') + ')';
return value.replace(new RegExp(pattern, 'gi'), '<strong>$1<\/strong>');
}
function Autocomplete(el, options) {
this.el = $(el);
this.el.attr('autocomplete', 'off');
this.suggestions = [];
this.data = [];
this.badQueries = [];
this.selectedIndex = -1;
this.currentValue = this.el.val();
if (this.currentValue) {
this.currentValue = this.currentValue.toLowerCase();
}
this.intervalId = 0;
this.cachedResponse = [];
this.onChangeInterval = null;
this.ignoreValueChange = false;
this.serviceUrl = options.serviceUrl;
this.isLocal = false;
this.options = {
autoSubmit: false,
minChars: 1,
maxHeight: 300,
deferRequestBy: 0,
width: 0,
highlight: true,
params: {},
fnFormatResult: fnFormatResult,
delimiter: null,
zIndex: 9999
};
this.initialize();
this.setOptions(options);
}
$.fn.expertAutocomplete = function (options) {
return new Autocomplete(this.get(0), options);
};
Autocomplete.prototype = {
killerFn: null,
initialize: function () {
var me, uid, autocompleteElId;
me = this;
uid = new Date().getTime() + String(Math.random()).replace('0.', '');
autocompleteElId = 'ExpertAutocomplete_' + uid;
this.killerFn = function (e) {
if ($(e.target).parents('.expertAutocomplete').size() === 0) {
me.killSuggestions();
me.disableKillerFn();
}
};
if (!this.options.width) {
this.options.width = this.el.width();
}
this.mainContainerId = 'ExpertAutocompleteContainer_' + uid;
this.appendToElem = $(this.el).attr('id') === 'storeFinderZipHeader' || $(this.el).attr('id') === 'storeFinderStoreHeader' ? this.el.parent() : 'body';
$('<div id="' + this.mainContainerId + '" style="position:absolute;z-index:9999;"><div class="expertAutocomplete-w1"><div class="expertAutocomplete" id="' + autocompleteElId + '" style="display:none;"></div></div></div>').appendTo(this.appendToElem);
this.container = $('#' + autocompleteElId);
this.fixPosition();
if (window.opera) {
this.el.keypress(function (e) {
me.onKeyPress(e);
});
} else {
this.el.keydown(function (e) {
me.onKeyPress(e);
});
}
this.el.keyup(function (e) {
me.onKeyUp(e);
});
this.el.blur(function () {
me.enableKillerFn();
});
this.el.focus(function () {
me.fixPosition();
});
},
setOptions: function (options) {
var o = this.options;
$.extend(o, options);
if (o.lookup) {
this.isLocal = true;
if ($.isArray(o.lookup)) {
o.lookup = { suggestions: o.lookup, data: [] };
}
}
$('#' + this.mainContainerId).css({ zIndex: o.zIndex });
this.container.css({ maxHeight: o.maxHeight + 'px', width: '100%' });
},
clearCache: function () {
this.cachedResponse = [];
this.badQueries = [];
},
disable: function () {
this.disabled = true;
},
enable: function () {
this.disabled = false;
},
fixPosition: function () {
var offset = this.el.offset();
if (offset == null) {
return false;
}
if ($(this.el).attr('id') === 'storeFinderZipHeader' || $(this.el).attr('id') === 'storeFinderStoreHeader') {
$('#' + this.mainContainerId).css({ top: (offset.top + this.el.innerHeight() - 30) + 'px', left: '16px' });
} else {
$('#' + this.mainContainerId).css({ top: (offset.top + this.el.innerHeight()) + 'px', left: offset.left + 'px' });
}
},
enableKillerFn: function () {
var me = this;
$(document).bind('click', me.killerFn);
},
disableKillerFn: function () {
var me = this;
$(document).unbind('click', me.killerFn);
},
killSuggestions: function () {
var me = this;
this.stopKillSuggestions();
this.intervalId = window.setInterval(function () {
me.hide();
me.stopKillSuggestions();
}, 300);
},
stopKillSuggestions: function () {
window.clearInterval(this.intervalId);
},
onKeyPress: function (e) {
if (this.disabled || !this.enabled) {
return;
}
switch (e.keyCode) {
case 27: //KEY_ESC:
this.el.val(this.currentValue);
this.hide();
break;
case 9: //KEY_TAB:
case 13: //KEY_RETURN:
if (this.selectedIndex === -1) {
this.hide();
return;
}
this.select(this.selectedIndex);
if (e.keyCode === 9/* KEY_TAB */) {
return;
}
break;
case 38: //KEY_UP:
this.moveUp();
break;
case 40: //KEY_DOWN:
this.moveDown();
break;
default:
return;
}
e.stopPropagation();
e.preventDefault();
},
onKeyUp: function (e) {
if (this.disabled) {
return;
}
switch (e.keyCode) {
case 38: //KEY_UP:
case 40: //KEY_DOWN:
return;
}
clearInterval(this.onChangeInterval);
if (this.currentValue !== this.el.val().toLowerCase()) {
if (this.options.deferRequestBy > 0) {
var me = this;
this.onChangeInterval = setInterval(function () {
me.onValueChange();
}, this.options.deferRequestBy);
} else {
this.onValueChange();
}
}
},
onValueChange: function () {
clearInterval(this.onChangeInterval);
this.currentValue = this.el.val().toLowerCase();
var q = this.getQuery(this.currentValue);
this.selectedIndex = -1;
if (this.ignoreValueChange) {
this.ignoreValueChange = false;
return;
}
if (q === '' || q.length < this.options.minChars) {
this.hide();
} else {
this.getSuggestions(q);
}
},
getQuery: function (val) {
var d, arr;
d = this.options.delimiter;
if (!d) {
return $.trim(val);
}
arr = val.split(d);
return $.trim(arr[arr.length - 1]);
},
getSuggestionsLocal: function (q) {
var ret, arr, len, val, i;
arr = this.options.lookup;
len = arr.suggestions.length;
ret = { suggestions: [], data: [] };
q = q.toLowerCase();
for (i = 0; i < len; i++) {
val = arr.suggestions[i];
if (val.toLowerCase().indexOf(q) === 0) {
ret.suggestions.push(val);
ret.data.push(arr.data[i]);
}
}
return ret;
},
getSuggestions: function (q) {
var cr, me;
cr = this.isLocal ? this.getSuggestionsLocal(q) : this.cachedResponse[q];
if (cr && $.isArray(cr.suggestions)) {
this.suggestions = cr.suggestions;
this.data = cr.data;
this.suggest();
} else if (!this.isBadQuery(q)) {
me = this;
me.options.params.query = q;
$.get(this.serviceUrl, me.options.params, function (txt) {
me.processResponse(txt);
}, 'text');
}
},
isBadQuery: function (q) {
var i = this.badQueries.length;
while (i--) {
if (q.indexOf(this.badQueries[i]) === 0) {
return true;
}
}
return false;
},
hide: function () {
this.enabled = false;
this.selectedIndex = -1;
this.container.hide();
},
suggest: function () {
if (this.suggestions.length === 0) {
this.hide();
return;
}
var me, len, div, f, v, i, s, mOver, mClick;
me = this;
len = this.suggestions.length;
f = this.options.fnFormatResult;
v = this.getQuery(this.currentValue);
mOver = function (xi) {
return function () {
me.activate(xi);
};
};
mClick = function (xi) {
return function () {
me.select(xi);
};
};
this.container.hide().empty();
for (i = 0; i < len; i++) {
s = this.suggestions[i];
div = $((me.selectedIndex === i ? '<div class="selected"' : '<div') + ' title="' + s + '">' + f(s, this.data[i], v) + '</div>');
div.mouseover(mOver(i));
div.click(mClick(i));
this.container.append(div);
}
this.enabled = true;
this.container.show();
},
processResponse: function (text) {
var response;
try {
response = eval('(' + text + ')');
} catch (err) {
return;
}
if (!$.isArray(response.data)) {
response.data = [];
}
this.cachedResponse[response.query] = response;
if (response.suggestions.length === 0) {
this.badQueries.push(response.query);
}
if (response.query === this.getQuery(this.currentValue)) {
this.suggestions = response.suggestions;
this.data = response.data;
this.suggest();
}
},
activate: function (index) {
var divs, activeItem;
divs = this.container.children();
if (this.selectedIndex !== -1 && divs.length > this.selectedIndex) {
$(divs.get(this.selectedIndex)).attr('class', '');
}
this.selectedIndex = index;
if (this.selectedIndex !== -1 && divs.length > this.selectedIndex) {
activeItem = divs.get(this.selectedIndex);
$(activeItem).attr('class', 'selected');
}
return activeItem;
},
deactivate: function (div, index) {
div.className = '';
if (this.selectedIndex === index) {
this.selectedIndex = -1;
}
},
select: function (i) {
var selectedValue, f;
selectedValue = this.suggestions[i];
if (selectedValue) {
this.el.val(selectedValue);
if (this.options.autoSubmit) {
f = this.el.parents('form');
if (f.length > 0) {
f.get(0).submit();
}
}
this.ignoreValueChange = true;
this.hide();
this.onSelect(i);
}
},
moveUp: function () {
if (this.selectedIndex === -1) {
return;
}
if (this.selectedIndex === 0) {
this.container.children().get(0).className = '';
this.selectedIndex = -1;
this.el.val(this.currentValue);
return;
}
this.adjustScroll(this.selectedIndex - 1);
},
moveDown: function () {
if (this.selectedIndex === (this.suggestions.length - 1)) {
return;
}
this.adjustScroll(this.selectedIndex + 1);
},
adjustScroll: function (i) {
var activeItem, offsetTop, upperBound, lowerBound;
activeItem = this.activate(i);
offsetTop = activeItem.offsetTop;
upperBound = this.container.scrollTop();
lowerBound = upperBound + this.options.maxHeight - 25;
if (offsetTop < upperBound) {
this.container.scrollTop(offsetTop);
} else if (offsetTop > lowerBound) {
this.container.scrollTop(offsetTop - this.options.maxHeight + 25);
}
},
onSelect: function (i) {
var me, onSelect, getValue, s, d;
me = this;
onSelect = me.options.onSelect;
getValue = function (value) {
var del, currVal, arr;
del = me.options.delimiter;
if (!del) {
return value;
}
currVal = me.currentValue;
arr = currVal.split(del);
if (arr.length === 1) {
return value;
}
return currVal.substr(0, currVal.length - arr[arr.length - 1].length) + value;
};
s = me.suggestions[i];
d = me.data[i];
me.el.val(getValue(s));
if ($.isFunction(onSelect)) {
onSelect(s, d);
}
}
};
}(jQuery));
(function ($) {
$.fn.extend({
storelocatorAutocomplete: function (options) {
var $this = $(this);
var chooseBoxWidth = options.chooseBoxWidth || 0;
var onSelectCallback = options.onSelect || function () {
};
var ac = $this.expertAutocomplete({
serviceUrl: options.suggestUrl,
minChars: 2,
width: chooseBoxWidth,
onSelect: onSelectCallback
});
var $form = $this.closest('form');
$form.submit(function (ev) {
var ser = $form.serialize();
var zip = ser.replace(/zip=([^\&\$]*)(\&|\$).*/, '$1');
if (+zip != zip) {
var autoCompletes = $('.expertAutocomplete');
for (var i = 0, len = autoCompletes.length; i < len; i++) {
var autoComplete = autoCompletes[i];
var children = $(autoComplete).find('div');
if (children.length == 1) {
var div = children[0];
if (div) {
var postCode = div.title.replace(/(\d*).*/, '$1');
var input = $('#storeFinderZipHeader, #storeFinderZip');
$(input).val(postCode);
}
}
}
}
$('label[for=storeFinderStore]').removeClass('error');
var globalErrMsg = document.getElementById('globalErrMsg');
if (globalErrMsg) {
globalErrMsg.style.display = 'none';
}
if (ev.isTrigger && $form.attr('id') == 'contactForm') {
return false;
}
var storeIdInput = document.getElementById('storeId');
var topicSelect  = document.getElementById('topic');
if ($form.attr('id') == 'contactForm' && storeIdInput && !storeIdInput.value.length
&& topicSelect && $(topicSelect.options[topicSelect.selectedIndex]).attr('data-store_question'))
{
$('label[for=storeFinderStore]').addClass('error');
if (globalErrMsg) {
globalErrMsg.style.display = 'block';
}
return false;
}
ac.ignoreValueChange = true;
ac.currentValue = '';
});
var $shadow = $('<div>')
.addClass('expertAutocomplete_shadow')
.hide()
.appendTo($('#' + ac.mainContainerId));
ac._suggest = ac.suggest;
ac.suggest = function () {
ac._suggest();
if (this.suggestions.length === 0) {
$shadow.hide();
return;
}
$shadow
.width(ac.container.outerWidth())
.height(ac.container.outerHeight())
.show();
};
ac._hide = ac.hide;
ac.hide = function () {
ac._hide();
$shadow.hide();
};
return this;
}
});
})(jQuery);
function initAutoComplete() {
var $zipCodeHeader = $('#storeFinderZipHeader, #storeFinderStoreHeader'),
$zipCode = $zipCodeHeader.add('#storeFinderZip, #storeFinderStore, #storeFinderZipSmallTeaser');
if ($zipCode.length) {
$zipCode.each(function () {
var $input = $(this);
$input.storelocatorAutocomplete({
suggestUrl: $input.data('url'),
chooseBoxWidth: 244,
onSelect: function (storeName, storeId) {
if ($input.attr('name') === 'zip') {
$input.val($input.val().substr(0, 5));
} else if (!$input.attr('data-agform')) {
$input.val($input.val().split(',')[0]);
}
if (!$input.attr('data-agform')) {   // Special case for AG contact form
$input.closest('form').submit();
} else {
var storeIdInput = document.getElementById('storeId');
if (storeId && storeIdInput) {
storeIdInput.value = storeId;
} else {
storeIdInput.value = '';
}
}
}
});
});
}
var $headerModule = $zipCodeHeader.closest('.naviHeaderModule'),
$dropDownDivs = $headerModule.find('div').slice(1, 3),
$moduleType = $headerModule.find('span.moduleType');
$zipCodeHeader.focusin(function () {
$dropDownDivs.show();
$moduleType.addClass('hover');
});
$zipCodeHeader.focusout(function () {
$dropDownDivs.removeAttr('style');
$moduleType.removeClass('hover');
$('.expertAutocomplete_shadow').hide();
});
$('.naviHeaderModule:not(.first)').mouseover(function () {
$zipCodeHeader.blur();
$dropDownDivs.removeAttr('style');
$moduleType.removeClass('hover');
});
$('.storeFinderTab span.getRoute a').click(function () {
var $parent = $(this).parent(),
saddr = $parent.find('input').val(),
daddr = $parent.attr('data-saddr');
window.open('http://maps.google.de/maps?saddr=' + saddr + '&daddr=' + daddr);
});
}
$(document).ready(function () {
var $thumbs = $('.imageGallery .preview'),
$thumbelements = $thumbs.find('li'),
stepWidth = $thumbelements.outerWidth(true),
minLeft = -(($thumbelements.length - 3) * stepWidth),
$nextBtn = $('.nextButton'),
$prevBtn = $('.prevButton'),
currentImage = 0;
if (minLeft >= 0) {
$('.galleryButton').remove();
} else {
if ($thumbelements.length <= 3) {
$nextBtn.hide();
}
$nextBtn.click(function (ev) {
currentImage++;
var currentLeft = $thumbs.position().left,
nextLeft = -(currentImage * stepWidth);
if (currentLeft > minLeft) {
if (Modernizr.csstransitions) {
$thumbs.css('left', nextLeft);
} else {
$thumbs.animate({'left': nextLeft}, 200);
}
}
if (nextLeft === minLeft) {
$(this).hide();
}
$prevBtn.show();
ev.preventDefault();
});
$prevBtn.click(function (ev) {
currentImage--;
var currentLeft = $thumbs.position().left,
nextLeft = -(currentImage * stepWidth);
if (currentLeft < 0) {
if (Modernizr.csstransitions) {
$thumbs.css('left', nextLeft);
} else {
$thumbs.animate({'left': nextLeft}, 200);
}
}
if (nextLeft === 0) {
$(this).hide();
}
$nextBtn.show();
ev.preventDefault();
}).hide();
}
var $previewImages = $('.imageGallery .preview img'),
$bigImages = $('.imageGallery .detailImages img');
$bigImages.not(':first-child').hide();
$previewImages.click(function () {
var clickedIndex = $(this).index('.imageGallery .preview img'),
$fadeImage = $bigImages.filter(':visible'),
$newImage = $($bigImages.get(clickedIndex));
if ($fadeImage.attr('src') != $newImage.attr('src')) {
$newImage.fadeIn(500);
$bigImages.not($newImage).fadeOut(500);
}
});
var $moreLink = $('.storefinderMore');
if ($moreLink.length) {
$moreLink.click(function (ev) {
var locatorForm = $('.jsStorelocator'),
limitField = locatorForm.find('[name=limit]');
limitField.attr('value', limitField.data('value'));
locatorForm.submit();
ev.preventDefault();
});
}
var $storefinderFields = $('.js_storelocator input, .jsStorelocator input').not('[type=hidden]');
if ($storefinderFields.length) {
$storefinderFields.keypress(function () {
var $this = $(this),
clearField = 'store';
if ($this.attr('name') === 'store') {
clearField = 'zip';
}
$storefinderFields.filter('[name=' + clearField + ']').val('');
});
}
});
window.onload = function () {
initAutoComplete();
};
$(document).ready(function () {
'use strict';
var initEcondaTracking = function () {
if (!window.emospro) {
return;
}
$('.jsTrackEconda').on('click', function () {
var markerData = $(this).data('econda-marker');
window.emospro.marker = markerData;
if (typeof console != 'undefined') {
for (var key in window.emospro) {
if (window.emospro.hasOwnProperty(key)) {
console.log('econda: ' + key + ' = ' + window.emospro[key]);
}
}
}
emosPropertiesEvent(window.emospro);
});
};
initEcondaTracking();
});
var swfobject = function () {
var D = "undefined", r = "object", S = "Shockwave Flash", W = "ShockwaveFlash.ShockwaveFlash", q = "application/x-shockwave-flash", R = "SWFObjectExprInst", x = "onreadystatechange", O = window, j = document, t = navigator, T = false, U = [h], o = [], N = [], I = [], l, Q, E, B, J = false, a = false, n, G, m = true, M = function () {
var aa = typeof j.getElementById != D && typeof j.getElementsByTagName != D && typeof j.createElement != D, ah = t.userAgent.toLowerCase(), Y = t.platform.toLowerCase(), ae = Y ? /win/.test(Y) : /win/.test(ah), ac = Y ? /mac/.test(Y) : /mac/.test(ah), af = /webkit/.test(ah) ? parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")) : false, X = !+"\v1", ag = [0, 0, 0], ab = null;
if (typeof t.plugins != D && typeof t.plugins[S] == r) {
ab = t.plugins[S].description;
if (ab && !(typeof t.mimeTypes != D && t.mimeTypes[q] && !t.mimeTypes[q].enabledPlugin)) {
T = true;
X = false;
ab = ab.replace(/^.*\s+(\S+\s+\S+$)/, "$1");
ag[0] = parseInt(ab.replace(/^(.*)\..*$/, "$1"), 10);
ag[1] = parseInt(ab.replace(/^.*\.(.*)\s.*$/, "$1"), 10);
ag[2] = /[a-zA-Z]/.test(ab) ? parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0
}
} else {
if (typeof O.ActiveXObject != D) {
try {
var ad = new ActiveXObject(W);
if (ad) {
ab = ad.GetVariable("$version");
if (ab) {
X = true;
ab = ab.split(" ")[1].split(",");
ag = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)]
}
}
} catch (Z) {
}
}
}
return{w3: aa, pv: ag, wk: af, ie: X, win: ae, mac: ac}
}(), k = function () {
if (!M.w3) {
return
}
if ((typeof j.readyState != D && j.readyState == "complete") || (typeof j.readyState == D && (j.getElementsByTagName("body")[0] || j.body))) {
f()
}
if (!J) {
if (typeof j.addEventListener != D) {
j.addEventListener("DOMContentLoaded", f, false)
}
if (M.ie && M.win) {
j.attachEvent(x, function () {
if (j.readyState == "complete") {
j.detachEvent(x, arguments.callee);
f()
}
});
if (O == top) {
(function () {
if (J) {
return
}
try {
j.documentElement.doScroll("left")
} catch (X) {
setTimeout(arguments.callee, 0);
return
}
f()
})()
}
}
if (M.wk) {
(function () {
if (J) {
return
}
if (!/loaded|complete/.test(j.readyState)) {
setTimeout(arguments.callee, 0);
return
}
f()
})()
}
s(f)
}
}();
function f() {
if (J) {
return
}
try {
var Z = j.getElementsByTagName("body")[0].appendChild(C("span"));
Z.parentNode.removeChild(Z)
} catch (aa) {
return
}
J = true;
var X = U.length;
for (var Y = 0; Y < X; Y++) {
U[Y]()
}
}
function K(X) {
if (J) {
X()
} else {
U[U.length] = X
}
}
function s(Y) {
if (typeof O.addEventListener != D) {
O.addEventListener("load", Y, false)
} else {
if (typeof j.addEventListener != D) {
j.addEventListener("load", Y, false)
} else {
if (typeof O.attachEvent != D) {
i(O, "onload", Y)
} else {
if (typeof O.onload == "function") {
var X = O.onload;
O.onload = function () {
X();
Y()
}
} else {
O.onload = Y
}
}
}
}
}
function h() {
if (T) {
V()
} else {
H()
}
}
function V() {
var X = j.getElementsByTagName("body")[0];
var aa = C(r);
aa.setAttribute("type", q);
var Z = X.appendChild(aa);
if (Z) {
var Y = 0;
(function () {
if (typeof Z.GetVariable != D) {
var ab = Z.GetVariable("$version");
if (ab) {
ab = ab.split(" ")[1].split(",");
M.pv = [parseInt(ab[0], 10), parseInt(ab[1], 10), parseInt(ab[2], 10)]
}
} else {
if (Y < 10) {
Y++;
setTimeout(arguments.callee, 10);
return
}
}
X.removeChild(aa);
Z = null;
H()
})()
} else {
H()
}
}
function H() {
var ag = o.length;
if (ag > 0) {
for (var af = 0; af < ag; af++) {
var Y = o[af].id;
var ab = o[af].callbackFn;
var aa = {success: false, id: Y};
if (M.pv[0] > 0) {
var ae = c(Y);
if (ae) {
if (F(o[af].swfVersion) && !(M.wk && M.wk < 312)) {
w(Y, true);
if (ab) {
aa.success = true;
aa.ref = z(Y);
ab(aa)
}
} else {
if (o[af].expressInstall && A()) {
var ai = {};
ai.data = o[af].expressInstall;
ai.width = ae.getAttribute("width") || "0";
ai.height = ae.getAttribute("height") || "0";
if (ae.getAttribute("class")) {
ai.styleclass = ae.getAttribute("class")
}
if (ae.getAttribute("align")) {
ai.align = ae.getAttribute("align")
}
var ah = {};
var X = ae.getElementsByTagName("param");
var ac = X.length;
for (var ad = 0; ad < ac; ad++) {
if (X[ad].getAttribute("name").toLowerCase() != "movie") {
ah[X[ad].getAttribute("name")] = X[ad].getAttribute("value")
}
}
P(ai, ah, Y, ab)
} else {
p(ae);
if (ab) {
ab(aa)
}
}
}
}
} else {
w(Y, true);
if (ab) {
var Z = z(Y);
if (Z && typeof Z.SetVariable != D) {
aa.success = true;
aa.ref = Z
}
ab(aa)
}
}
}
}
}
function z(aa) {
var X = null;
var Y = c(aa);
if (Y && Y.nodeName == "OBJECT") {
if (typeof Y.SetVariable != D) {
X = Y
} else {
var Z = Y.getElementsByTagName(r)[0];
if (Z) {
X = Z
}
}
}
return X
}
function A() {
return !a && F("6.0.65") && (M.win || M.mac) && !(M.wk && M.wk < 312)
}
function P(aa, ab, X, Z) {
a = true;
E = Z || null;
B = {success: false, id: X};
var ae = c(X);
if (ae) {
if (ae.nodeName == "OBJECT") {
l = g(ae);
Q = null
} else {
l = ae;
Q = X
}
aa.id = R;
if (typeof aa.width == D || (!/%$/.test(aa.width) && parseInt(aa.width, 10) < 310)) {
aa.width = "310"
}
if (typeof aa.height == D || (!/%$/.test(aa.height) && parseInt(aa.height, 10) < 137)) {
aa.height = "137"
}
j.title = j.title.slice(0, 47) + " - Flash Player Installation";
var ad = M.ie && M.win ? "ActiveX" : "PlugIn", ac = "MMredirectURL=" + O.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + ad + "&MMdoctitle=" + j.title;
if (typeof ab.flashvars != D) {
ab.flashvars += "&" + ac
} else {
ab.flashvars = ac
}
if (M.ie && M.win && ae.readyState != 4) {
var Y = C("div");
X += "SWFObjectNew";
Y.setAttribute("id", X);
ae.parentNode.insertBefore(Y, ae);
ae.style.display = "none";
(function () {
if (ae.readyState == 4) {
ae.parentNode.removeChild(ae)
} else {
setTimeout(arguments.callee, 10)
}
})()
}
u(aa, ab, X)
}
}
function p(Y) {
if (M.ie && M.win && Y.readyState != 4) {
var X = C("div");
Y.parentNode.insertBefore(X, Y);
X.parentNode.replaceChild(g(Y), X);
Y.style.display = "none";
(function () {
if (Y.readyState == 4) {
Y.parentNode.removeChild(Y)
} else {
setTimeout(arguments.callee, 10)
}
})()
} else {
Y.parentNode.replaceChild(g(Y), Y)
}
}
function g(ab) {
var aa = C("div");
if (M.win && M.ie) {
aa.innerHTML = ab.innerHTML
} else {
var Y = ab.getElementsByTagName(r)[0];
if (Y) {
var ad = Y.childNodes;
if (ad) {
var X = ad.length;
for (var Z = 0; Z < X; Z++) {
if (!(ad[Z].nodeType == 1 && ad[Z].nodeName == "PARAM") && !(ad[Z].nodeType == 8)) {
aa.appendChild(ad[Z].cloneNode(true))
}
}
}
}
}
return aa
}
function u(ai, ag, Y) {
var X, aa = c(Y);
if (M.wk && M.wk < 312) {
return X
}
if (aa) {
if (typeof ai.id == D) {
ai.id = Y
}
if (M.ie && M.win) {
var ah = "";
for (var ae in ai) {
if (ai[ae] != Object.prototype[ae]) {
if (ae.toLowerCase() == "data") {
ag.movie = ai[ae]
} else {
if (ae.toLowerCase() == "styleclass") {
ah += ' class="' + ai[ae] + '"'
} else {
if (ae.toLowerCase() != "classid") {
ah += " " + ae + '="' + ai[ae] + '"'
}
}
}
}
}
var af = "";
for (var ad in ag) {
if (ag[ad] != Object.prototype[ad]) {
af += '<param name="' + ad + '" value="' + ag[ad] + '" />'
}
}
aa.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + ah + ">" + af + "</object>";
N[N.length] = ai.id;
X = c(ai.id)
} else {
var Z = C(r);
Z.setAttribute("type", q);
for (var ac in ai) {
if (ai[ac] != Object.prototype[ac]) {
if (ac.toLowerCase() == "styleclass") {
Z.setAttribute("class", ai[ac])
} else {
if (ac.toLowerCase() != "classid") {
Z.setAttribute(ac, ai[ac])
}
}
}
}
for (var ab in ag) {
if (ag[ab] != Object.prototype[ab] && ab.toLowerCase() != "movie") {
e(Z, ab, ag[ab])
}
}
aa.parentNode.replaceChild(Z, aa);
X = Z
}
}
return X
}
function e(Z, X, Y) {
var aa = C("param");
aa.setAttribute("name", X);
aa.setAttribute("value", Y);
Z.appendChild(aa)
}
function y(Y) {
var X = c(Y);
if (X && X.nodeName == "OBJECT") {
if (M.ie && M.win) {
X.style.display = "none";
(function () {
if (X.readyState == 4) {
b(Y)
} else {
setTimeout(arguments.callee, 10)
}
})()
} else {
X.parentNode.removeChild(X)
}
}
}
function b(Z) {
var Y = c(Z);
if (Y) {
for (var X in Y) {
if (typeof Y[X] == "function") {
Y[X] = null
}
}
Y.parentNode.removeChild(Y)
}
}
function c(Z) {
var X = null;
try {
X = j.getElementById(Z)
} catch (Y) {
}
return X
}
function C(X) {
return j.createElement(X)
}
function i(Z, X, Y) {
Z.attachEvent(X, Y);
I[I.length] = [Z, X, Y]
}
function F(Z) {
var Y = M.pv, X = Z.split(".");
X[0] = parseInt(X[0], 10);
X[1] = parseInt(X[1], 10) || 0;
X[2] = parseInt(X[2], 10) || 0;
return(Y[0] > X[0] || (Y[0] == X[0] && Y[1] > X[1]) || (Y[0] == X[0] && Y[1] == X[1] && Y[2] >= X[2])) ? true : false
}
function v(ac, Y, ad, ab) {
if (M.ie && M.mac) {
return
}
var aa = j.getElementsByTagName("head")[0];
if (!aa) {
return
}
var X = (ad && typeof ad == "string") ? ad : "screen";
if (ab) {
n = null;
G = null
}
if (!n || G != X) {
var Z = C("style");
Z.setAttribute("type", "text/css");
Z.setAttribute("media", X);
n = aa.appendChild(Z);
if (M.ie && M.win && typeof j.styleSheets != D && j.styleSheets.length > 0) {
n = j.styleSheets[j.styleSheets.length - 1]
}
G = X
}
if (M.ie && M.win) {
if (n && typeof n.addRule == r) {
n.addRule(ac, Y)
}
} else {
if (n && typeof j.createTextNode != D) {
n.appendChild(j.createTextNode(ac + " {" + Y + "}"))
}
}
}
function w(Z, X) {
if (!m) {
return
}
var Y = X ? "visible" : "hidden";
if (J && c(Z)) {
c(Z).style.visibility = Y
} else {
v("#" + Z, "visibility:" + Y)
}
}
function L(Y) {
var Z = /[\\\"<>\.;]/;
var X = Z.exec(Y) != null;
return X && typeof encodeURIComponent != D ? encodeURIComponent(Y) : Y
}
var d = function () {
if (M.ie && M.win) {
window.attachEvent("onunload", function () {
var ac = I.length;
for (var ab = 0; ab < ac; ab++) {
I[ab][0].detachEvent(I[ab][1], I[ab][2])
}
var Z = N.length;
for (var aa = 0; aa < Z; aa++) {
y(N[aa])
}
for (var Y in M) {
M[Y] = null
}
M = null;
for (var X in swfobject) {
swfobject[X] = null
}
swfobject = null
})
}
}();
return{registerObject: function (ab, X, aa, Z) {
if (M.w3 && ab && X) {
var Y = {};
Y.id = ab;
Y.swfVersion = X;
Y.expressInstall = aa;
Y.callbackFn = Z;
o[o.length] = Y;
w(ab, false)
} else {
if (Z) {
Z({success: false, id: ab})
}
}
}, getObjectById: function (X) {
if (M.w3) {
return z(X)
}
}, embedSWF: function (ab, ah, ae, ag, Y, aa, Z, ad, af, ac) {
var X = {success: false, id: ah};
if (M.w3 && !(M.wk && M.wk < 312) && ab && ah && ae && ag && Y) {
w(ah, false);
K(function () {
ae += "";
ag += "";
var aj = {};
if (af && typeof af === r) {
for (var al in af) {
aj[al] = af[al]
}
}
aj.data = ab;
aj.width = ae;
aj.height = ag;
var am = {};
if (ad && typeof ad === r) {
for (var ak in ad) {
am[ak] = ad[ak]
}
}
if (Z && typeof Z === r) {
for (var ai in Z) {
if (typeof am.flashvars != D) {
am.flashvars += "&" + ai + "=" + Z[ai]
} else {
am.flashvars = ai + "=" + Z[ai]
}
}
}
if (F(Y)) {
var an = u(aj, am, ah);
if (aj.id == ah) {
w(ah, true)
}
X.success = true;
X.ref = an
} else {
if (aa && A()) {
aj.data = aa;
P(aj, am, ah, ac);
return
} else {
w(ah, true)
}
}
if (ac) {
ac(X)
}
})
} else {
if (ac) {
ac(X)
}
}
}, switchOffAutoHideShow: function () {
m = false
}, ua: M, getFlashPlayerVersion: function () {
return{major: M.pv[0], minor: M.pv[1], release: M.pv[2]}
}, hasFlashPlayerVersion: F, createSWF: function (Z, Y, X) {
if (M.w3) {
return u(Z, Y, X)
} else {
return undefined
}
}, showExpressInstall: function (Z, aa, X, Y) {
if (M.w3 && A()) {
P(Z, aa, X, Y)
}
}, removeSWF: function (X) {
if (M.w3) {
y(X)
}
}, createCSS: function (aa, Z, Y, X) {
if (M.w3) {
v(aa, Z, Y, X)
}
}, addDomLoadEvent: K, addLoadEvent: s, getQueryParamValue: function (aa) {
var Z = j.location.search || j.location.hash;
if (Z) {
if (/\?/.test(Z)) {
Z = Z.split("?")[1]
}
if (aa == null) {
return L(Z)
}
var Y = Z.split("&");
for (var X = 0; X < Y.length; X++) {
if (Y[X].substring(0, Y[X].indexOf("=")) == aa) {
return L(Y[X].substring((Y[X].indexOf("=") + 1)))
}
}
}
return""
}, expressInstallCallback: function () {
if (a) {
var X = c(R);
if (X && l) {
X.parentNode.replaceChild(l, X);
if (Q) {
w(Q, true);
if (M.ie && M.win) {
l.style.display = "block"
}
}
if (E) {
E(B)
}
}
a = false
}
}}
}();
(function (e, t) {
function i(t, n) {
var r, i, o, u = t.nodeName.toLowerCase();
return"area" === u ? (r = t.parentNode, i = r.name, !t.href || !i || r.nodeName.toLowerCase() !== "map" ? !1 : (o = e("img[usemap=#" + i + "]")[0], !!o && s(o))) : (/input|select|textarea|button|object/.test(u) ? !t.disabled : "a" === u ? t.href || n : n) && s(t)
}
function s(t) {
return e.expr.filters.visible(t) && !e(t).parents().andSelf().filter(function () {
return e.css(this, "visibility") === "hidden"
}).length
}
var n = 0, r = /^ui-id-\d+$/;
e.ui = e.ui || {};
if (e.ui.version)return;
e.extend(e.ui, {version: "1.9.2", keyCode: {BACKSPACE: 8, COMMA: 188, DELETE: 46, DOWN: 40, END: 35, ENTER: 13, ESCAPE: 27, HOME: 36, LEFT: 37, NUMPAD_ADD: 107, NUMPAD_DECIMAL: 110, NUMPAD_DIVIDE: 111, NUMPAD_ENTER: 108, NUMPAD_MULTIPLY: 106, NUMPAD_SUBTRACT: 109, PAGE_DOWN: 34, PAGE_UP: 33, PERIOD: 190, RIGHT: 39, SPACE: 32, TAB: 9, UP: 38}}), e.fn.extend({_focus: e.fn.focus, focus: function (t, n) {
return typeof t == "number" ? this.each(function () {
var r = this;
setTimeout(function () {
e(r).focus(), n && n.call(r)
}, t)
}) : this._focus.apply(this, arguments)
}, scrollParent: function () {
var t;
return e.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? t = this.parents().filter(function () {
return/(relative|absolute|fixed)/.test(e.css(this, "position")) && /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
}).eq(0) : t = this.parents().filter(function () {
return/(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
}).eq(0), /fixed/.test(this.css("position")) || !t.length ? e(document) : t
}, zIndex: function (n) {
if (n !== t)return this.css("zIndex", n);
if (this.length) {
var r = e(this[0]), i, s;
while (r.length && r[0] !== document) {
i = r.css("position");
if (i === "absolute" || i === "relative" || i === "fixed") {
s = parseInt(r.css("zIndex"), 10);
if (!isNaN(s) && s !== 0)return s
}
r = r.parent()
}
}
return 0
}, uniqueId: function () {
return this.each(function () {
this.id || (this.id = "ui-id-" + ++n)
})
}, removeUniqueId: function () {
return this.each(function () {
r.test(this.id) && e(this).removeAttr("id")
})
}}), e.extend(e.expr[":"], {data: e.expr.createPseudo ? e.expr.createPseudo(function (t) {
return function (n) {
return!!e.data(n, t)
}
}) : function (t, n, r) {
return!!e.data(t, r[3])
}, focusable: function (t) {
return i(t, !isNaN(e.attr(t, "tabindex")))
}, tabbable: function (t) {
var n = e.attr(t, "tabindex"), r = isNaN(n);
return(r || n >= 0) && i(t, !r)
}}), e(function () {
var t = document.body, n = t.appendChild(n = document.createElement("div"));
n.offsetHeight, e.extend(n.style, {minHeight: "100px", height: "auto", padding: 0, borderWidth: 0}), e.support.minHeight = n.offsetHeight === 100, e.support.selectstart = "onselectstart"in n, t.removeChild(n).style.display = "none"
}), e("<a>").outerWidth(1).jquery || e.each(["Width", "Height"], function (n, r) {
function u(t, n, r, s) {
return e.each(i, function () {
n -= parseFloat(e.css(t, "padding" + this)) || 0, r && (n -= parseFloat(e.css(t, "border" + this + "Width")) || 0), s && (n -= parseFloat(e.css(t, "margin" + this)) || 0)
}), n
}
var i = r === "Width" ? ["Left", "Right"] : ["Top", "Bottom"], s = r.toLowerCase(), o = {innerWidth: e.fn.innerWidth, innerHeight: e.fn.innerHeight, outerWidth: e.fn.outerWidth, outerHeight: e.fn.outerHeight};
e.fn["inner" + r] = function (n) {
return n === t ? o["inner" + r].call(this) : this.each(function () {
e(this).css(s, u(this, n) + "px")
})
}, e.fn["outer" + r] = function (t, n) {
return typeof t != "number" ? o["outer" + r].call(this, t) : this.each(function () {
e(this).css(s, u(this, t, !0, n) + "px")
})
}
}), e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = function (t) {
return function (n) {
return arguments.length ? t.call(this, e.camelCase(n)) : t.call(this)
}
}(e.fn.removeData)), function () {
var t = /msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase()) || [];
e.ui.ie = t.length ? !0 : !1, e.ui.ie6 = parseFloat(t[1], 10) === 6
}(), e.fn.extend({disableSelection: function () {
return this.bind((e.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function (e) {
e.preventDefault()
})
}, enableSelection: function () {
return this.unbind(".ui-disableSelection")
}}), e.extend(e.ui, {plugin: {add: function (t, n, r) {
var i, s = e.ui[t].prototype;
for (i in r)s.plugins[i] = s.plugins[i] || [], s.plugins[i].push([n, r[i]])
}, call: function (e, t, n) {
var r, i = e.plugins[t];
if (!i || !e.element[0].parentNode || e.element[0].parentNode.nodeType === 11)return;
for (r = 0; r < i.length; r++)e.options[i[r][0]] && i[r][1].apply(e.element, n)
}}, contains: e.contains, hasScroll: function (t, n) {
if (e(t).css("overflow") === "hidden")return!1;
var r = n && n === "left" ? "scrollLeft" : "scrollTop", i = !1;
return t[r] > 0 ? !0 : (t[r] = 1, i = t[r] > 0, t[r] = 0, i)
}, isOverAxis: function (e, t, n) {
return e > t && e < t + n
}, isOver: function (t, n, r, i, s, o) {
return e.ui.isOverAxis(t, r, s) && e.ui.isOverAxis(n, i, o)
}})
})(jQuery);
(function (e, t) {
var n = 0, r = Array.prototype.slice, i = e.cleanData;
e.cleanData = function (t) {
for (var n = 0, r; (r = t[n]) != null; n++)try {
e(r).triggerHandler("remove")
} catch (s) {
}
i(t)
}, e.widget = function (t, n, r) {
var i, s, o, u, a = t.split(".")[0];
t = t.split(".")[1], i = a + "-" + t, r || (r = n, n = e.Widget), e.expr[":"][i.toLowerCase()] = function (t) {
return!!e.data(t, i)
}, e[a] = e[a] || {}, s = e[a][t], o = e[a][t] = function (e, t) {
if (!this._createWidget)return new o(e, t);
arguments.length && this._createWidget(e, t)
}, e.extend(o, s, {version: r.version, _proto: e.extend({}, r), _childConstructors: []}), u = new n, u.options = e.widget.extend({}, u.options), e.each(r, function (t, i) {
e.isFunction(i) && (r[t] = function () {
var e = function () {
return n.prototype[t].apply(this, arguments)
}, r = function (e) {
return n.prototype[t].apply(this, e)
};
return function () {
var t = this._super, n = this._superApply, s;
return this._super = e, this._superApply = r, s = i.apply(this, arguments), this._super = t, this._superApply = n, s
}
}())
}), o.prototype = e.widget.extend(u, {widgetEventPrefix: s ? u.widgetEventPrefix : t}, r, {constructor: o, namespace: a, widgetName: t, widgetBaseClass: i, widgetFullName: i}), s ? (e.each(s._childConstructors, function (t, n) {
var r = n.prototype;
e.widget(r.namespace + "." + r.widgetName, o, n._proto)
}), delete s._childConstructors) : n._childConstructors.push(o), e.widget.bridge(t, o)
}, e.widget.extend = function (n) {
var i = r.call(arguments, 1), s = 0, o = i.length, u, a;
for (; s < o; s++)for (u in i[s])a = i[s][u], i[s].hasOwnProperty(u) && a !== t && (e.isPlainObject(a) ? n[u] = e.isPlainObject(n[u]) ? e.widget.extend({}, n[u], a) : e.widget.extend({}, a) : n[u] = a);
return n
}, e.widget.bridge = function (n, i) {
var s = i.prototype.widgetFullName || n;
e.fn[n] = function (o) {
var u = typeof o == "string", a = r.call(arguments, 1), f = this;
return o = !u && a.length ? e.widget.extend.apply(null, [o].concat(a)) : o, u ? this.each(function () {
var r, i = e.data(this, s);
if (!i)return e.error("cannot call methods on " + n + " prior to initialization; " + "attempted to call method '" + o + "'");
if (!e.isFunction(i[o]) || o.charAt(0) === "_")return e.error("no such method '" + o + "' for " + n + " widget instance");
r = i[o].apply(i, a);
if (r !== i && r !== t)return f = r && r.jquery ? f.pushStack(r.get()) : r, !1
}) : this.each(function () {
var t = e.data(this, s);
t ? t.option(o || {})._init() : e.data(this, s, new i(o, this))
}), f
}
}, e.Widget = function () {
}, e.Widget._childConstructors = [], e.Widget.prototype = {widgetName: "widget", widgetEventPrefix: "", defaultElement: "<div>", options: {disabled: !1, create: null}, _createWidget: function (t, r) {
r = e(r || this.defaultElement || this)[0], this.element = e(r), this.uuid = n++, this.eventNamespace = "." + this.widgetName + this.uuid, this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t), this.bindings = e(), this.hoverable = e(), this.focusable = e(), r !== this && (e.data(r, this.widgetName, this), e.data(r, this.widgetFullName, this), this._on(!0, this.element, {remove: function (e) {
e.target === r && this.destroy()
}}), this.document = e(r.style ? r.ownerDocument : r.document || r), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init()
}, _getCreateOptions: e.noop, _getCreateEventData: e.noop, _create: e.noop, _init: e.noop, destroy: function () {
this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled " + "ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")
}, _destroy: e.noop, widget: function () {
return this.element
}, option: function (n, r) {
var i = n, s, o, u;
if (arguments.length === 0)return e.widget.extend({}, this.options);
if (typeof n == "string") {
i = {}, s = n.split("."), n = s.shift();
if (s.length) {
o = i[n] = e.widget.extend({}, this.options[n]);
for (u = 0; u < s.length - 1; u++)o[s[u]] = o[s[u]] || {}, o = o[s[u]];
n = s.pop();
if (r === t)return o[n] === t ? null : o[n];
o[n] = r
} else {
if (r === t)return this.options[n] === t ? null : this.options[n];
i[n] = r
}
}
return this._setOptions(i), this
}, _setOptions: function (e) {
var t;
for (t in e)this._setOption(t, e[t]);
return this
}, _setOption: function (e, t) {
return this.options[e] = t, e === "disabled" && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!t).attr("aria-disabled", t), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")), this
}, enable: function () {
return this._setOption("disabled", !1)
}, disable: function () {
return this._setOption("disabled", !0)
}, _on: function (t, n, r) {
var i, s = this;
typeof t != "boolean" && (r = n, n = t, t = !1), r ? (n = i = e(n), this.bindings = this.bindings.add(n)) : (r = n, n = this.element, i = this.widget()), e.each(r, function (r, o) {
function u() {
if (!t && (s.options.disabled === !0 || e(this).hasClass("ui-state-disabled")))return;
return(typeof o == "string" ? s[o] : o).apply(s, arguments)
}
typeof o != "string" && (u.guid = o.guid = o.guid || u.guid || e.guid++);
var a = r.match(/^(\w+)\s*(.*)$/), f = a[1] + s.eventNamespace, l = a[2];
l ? i.delegate(l, f, u) : n.bind(f, u)
})
}, _off: function (e, t) {
t = (t || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, e.unbind(t).undelegate(t)
}, _delay: function (e, t) {
function n() {
return(typeof e == "string" ? r[e] : e).apply(r, arguments)
}
var r = this;
return setTimeout(n, t || 0)
}, _hoverable: function (t) {
this.hoverable = this.hoverable.add(t), this._on(t, {mouseenter: function (t) {
e(t.currentTarget).addClass("ui-state-hover")
}, mouseleave: function (t) {
e(t.currentTarget).removeClass("ui-state-hover")
}})
}, _focusable: function (t) {
this.focusable = this.focusable.add(t), this._on(t, {focusin: function (t) {
e(t.currentTarget).addClass("ui-state-focus")
}, focusout: function (t) {
e(t.currentTarget).removeClass("ui-state-focus")
}})
}, _trigger: function (t, n, r) {
var i, s, o = this.options[t];
r = r || {}, n = e.Event(n), n.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), n.target = this.element[0], s = n.originalEvent;
if (s)for (i in s)i in n || (n[i] = s[i]);
return this.element.trigger(n, r), !(e.isFunction(o) && o.apply(this.element[0], [n].concat(r)) === !1 || n.isDefaultPrevented())
}}, e.each({show: "fadeIn", hide: "fadeOut"}, function (t, n) {
e.Widget.prototype["_" + t] = function (r, i, s) {
typeof i == "string" && (i = {effect: i});
var o, u = i ? i === !0 || typeof i == "number" ? n : i.effect || n : t;
i = i || {}, typeof i == "number" && (i = {duration: i}), o = !e.isEmptyObject(i), i.complete = s, i.delay && r.delay(i.delay), o && e.effects && (e.effects.effect[u] || e.uiBackCompat !== !1 && e.effects[u]) ? r[t](i) : u !== t && r[u] ? r[u](i.duration, i.easing, s) : r.queue(function (n) {
e(this)[t](), s && s.call(r[0]), n()
})
}
}), e.uiBackCompat !== !1 && (e.Widget.prototype._getCreateOptions = function () {
return e.metadata && e.metadata.get(this.element[0])[this.widgetName]
})
})(jQuery);
(function (e, t) {
var n = !1;
e(document).mouseup(function (e) {
n = !1
}), e.widget("ui.mouse", {version: "1.9.2", options: {cancel: "input,textarea,button,select,option", distance: 1, delay: 0}, _mouseInit: function () {
var t = this;
this.element.bind("mousedown." + this.widgetName,function (e) {
return t._mouseDown(e)
}).bind("click." + this.widgetName, function (n) {
if (!0 === e.data(n.target, t.widgetName + ".preventClickEvent"))return e.removeData(n.target, t.widgetName + ".preventClickEvent"), n.stopImmediatePropagation(), !1
}), this.started = !1
}, _mouseDestroy: function () {
this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
}, _mouseDown: function (t) {
if (n)return;
this._mouseStarted && this._mouseUp(t), this._mouseDownEvent = t;
var r = this, i = t.which === 1, s = typeof this.options.cancel == "string" && t.target.nodeName ? e(t.target).closest(this.options.cancel).length : !1;
if (!i || s || !this._mouseCapture(t))return!0;
this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () {
r.mouseDelayMet = !0
}, this.options.delay));
if (this._mouseDistanceMet(t) && this._mouseDelayMet(t)) {
this._mouseStarted = this._mouseStart(t) !== !1;
if (!this._mouseStarted)return t.preventDefault(), !0
}
return!0 === e.data(t.target, this.widgetName + ".preventClickEvent") && e.removeData(t.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (e) {
return r._mouseMove(e)
}, this._mouseUpDelegate = function (e) {
return r._mouseUp(e)
}, e(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), t.preventDefault(), n = !0, !0
}, _mouseMove: function (t) {
return!e.ui.ie || document.documentMode >= 9 || !!t.button ? this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1, this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted) : this._mouseUp(t)
}, _mouseUp: function (t) {
return e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, t.target === this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(t)), !1
}, _mouseDistanceMet: function (e) {
return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance
}, _mouseDelayMet: function (e) {
return this.mouseDelayMet
}, _mouseStart: function (e) {
}, _mouseDrag: function (e) {
}, _mouseStop: function (e) {
}, _mouseCapture: function (e) {
return!0
}})
})(jQuery);
(function (e, t) {
function h(e, t, n) {
return[parseInt(e[0], 10) * (l.test(e[0]) ? t / 100 : 1), parseInt(e[1], 10) * (l.test(e[1]) ? n / 100 : 1)]
}
function p(t, n) {
return parseInt(e.css(t, n), 10) || 0
}
e.ui = e.ui || {};
var n, r = Math.max, i = Math.abs, s = Math.round, o = /left|center|right/, u = /top|center|bottom/, a = /[\+\-]\d+%?/, f = /^\w+/, l = /%$/, c = e.fn.position;
e.position = {scrollbarWidth: function () {
if (n !== t)return n;
var r, i, s = e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"), o = s.children()[0];
return e("body").append(s), r = o.offsetWidth, s.css("overflow", "scroll"), i = o.offsetWidth, r === i && (i = s[0].clientWidth), s.remove(), n = r - i
}, getScrollInfo: function (t) {
var n = t.isWindow ? "" : t.element.css("overflow-x"), r = t.isWindow ? "" : t.element.css("overflow-y"), i = n === "scroll" || n === "auto" && t.width < t.element[0].scrollWidth, s = r === "scroll" || r === "auto" && t.height < t.element[0].scrollHeight;
return{width: i ? e.position.scrollbarWidth() : 0, height: s ? e.position.scrollbarWidth() : 0}
}, getWithinInfo: function (t) {
var n = e(t || window), r = e.isWindow(n[0]);
return{element: n, isWindow: r, offset: n.offset() || {left: 0, top: 0}, scrollLeft: n.scrollLeft(), scrollTop: n.scrollTop(), width: r ? n.width() : n.outerWidth(), height: r ? n.height() : n.outerHeight()}
}}, e.fn.position = function (t) {
if (!t || !t.of)return c.apply(this, arguments);
t = e.extend({}, t);
var n, l, d, v, m, g = e(t.of), y = e.position.getWithinInfo(t.within), b = e.position.getScrollInfo(y), w = g[0], E = (t.collision || "flip").split(" "), S = {};
return w.nodeType === 9 ? (l = g.width(), d = g.height(), v = {top: 0, left: 0}) : e.isWindow(w) ? (l = g.width(), d = g.height(), v = {top: g.scrollTop(), left: g.scrollLeft()}) : w.preventDefault ? (t.at = "left top", l = d = 0, v = {top: w.pageY, left: w.pageX}) : (l = g.outerWidth(), d = g.outerHeight(), v = g.offset()), m = e.extend({}, v), e.each(["my", "at"], function () {
var e = (t[this] || "").split(" "), n, r;
e.length === 1 && (e = o.test(e[0]) ? e.concat(["center"]) : u.test(e[0]) ? ["center"].concat(e) : ["center", "center"]), e[0] = o.test(e[0]) ? e[0] : "center", e[1] = u.test(e[1]) ? e[1] : "center", n = a.exec(e[0]), r = a.exec(e[1]), S[this] = [n ? n[0] : 0, r ? r[0] : 0], t[this] = [f.exec(e[0])[0], f.exec(e[1])[0]]
}), E.length === 1 && (E[1] = E[0]), t.at[0] === "right" ? m.left += l : t.at[0] === "center" && (m.left += l / 2), t.at[1] === "bottom" ? m.top += d : t.at[1] === "center" && (m.top += d / 2), n = h(S.at, l, d), m.left += n[0], m.top += n[1], this.each(function () {
var o, u, a = e(this), f = a.outerWidth(), c = a.outerHeight(), w = p(this, "marginLeft"), x = p(this, "marginTop"), T = f + w + p(this, "marginRight") + b.width, N = c + x + p(this, "marginBottom") + b.height, C = e.extend({}, m), k = h(S.my, a.outerWidth(), a.outerHeight());
t.my[0] === "right" ? C.left -= f : t.my[0] === "center" && (C.left -= f / 2), t.my[1] === "bottom" ? C.top -= c : t.my[1] === "center" && (C.top -= c / 2), C.left += k[0], C.top += k[1], e.support.offsetFractions || (C.left = s(C.left), C.top = s(C.top)), o = {marginLeft: w, marginTop: x}, e.each(["left", "top"], function (r, i) {
e.ui.position[E[r]] && e.ui.position[E[r]][i](C, {targetWidth: l, targetHeight: d, elemWidth: f, elemHeight: c, collisionPosition: o, collisionWidth: T, collisionHeight: N, offset: [n[0] + k[0], n[1] + k[1]], my: t.my, at: t.at, within: y, elem: a})
}), e.fn.bgiframe && a.bgiframe(), t.using && (u = function (e) {
var n = v.left - C.left, s = n + l - f, o = v.top - C.top, u = o + d - c, h = {target: {element: g, left: v.left, top: v.top, width: l, height: d}, element: {element: a, left: C.left, top: C.top, width: f, height: c}, horizontal: s < 0 ? "left" : n > 0 ? "right" : "center", vertical: u < 0 ? "top" : o > 0 ? "bottom" : "middle"};
l < f && i(n + s) < l && (h.horizontal = "center"), d < c && i(o + u) < d && (h.vertical = "middle"), r(i(n), i(s)) > r(i(o), i(u)) ? h.important = "horizontal" : h.important = "vertical", t.using.call(this, e, h)
}), a.offset(e.extend(C, {using: u}))
})
}, e.ui.position = {fit: {left: function (e, t) {
var n = t.within, i = n.isWindow ? n.scrollLeft : n.offset.left, s = n.width, o = e.left - t.collisionPosition.marginLeft, u = i - o, a = o + t.collisionWidth - s - i, f;
t.collisionWidth > s ? u > 0 && a <= 0 ? (f = e.left + u + t.collisionWidth - s - i, e.left += u - f) : a > 0 && u <= 0 ? e.left = i : u > a ? e.left = i + s - t.collisionWidth : e.left = i : u > 0 ? e.left += u : a > 0 ? e.left -= a : e.left = r(e.left - o, e.left)
}, top: function (e, t) {
var n = t.within, i = n.isWindow ? n.scrollTop : n.offset.top, s = t.within.height, o = e.top - t.collisionPosition.marginTop, u = i - o, a = o + t.collisionHeight - s - i, f;
t.collisionHeight > s ? u > 0 && a <= 0 ? (f = e.top + u + t.collisionHeight - s - i, e.top += u - f) : a > 0 && u <= 0 ? e.top = i : u > a ? e.top = i + s - t.collisionHeight : e.top = i : u > 0 ? e.top += u : a > 0 ? e.top -= a : e.top = r(e.top - o, e.top)
}}, flip: {left: function (e, t) {
var n = t.within, r = n.offset.left + n.scrollLeft, s = n.width, o = n.isWindow ? n.scrollLeft : n.offset.left, u = e.left - t.collisionPosition.marginLeft, a = u - o, f = u + t.collisionWidth - s - o, l = t.my[0] === "left" ? -t.elemWidth : t.my[0] === "right" ? t.elemWidth : 0, c = t.at[0] === "left" ? t.targetWidth : t.at[0] === "right" ? -t.targetWidth : 0, h = -2 * t.offset[0], p, d;
if (a < 0) {
p = e.left + l + c + h + t.collisionWidth - s - r;
if (p < 0 || p < i(a))e.left += l + c + h
} else if (f > 0) {
d = e.left - t.collisionPosition.marginLeft + l + c + h - o;
if (d > 0 || i(d) < f)e.left += l + c + h
}
}, top: function (e, t) {
var n = t.within, r = n.offset.top + n.scrollTop, s = n.height, o = n.isWindow ? n.scrollTop : n.offset.top, u = e.top - t.collisionPosition.marginTop, a = u - o, f = u + t.collisionHeight - s - o, l = t.my[1] === "top", c = l ? -t.elemHeight : t.my[1] === "bottom" ? t.elemHeight : 0, h = t.at[1] === "top" ? t.targetHeight : t.at[1] === "bottom" ? -t.targetHeight : 0, p = -2 * t.offset[1], d, v;
a < 0 ? (v = e.top + c + h + p + t.collisionHeight - s - r, e.top + c + h + p > a && (v < 0 || v < i(a)) && (e.top += c + h + p)) : f > 0 && (d = e.top - t.collisionPosition.marginTop + c + h + p - o, e.top + c + h + p > f && (d > 0 || i(d) < f) && (e.top += c + h + p))
}}, flipfit: {left: function () {
e.ui.position.flip.left.apply(this, arguments), e.ui.position.fit.left.apply(this, arguments)
}, top: function () {
e.ui.position.flip.top.apply(this, arguments), e.ui.position.fit.top.apply(this, arguments)
}}}, function () {
var t, n, r, i, s, o = document.getElementsByTagName("body")[0], u = document.createElement("div");
t = document.createElement(o ? "div" : "body"), r = {visibility: "hidden", width: 0, height: 0, border: 0, margin: 0, background: "none"}, o && e.extend(r, {position: "absolute", left: "-1000px", top: "-1000px"});
for (s in r)t.style[s] = r[s];
t.appendChild(u), n = o || document.documentElement, n.insertBefore(t, n.firstChild), u.style.cssText = "position: absolute; left: 10.7432222px;", i = e(u).offset().left, e.support.offsetFractions = i > 10 && i < 11, t.innerHTML = "", n.removeChild(t)
}(), e.uiBackCompat !== !1 && function (e) {
var n = e.fn.position;
e.fn.position = function (r) {
if (!r || !r.offset)return n.call(this, r);
var i = r.offset.split(" "), s = r.at.split(" ");
return i.length === 1 && (i[1] = i[0]), /^\d/.test(i[0]) && (i[0] = "+" + i[0]), /^\d/.test(i[1]) && (i[1] = "+" + i[1]), s.length === 1 && (/left|center|right/.test(s[0]) ? s[1] = "center" : (s[1] = s[0], s[0] = "center")), n.call(this, e.extend(r, {at: s[0] + i[0] + " " + s[1] + i[1], offset: t}))
}
}(jQuery)
})(jQuery);
(function (e, t) {
e.widget("ui.draggable", e.ui.mouse, {version: "1.9.2", widgetEventPrefix: "drag", options: {addClasses: !0, appendTo: "parent", axis: !1, connectToSortable: !1, containment: !1, cursor: "auto", cursorAt: !1, grid: !1, handle: !1, helper: "original", iframeFix: !1, opacity: !1, refreshPositions: !1, revert: !1, revertDuration: 500, scope: "default", scroll: !0, scrollSensitivity: 20, scrollSpeed: 20, snap: !1, snapMode: "both", snapTolerance: 20, stack: !1, zIndex: !1}, _create: function () {
this.options.helper == "original" && !/^(?:r|a|f)/.test(this.element.css("position")) && (this.element[0].style.position = "relative"), this.options.addClasses && this.element.addClass("ui-draggable"), this.options.disabled && this.element.addClass("ui-draggable-disabled"), this._mouseInit()
}, _destroy: function () {
this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), this._mouseDestroy()
}, _mouseCapture: function (t) {
var n = this.options;
return this.helper || n.disabled || e(t.target).is(".ui-resizable-handle") ? !1 : (this.handle = this._getHandle(t), this.handle ? (e(n.iframeFix === !0 ? "iframe" : n.iframeFix).each(function () {
e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width: this.offsetWidth + "px", height: this.offsetHeight + "px", position: "absolute", opacity: "0.001", zIndex: 1e3}).css(e(this).offset()).appendTo("body")
}), !0) : !1)
}, _mouseStart: function (t) {
var n = this.options;
return this.helper = this._createHelper(t), this.helper.addClass("ui-draggable-dragging"), this._cacheHelperProportions(), e.ui.ddmanager && (e.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(), this.offset = this.positionAbs = this.element.offset(), this.offset = {top: this.offset.top - this.margins.top, left: this.offset.left - this.margins.left}, e.extend(this.offset, {click: {left: t.pageX - this.offset.left, top: t.pageY - this.offset.top}, parent: this._getParentOffset(), relative: this._getRelativeOffset()}), this.originalPosition = this.position = this._generatePosition(t), this.originalPageX = t.pageX, this.originalPageY = t.pageY, n.cursorAt && this._adjustOffsetFromHelper(n.cursorAt), n.containment && this._setContainment(), this._trigger("start", t) === !1 ? (this._clear(), !1) : (this._cacheHelperProportions(), e.ui.ddmanager && !n.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this._mouseDrag(t, !0), e.ui.ddmanager && e.ui.ddmanager.dragStart(this, t), !0)
}, _mouseDrag: function (t, n) {
this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute");
if (!n) {
var r = this._uiHash();
if (this._trigger("drag", t, r) === !1)return this._mouseUp({}), !1;
this.position = r.position
}
if (!this.options.axis || this.options.axis != "y")this.helper[0].style.left = this.position.left + "px";
if (!this.options.axis || this.options.axis != "x")this.helper[0].style.top = this.position.top + "px";
return e.ui.ddmanager && e.ui.ddmanager.drag(this, t), !1
}, _mouseStop: function (t) {
var n = !1;
e.ui.ddmanager && !this.options.dropBehaviour && (n = e.ui.ddmanager.drop(this, t)), this.dropped && (n = this.dropped, this.dropped = !1);
var r = this.element[0], i = !1;
while (r && (r = r.parentNode))r == document && (i = !0);
if (!i && this.options.helper === "original")return!1;
if (this.options.revert == "invalid" && !n || this.options.revert == "valid" && n || this.options.revert === !0 || e.isFunction(this.options.revert) && this.options.revert.call(this.element, n)) {
var s = this;
e(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () {
s._trigger("stop", t) !== !1 && s._clear()
})
} else this._trigger("stop", t) !== !1 && this._clear();
return!1
}, _mouseUp: function (t) {
return e("div.ui-draggable-iframeFix").each(function () {
this.parentNode.removeChild(this)
}), e.ui.ddmanager && e.ui.ddmanager.dragStop(this, t), e.ui.mouse.prototype._mouseUp.call(this, t)
}, cancel: function () {
return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), this
}, _getHandle: function (t) {
var n = !this.options.handle || !e(this.options.handle, this.element).length ? !0 : !1;
return e(this.options.handle, this.element).find("*").andSelf().each(function () {
this == t.target && (n = !0)
}), n
}, _createHelper: function (t) {
var n = this.options, r = e.isFunction(n.helper) ? e(n.helper.apply(this.element[0], [t])) : n.helper == "clone" ? this.element.clone().removeAttr("id") : this.element;
return r.parents("body").length || r.appendTo(n.appendTo == "parent" ? this.element[0].parentNode : n.appendTo), r[0] != this.element[0] && !/(fixed|absolute)/.test(r.css("position")) && r.css("position", "absolute"), r
}, _adjustOffsetFromHelper: function (t) {
typeof t == "string" && (t = t.split(" ")), e.isArray(t) && (t = {left: +t[0], top: +t[1] || 0}), "left"in t && (this.offset.click.left = t.left + this.margins.left), "right"in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top"in t && (this.offset.click.top = t.top + this.margins.top), "bottom"in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
}, _getParentOffset: function () {
this.offsetParent = this.helper.offsetParent();
var t = this.offsetParent.offset();
this.cssPosition == "absolute" && this.scrollParent[0] != document && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop());
if (this.offsetParent[0] == document.body || this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() == "html" && e.ui.ie)t = {top: 0, left: 0};
return{top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)}
}, _getRelativeOffset: function () {
if (this.cssPosition == "relative") {
var e = this.element.position();
return{top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(), left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()}
}
return{top: 0, left: 0}
}, _cacheMargins: function () {
this.margins = {left: parseInt(this.element.css("marginLeft"), 10) || 0, top: parseInt(this.element.css("marginTop"), 10) || 0, right: parseInt(this.element.css("marginRight"), 10) || 0, bottom: parseInt(this.element.css("marginBottom"), 10) || 0}
}, _cacheHelperProportions: function () {
this.helperProportions = {width: this.helper.outerWidth(), height: this.helper.outerHeight()}
}, _setContainment: function () {
var t = this.options;
t.containment == "parent" && (t.containment = this.helper[0].parentNode);
if (t.containment == "document" || t.containment == "window")this.containment = [t.containment == "document" ? 0 : e(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, t.containment == "document" ? 0 : e(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, (t.containment == "document" ? 0 : e(window).scrollLeft()) + e(t.containment == "document" ? document : window).width() - this.helperProportions.width - this.margins.left, (t.containment == "document" ? 0 : e(window).scrollTop()) + (e(t.containment == "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
if (!/^(document|window|parent)$/.test(t.containment) && t.containment.constructor != Array) {
var n = e(t.containment), r = n[0];
if (!r)return;
var i = n.offset(), s = e(r).css("overflow") != "hidden";
this.containment = [(parseInt(e(r).css("borderLeftWidth"), 10) || 0) + (parseInt(e(r).css("paddingLeft"), 10) || 0), (parseInt(e(r).css("borderTopWidth"), 10) || 0) + (parseInt(e(r).css("paddingTop"), 10) || 0), (s ? Math.max(r.scrollWidth, r.offsetWidth) : r.offsetWidth) - (parseInt(e(r).css("borderLeftWidth"), 10) || 0) - (parseInt(e(r).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (s ? Math.max(r.scrollHeight, r.offsetHeight) : r.offsetHeight) - (parseInt(e(r).css("borderTopWidth"), 10) || 0) - (parseInt(e(r).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relative_container = n
} else t.containment.constructor == Array && (this.containment = t.containment)
}, _convertPositionTo: function (t, n) {
n || (n = this.position);
var r = t == "absolute" ? 1 : -1, i = this.options, s = this.cssPosition != "absolute" || this.scrollParent[0] != document && !!e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, o = /(html|body)/i.test(s[0].tagName);
return{top: n.top + this.offset.relative.top * r + this.offset.parent.top * r - (this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : o ? 0 : s.scrollTop()) * r, left: n.left + this.offset.relative.left * r + this.offset.parent.left * r - (this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : o ? 0 : s.scrollLeft()) * r}
}, _generatePosition: function (t) {
var n = this.options, r = this.cssPosition != "absolute" || this.scrollParent[0] != document && !!e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, i = /(html|body)/i.test(r[0].tagName), s = t.pageX, o = t.pageY;
if (this.originalPosition) {
var u;
if (this.containment) {
if (this.relative_container) {
var a = this.relative_container.offset();
u = [this.containment[0] + a.left, this.containment[1] + a.top, this.containment[2] + a.left, this.containment[3] + a.top]
} else u = this.containment;
t.pageX - this.offset.click.left < u[0] && (s = u[0] + this.offset.click.left), t.pageY - this.offset.click.top < u[1] && (o = u[1] + this.offset.click.top), t.pageX - this.offset.click.left > u[2] && (s = u[2] + this.offset.click.left), t.pageY - this.offset.click.top > u[3] && (o = u[3] + this.offset.click.top)
}
if (n.grid) {
var f = n.grid[1] ? this.originalPageY + Math.round((o - this.originalPageY) / n.grid[1]) * n.grid[1] : this.originalPageY;
o = u ? f - this.offset.click.top < u[1] || f - this.offset.click.top > u[3] ? f - this.offset.click.top < u[1] ? f + n.grid[1] : f - n.grid[1] : f : f;
var l = n.grid[0] ? this.originalPageX + Math.round((s - this.originalPageX) / n.grid[0]) * n.grid[0] : this.originalPageX;
s = u ? l - this.offset.click.left < u[0] || l - this.offset.click.left > u[2] ? l - this.offset.click.left < u[0] ? l + n.grid[0] : l - n.grid[0] : l : l
}
}
return{top: o - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : i ? 0 : r.scrollTop()), left: s - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : i ? 0 : r.scrollLeft())}
}, _clear: function () {
this.helper.removeClass("ui-draggable-dragging"), this.helper[0] != this.element[0] && !this.cancelHelperRemoval && this.helper.remove(), this.helper = null, this.cancelHelperRemoval = !1
}, _trigger: function (t, n, r) {
return r = r || this._uiHash(), e.ui.plugin.call(this, t, [n, r]), t == "drag" && (this.positionAbs = this._convertPositionTo("absolute")), e.Widget.prototype._trigger.call(this, t, n, r)
}, plugins: {}, _uiHash: function (e) {
return{helper: this.helper, position: this.position, originalPosition: this.originalPosition, offset: this.positionAbs}
}}), e.ui.plugin.add("draggable", "connectToSortable", {start: function (t, n) {
var r = e(this).data("draggable"), i = r.options, s = e.extend({}, n, {item: r.element});
r.sortables = [], e(i.connectToSortable).each(function () {
var n = e.data(this, "sortable");
n && !n.options.disabled && (r.sortables.push({instance: n, shouldRevert: n.options.revert}), n.refreshPositions(), n._trigger("activate", t, s))
})
}, stop: function (t, n) {
var r = e(this).data("draggable"), i = e.extend({}, n, {item: r.element});
e.each(r.sortables, function () {
this.instance.isOver ? (this.instance.isOver = 0, r.cancelHelperRemoval = !0, this.instance.cancelHelperRemoval = !1, this.shouldRevert && (this.instance.options.revert = !0), this.instance._mouseStop(t), this.instance.options.helper = this.instance.options._helper, r.options.helper == "original" && this.instance.currentItem.css({top: "auto", left: "auto"})) : (this.instance.cancelHelperRemoval = !1, this.instance._trigger("deactivate", t, i))
})
}, drag: function (t, n) {
var r = e(this).data("draggable"), i = this, s = function (t) {
var n = this.offset.click.top, r = this.offset.click.left, i = this.positionAbs.top, s = this.positionAbs.left, o = t.height, u = t.width, a = t.top, f = t.left;
return e.ui.isOver(i + n, s + r, a, f, o, u)
};
e.each(r.sortables, function (s) {
var o = !1, u = this;
this.instance.positionAbs = r.positionAbs, this.instance.helperProportions = r.helperProportions, this.instance.offset.click = r.offset.click, this.instance._intersectsWith(this.instance.containerCache) && (o = !0, e.each(r.sortables, function () {
return this.instance.positionAbs = r.positionAbs, this.instance.helperProportions = r.helperProportions, this.instance.offset.click = r.offset.click, this != u && this.instance._intersectsWith(this.instance.containerCache) && e.ui.contains(u.instance.element[0], this.instance.element[0]) && (o = !1), o
})), o ? (this.instance.isOver || (this.instance.isOver = 1, this.instance.currentItem = e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item", !0), this.instance.options._helper = this.instance.options.helper, this.instance.options.helper = function () {
return n.helper[0]
}, t.target = this.instance.currentItem[0], this.instance._mouseCapture(t, !0), this.instance._mouseStart(t, !0, !0), this.instance.offset.click.top = r.offset.click.top, this.instance.offset.click.left = r.offset.click.left, this.instance.offset.parent.left -= r.offset.parent.left - this.instance.offset.parent.left, this.instance.offset.parent.top -= r.offset.parent.top - this.instance.offset.parent.top, r._trigger("toSortable", t), r.dropped = this.instance.element, r.currentItem = r.element, this.instance.fromOutside = r), this.instance.currentItem && this.instance._mouseDrag(t)) : this.instance.isOver && (this.instance.isOver = 0, this.instance.cancelHelperRemoval = !0, this.instance.options.revert = !1, this.instance._trigger("out", t, this.instance._uiHash(this.instance)), this.instance._mouseStop(t, !0), this.instance.options.helper = this.instance.options._helper, this.instance.currentItem.remove(), this.instance.placeholder && this.instance.placeholder.remove(), r._trigger("fromSortable", t), r.dropped = !1)
})
}}), e.ui.plugin.add("draggable", "cursor", {start: function (t, n) {
var r = e("body"), i = e(this).data("draggable").options;
r.css("cursor") && (i._cursor = r.css("cursor")), r.css("cursor", i.cursor)
}, stop: function (t, n) {
var r = e(this).data("draggable").options;
r._cursor && e("body").css("cursor", r._cursor)
}}), e.ui.plugin.add("draggable", "opacity", {start: function (t, n) {
var r = e(n.helper), i = e(this).data("draggable").options;
r.css("opacity") && (i._opacity = r.css("opacity")), r.css("opacity", i.opacity)
}, stop: function (t, n) {
var r = e(this).data("draggable").options;
r._opacity && e(n.helper).css("opacity", r._opacity)
}}), e.ui.plugin.add("draggable", "scroll", {start: function (t, n) {
var r = e(this).data("draggable");
r.scrollParent[0] != document && r.scrollParent[0].tagName != "HTML" && (r.overflowOffset = r.scrollParent.offset())
}, drag: function (t, n) {
var r = e(this).data("draggable"), i = r.options, s = !1;
if (r.scrollParent[0] != document && r.scrollParent[0].tagName != "HTML") {
if (!i.axis || i.axis != "x")r.overflowOffset.top + r.scrollParent[0].offsetHeight - t.pageY < i.scrollSensitivity ? r.scrollParent[0].scrollTop = s = r.scrollParent[0].scrollTop + i.scrollSpeed : t.pageY - r.overflowOffset.top < i.scrollSensitivity && (r.scrollParent[0].scrollTop = s = r.scrollParent[0].scrollTop - i.scrollSpeed);
if (!i.axis || i.axis != "y")r.overflowOffset.left + r.scrollParent[0].offsetWidth - t.pageX < i.scrollSensitivity ? r.scrollParent[0].scrollLeft = s = r.scrollParent[0].scrollLeft + i.scrollSpeed : t.pageX - r.overflowOffset.left < i.scrollSensitivity && (r.scrollParent[0].scrollLeft = s = r.scrollParent[0].scrollLeft - i.scrollSpeed)
} else {
if (!i.axis || i.axis != "x")t.pageY - e(document).scrollTop() < i.scrollSensitivity ? s = e(document).scrollTop(e(document).scrollTop() - i.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < i.scrollSensitivity && (s = e(document).scrollTop(e(document).scrollTop() + i.scrollSpeed));
if (!i.axis || i.axis != "y")t.pageX - e(document).scrollLeft() < i.scrollSensitivity ? s = e(document).scrollLeft(e(document).scrollLeft() - i.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < i.scrollSensitivity && (s = e(document).scrollLeft(e(document).scrollLeft() + i.scrollSpeed))
}
s !== !1 && e.ui.ddmanager && !i.dropBehaviour && e.ui.ddmanager.prepareOffsets(r, t)
}}), e.ui.plugin.add("draggable", "snap", {start: function (t, n) {
var r = e(this).data("draggable"), i = r.options;
r.snapElements = [], e(i.snap.constructor != String ? i.snap.items || ":data(draggable)" : i.snap).each(function () {
var t = e(this), n = t.offset();
this != r.element[0] && r.snapElements.push({item: this, width: t.outerWidth(), height: t.outerHeight(), top: n.top, left: n.left})
})
}, drag: function (t, n) {
var r = e(this).data("draggable"), i = r.options, s = i.snapTolerance, o = n.offset.left, u = o + r.helperProportions.width, a = n.offset.top, f = a + r.helperProportions.height;
for (var l = r.snapElements.length - 1; l >= 0; l--) {
var c = r.snapElements[l].left, h = c + r.snapElements[l].width, p = r.snapElements[l].top, d = p + r.snapElements[l].height;
if (!(c - s < o && o < h + s && p - s < a && a < d + s || c - s < o && o < h + s && p - s < f && f < d + s || c - s < u && u < h + s && p - s < a && a < d + s || c - s < u && u < h + s && p - s < f && f < d + s)) {
r.snapElements[l].snapping && r.options.snap.release && r.options.snap.release.call(r.element, t, e.extend(r._uiHash(), {snapItem: r.snapElements[l].item})), r.snapElements[l].snapping = !1;
continue
}
if (i.snapMode != "inner") {
var v = Math.abs(p - f) <= s, m = Math.abs(d - a) <= s, g = Math.abs(c - u) <= s, y = Math.abs(h - o) <= s;
v && (n.position.top = r._convertPositionTo("relative", {top: p - r.helperProportions.height, left: 0}).top - r.margins.top), m && (n.position.top = r._convertPositionTo("relative", {top: d, left: 0}).top - r.margins.top), g && (n.position.left = r._convertPositionTo("relative", {top: 0, left: c - r.helperProportions.width}).left - r.margins.left), y && (n.position.left = r._convertPositionTo("relative", {top: 0, left: h}).left - r.margins.left)
}
var b = v || m || g || y;
if (i.snapMode != "outer") {
var v = Math.abs(p - a) <= s, m = Math.abs(d - f) <= s, g = Math.abs(c - o) <= s, y = Math.abs(h - u) <= s;
v && (n.position.top = r._convertPositionTo("relative", {top: p, left: 0}).top - r.margins.top), m && (n.position.top = r._convertPositionTo("relative", {top: d - r.helperProportions.height, left: 0}).top - r.margins.top), g && (n.position.left = r._convertPositionTo("relative", {top: 0, left: c}).left - r.margins.left), y && (n.position.left = r._convertPositionTo("relative", {top: 0, left: h - r.helperProportions.width}).left - r.margins.left)
}
!r.snapElements[l].snapping && (v || m || g || y || b) && r.options.snap.snap && r.options.snap.snap.call(r.element, t, e.extend(r._uiHash(), {snapItem: r.snapElements[l].item})), r.snapElements[l].snapping = v || m || g || y || b
}
}}), e.ui.plugin.add("draggable", "stack", {start: function (t, n) {
var r = e(this).data("draggable").options, i = e.makeArray(e(r.stack)).sort(function (t, n) {
return(parseInt(e(t).css("zIndex"), 10) || 0) - (parseInt(e(n).css("zIndex"), 10) || 0)
});
if (!i.length)return;
var s = parseInt(i[0].style.zIndex) || 0;
e(i).each(function (e) {
this.style.zIndex = s + e
}), this[0].style.zIndex = s + i.length
}}), e.ui.plugin.add("draggable", "zIndex", {start: function (t, n) {
var r = e(n.helper), i = e(this).data("draggable").options;
r.css("zIndex") && (i._zIndex = r.css("zIndex")), r.css("zIndex", i.zIndex)
}, stop: function (t, n) {
var r = e(this).data("draggable").options;
r._zIndex && e(n.helper).css("zIndex", r._zIndex)
}})
})(jQuery);
(function (e, t) {
e.widget("ui.droppable", {version: "1.9.2", widgetEventPrefix: "drop", options: {accept: "*", activeClass: !1, addClasses: !0, greedy: !1, hoverClass: !1, scope: "default", tolerance: "intersect"}, _create: function () {
var t = this.options, n = t.accept;
this.isover = 0, this.isout = 1, this.accept = e.isFunction(n) ? n : function (e) {
return e.is(n)
}, this.proportions = {width: this.element[0].offsetWidth, height: this.element[0].offsetHeight}, e.ui.ddmanager.droppables[t.scope] = e.ui.ddmanager.droppables[t.scope] || [], e.ui.ddmanager.droppables[t.scope].push(this), t.addClasses && this.element.addClass("ui-droppable")
}, _destroy: function () {
var t = e.ui.ddmanager.droppables[this.options.scope];
for (var n = 0; n < t.length; n++)t[n] == this && t.splice(n, 1);
this.element.removeClass("ui-droppable ui-droppable-disabled")
}, _setOption: function (t, n) {
t == "accept" && (this.accept = e.isFunction(n) ? n : function (e) {
return e.is(n)
}), e.Widget.prototype._setOption.apply(this, arguments)
}, _activate: function (t) {
var n = e.ui.ddmanager.current;
this.options.activeClass && this.element.addClass(this.options.activeClass), n && this._trigger("activate", t, this.ui(n))
}, _deactivate: function (t) {
var n = e.ui.ddmanager.current;
this.options.activeClass && this.element.removeClass(this.options.activeClass), n && this._trigger("deactivate", t, this.ui(n))
}, _over: function (t) {
var n = e.ui.ddmanager.current;
if (!n || (n.currentItem || n.element)[0] == this.element[0])return;
this.accept.call(this.element[0], n.currentItem || n.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), this._trigger("over", t, this.ui(n)))
}, _out: function (t) {
var n = e.ui.ddmanager.current;
if (!n || (n.currentItem || n.element)[0] == this.element[0])return;
this.accept.call(this.element[0], n.currentItem || n.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("out", t, this.ui(n)))
}, _drop: function (t, n) {
var r = n || e.ui.ddmanager.current;
if (!r || (r.currentItem || r.element)[0] == this.element[0])return!1;
var i = !1;
return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function () {
var t = e.data(this, "droppable");
if (t.options.greedy && !t.options.disabled && t.options.scope == r.options.scope && t.accept.call(t.element[0], r.currentItem || r.element) && e.ui.intersect(r, e.extend(t, {offset: t.element.offset()}), t.options.tolerance))return i = !0, !1
}), i ? !1 : this.accept.call(this.element[0], r.currentItem || r.element) ? (this.options.activeClass && this.element.removeClass(this.options.activeClass), this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", t, this.ui(r)), this.element) : !1
}, ui: function (e) {
return{draggable: e.currentItem || e.element, helper: e.helper, position: e.position, offset: e.positionAbs}
}}), e.ui.intersect = function (t, n, r) {
if (!n.offset)return!1;
var i = (t.positionAbs || t.position.absolute).left, s = i + t.helperProportions.width, o = (t.positionAbs || t.position.absolute).top, u = o + t.helperProportions.height, a = n.offset.left, f = a + n.proportions.width, l = n.offset.top, c = l + n.proportions.height;
switch (r) {
case"fit":
return a <= i && s <= f && l <= o && u <= c;
case"intersect":
return a < i + t.helperProportions.width / 2 && s - t.helperProportions.width / 2 < f && l < o + t.helperProportions.height / 2 && u - t.helperProportions.height / 2 < c;
case"pointer":
var h = (t.positionAbs || t.position.absolute).left + (t.clickOffset || t.offset.click).left, p = (t.positionAbs || t.position.absolute).top + (t.clickOffset || t.offset.click).top, d = e.ui.isOver(p, h, l, a, n.proportions.height, n.proportions.width);
return d;
case"touch":
return(o >= l && o <= c || u >= l && u <= c || o < l && u > c) && (i >= a && i <= f || s >= a && s <= f || i < a && s > f);
default:
return!1
}
}, e.ui.ddmanager = {current: null, droppables: {"default": []}, prepareOffsets: function (t, n) {
var r = e.ui.ddmanager.droppables[t.options.scope] || [], i = n ? n.type : null, s = (t.currentItem || t.element).find(":data(droppable)").andSelf();
e:for (var o = 0; o < r.length; o++) {
if (r[o].options.disabled || t && !r[o].accept.call(r[o].element[0], t.currentItem || t.element))continue;
for (var u = 0; u < s.length; u++)if (s[u] == r[o].element[0]) {
r[o].proportions.height = 0;
continue e
}
r[o].visible = r[o].element.css("display") != "none";
if (!r[o].visible)continue;
i == "mousedown" && r[o]._activate.call(r[o], n), r[o].offset = r[o].element.offset(), r[o].proportions = {width: r[o].element[0].offsetWidth, height: r[o].element[0].offsetHeight}
}
}, drop: function (t, n) {
var r = !1;
return e.each(e.ui.ddmanager.droppables[t.options.scope] || [], function () {
if (!this.options)return;
!this.options.disabled && this.visible && e.ui.intersect(t, this, this.options.tolerance) && (r = this._drop.call(this, n) || r), !this.options.disabled && this.visible && this.accept.call(this.element[0], t.currentItem || t.element) && (this.isout = 1, this.isover = 0, this._deactivate.call(this, n))
}), r
}, dragStart: function (t, n) {
t.element.parentsUntil("body").bind("scroll.droppable", function () {
t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, n)
})
}, drag: function (t, n) {
t.options.refreshPositions && e.ui.ddmanager.prepareOffsets(t, n), e.each(e.ui.ddmanager.droppables[t.options.scope] || [], function () {
if (this.options.disabled || this.greedyChild || !this.visible)return;
var r = e.ui.intersect(t, this, this.options.tolerance), i = !r && this.isover == 1 ? "isout" : r && this.isover == 0 ? "isover" : null;
if (!i)return;
var s;
if (this.options.greedy) {
var o = this.options.scope, u = this.element.parents(":data(droppable)").filter(function () {
return e.data(this, "droppable").options.scope === o
});
u.length && (s = e.data(u[0], "droppable"), s.greedyChild = i == "isover" ? 1 : 0)
}
s && i == "isover" && (s.isover = 0, s.isout = 1, s._out.call(s, n)), this[i] = 1, this[i == "isout" ? "isover" : "isout"] = 0, this[i == "isover" ? "_over" : "_out"].call(this, n), s && i == "isout" && (s.isout = 0, s.isover = 1, s._over.call(s, n))
})
}, dragStop: function (t, n) {
t.element.parentsUntil("body").unbind("scroll.droppable"), t.options.refreshPositions || e.ui.ddmanager.prepareOffsets(t, n)
}}
})(jQuery);
(function (e, t) {
e.widget("ui.resizable", e.ui.mouse, {version: "1.9.2", widgetEventPrefix: "resize", options: {alsoResize: !1, animate: !1, animateDuration: "slow", animateEasing: "swing", aspectRatio: !1, autoHide: !1, containment: !1, ghost: !1, grid: !1, handles: "e,s,se", helper: !1, maxHeight: null, maxWidth: null, minHeight: 10, minWidth: 10, zIndex: 1e3}, _create: function () {
var t = this, n = this.options;
this.element.addClass("ui-resizable"), e.extend(this, {_aspectRatio: !!n.aspectRatio, aspectRatio: n.aspectRatio, originalElement: this.element, _proportionallyResizeElements: [], _helper: n.helper || n.ghost || n.animate ? n.helper || "ui-resizable-helper" : null}), this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position: this.element.css("position"), width: this.element.outerWidth(), height: this.element.outerHeight(), top: this.element.css("top"), left: this.element.css("left")})), this.element = this.element.parent().data("resizable", this.element.data("resizable")), this.elementIsWrapper = !0, this.element.css({marginLeft: this.originalElement.css("marginLeft"), marginTop: this.originalElement.css("marginTop"), marginRight: this.originalElement.css("marginRight"), marginBottom: this.originalElement.css("marginBottom")}), this.originalElement.css({marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0}), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({position: "static", zoom: 1, display: "block"})), this.originalElement.css({margin: this.originalElement.css("margin")}), this._proportionallyResize()), this.handles = n.handles || (e(".ui-resizable-handle", this.element).length ? {n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne", nw: ".ui-resizable-nw"} : "e,s,se");
if (this.handles.constructor == String) {
this.handles == "all" && (this.handles = "n,e,s,w,se,sw,ne,nw");
var r = this.handles.split(",");
this.handles = {};
for (var i = 0; i < r.length; i++) {
var s = e.trim(r[i]), o = "ui-resizable-" + s, u = e('<div class="ui-resizable-handle ' + o + '"></div>');
u.css({zIndex: n.zIndex}), "se" == s && u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[s] = ".ui-resizable-" + s, this.element.append(u)
}
}
this._renderAxis = function (t) {
t = t || this.element;
for (var n in this.handles) {
this.handles[n].constructor == String && (this.handles[n] = e(this.handles[n], this.element).show());
if (this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i)) {
var r = e(this.handles[n], this.element), i = 0;
i = /sw|ne|nw|se|n|s/.test(n) ? r.outerHeight() : r.outerWidth();
var s = ["padding", /ne|nw|n/.test(n) ? "Top" : /se|sw|s/.test(n) ? "Bottom" : /^e$/.test(n) ? "Right" : "Left"].join("");
t.css(s, i), this._proportionallyResize()
}
if (!e(this.handles[n]).length)continue
}
}, this._renderAxis(this.element), this._handles = e(".ui-resizable-handle", this.element).disableSelection(), this._handles.mouseover(function () {
if (!t.resizing) {
if (this.className)var e = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
t.axis = e && e[1] ? e[1] : "se"
}
}), n.autoHide && (this._handles.hide(), e(this.element).addClass("ui-resizable-autohide").mouseenter(function () {
if (n.disabled)return;
e(this).removeClass("ui-resizable-autohide"), t._handles.show()
}).mouseleave(function () {
if (n.disabled)return;
t.resizing || (e(this).addClass("ui-resizable-autohide"), t._handles.hide())
})), this._mouseInit()
}, _destroy: function () {
this._mouseDestroy();
var t = function (t) {
e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()
};
if (this.elementIsWrapper) {
t(this.element);
var n = this.element;
this.originalElement.css({position: n.css("position"), width: n.outerWidth(), height: n.outerHeight(), top: n.css("top"), left: n.css("left")}).insertAfter(n), n.remove()
}
return this.originalElement.css("resize", this.originalResizeStyle), t(this.originalElement), this
}, _mouseCapture: function (t) {
var n = !1;
for (var r in this.handles)e(this.handles[r])[0] == t.target && (n = !0);
return!this.options.disabled && n
}, _mouseStart: function (t) {
var r = this.options, i = this.element.position(), s = this.element;
this.resizing = !0, this.documentScroll = {top: e(document).scrollTop(), left: e(document).scrollLeft()}, (s.is(".ui-draggable") || /absolute/.test(s.css("position"))) && s.css({position: "absolute", top: i.top, left: i.left}), this._renderProxy();
var o = n(this.helper.css("left")), u = n(this.helper.css("top"));
r.containment && (o += e(r.containment).scrollLeft() || 0, u += e(r.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = {left: o, top: u}, this.size = this._helper ? {width: s.outerWidth(), height: s.outerHeight()} : {width: s.width(), height: s.height()}, this.originalSize = this._helper ? {width: s.outerWidth(), height: s.outerHeight()} : {width: s.width(), height: s.height()}, this.originalPosition = {left: o, top: u}, this.sizeDiff = {width: s.outerWidth() - s.width(), height: s.outerHeight() - s.height()}, this.originalMousePosition = {left: t.pageX, top: t.pageY}, this.aspectRatio = typeof r.aspectRatio == "number" ? r.aspectRatio : this.originalSize.width / this.originalSize.height || 1;
var a = e(".ui-resizable-" + this.axis).css("cursor");
return e("body").css("cursor", a == "auto" ? this.axis + "-resize" : a), s.addClass("ui-resizable-resizing"), this._propagate("start", t), !0
}, _mouseDrag: function (e) {
var t = this.helper, n = this.options, r = {}, i = this, s = this.originalMousePosition, o = this.axis, u = e.pageX - s.left || 0, a = e.pageY - s.top || 0, f = this._change[o];
if (!f)return!1;
var l = f.apply(this, [e, u, a]);
this._updateVirtualBoundaries(e.shiftKey);
if (this._aspectRatio || e.shiftKey)l = this._updateRatio(l, e);
return l = this._respectSize(l, e), this._propagate("resize", e), t.css({top: this.position.top + "px", left: this.position.left + "px", width: this.size.width + "px", height: this.size.height + "px"}), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), this._updateCache(l), this._trigger("resize", e, this.ui()), !1
}, _mouseStop: function (t) {
this.resizing = !1;
var n = this.options, r = this;
if (this._helper) {
var i = this._proportionallyResizeElements, s = i.length && /textarea/i.test(i[0].nodeName), o = s && e.ui.hasScroll(i[0], "left") ? 0 : r.sizeDiff.height, u = s ? 0 : r.sizeDiff.width, a = {width: r.helper.width() - u, height: r.helper.height() - o}, f = parseInt(r.element.css("left"), 10) + (r.position.left - r.originalPosition.left) || null, l = parseInt(r.element.css("top"), 10) + (r.position.top - r.originalPosition.top) || null;
n.animate || this.element.css(e.extend(a, {top: l, left: f})), r.helper.height(r.size.height), r.helper.width(r.size.width), this._helper && !n.animate && this._proportionallyResize()
}
return e("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), this._propagate("stop", t), this._helper && this.helper.remove(), !1
}, _updateVirtualBoundaries: function (e) {
var t = this.options, n, i, s, o, u;
u = {minWidth: r(t.minWidth) ? t.minWidth : 0, maxWidth: r(t.maxWidth) ? t.maxWidth : Infinity, minHeight: r(t.minHeight) ? t.minHeight : 0, maxHeight: r(t.maxHeight) ? t.maxHeight : Infinity};
if (this._aspectRatio || e)n = u.minHeight * this.aspectRatio, s = u.minWidth / this.aspectRatio, i = u.maxHeight * this.aspectRatio, o = u.maxWidth / this.aspectRatio, n > u.minWidth && (u.minWidth = n), s > u.minHeight && (u.minHeight = s), i < u.maxWidth && (u.maxWidth = i), o < u.maxHeight && (u.maxHeight = o);
this._vBoundaries = u
}, _updateCache: function (e) {
var t = this.options;
this.offset = this.helper.offset(), r(e.left) && (this.position.left = e.left), r(e.top) && (this.position.top = e.top), r(e.height) && (this.size.height = e.height), r(e.width) && (this.size.width = e.width)
}, _updateRatio: function (e, t) {
var n = this.options, i = this.position, s = this.size, o = this.axis;
return r(e.height) ? e.width = e.height * this.aspectRatio : r(e.width) && (e.height = e.width / this.aspectRatio), o == "sw" && (e.left = i.left + (s.width - e.width), e.top = null), o == "nw" && (e.top = i.top + (s.height - e.height), e.left = i.left + (s.width - e.width)), e
}, _respectSize: function (e, t) {
var n = this.helper, i = this._vBoundaries, s = this._aspectRatio || t.shiftKey, o = this.axis, u = r(e.width) && i.maxWidth && i.maxWidth < e.width, a = r(e.height) && i.maxHeight && i.maxHeight < e.height, f = r(e.width) && i.minWidth && i.minWidth > e.width, l = r(e.height) && i.minHeight && i.minHeight > e.height;
f && (e.width = i.minWidth), l && (e.height = i.minHeight), u && (e.width = i.maxWidth), a && (e.height = i.maxHeight);
var c = this.originalPosition.left + this.originalSize.width, h = this.position.top + this.size.height, p = /sw|nw|w/.test(o), d = /nw|ne|n/.test(o);
f && p && (e.left = c - i.minWidth), u && p && (e.left = c - i.maxWidth), l && d && (e.top = h - i.minHeight), a && d && (e.top = h - i.maxHeight);
var v = !e.width && !e.height;
return v && !e.left && e.top ? e.top = null : v && !e.top && e.left && (e.left = null), e
}, _proportionallyResize: function () {
var t = this.options;
if (!this._proportionallyResizeElements.length)return;
var n = this.helper || this.element;
for (var r = 0; r < this._proportionallyResizeElements.length; r++) {
var i = this._proportionallyResizeElements[r];
if (!this.borderDif) {
var s = [i.css("borderTopWidth"), i.css("borderRightWidth"), i.css("borderBottomWidth"), i.css("borderLeftWidth")], o = [i.css("paddingTop"), i.css("paddingRight"), i.css("paddingBottom"), i.css("paddingLeft")];
this.borderDif = e.map(s, function (e, t) {
var n = parseInt(e, 10) || 0, r = parseInt(o[t], 10) || 0;
return n + r
})
}
i.css({height: n.height() - this.borderDif[0] - this.borderDif[2] || 0, width: n.width() - this.borderDif[1] - this.borderDif[3] || 0})
}
}, _renderProxy: function () {
var t = this.element, n = this.options;
this.elementOffset = t.offset();
if (this._helper) {
this.helper = this.helper || e('<div style="overflow:hidden;"></div>');
var r = e.ui.ie6 ? 1 : 0, i = e.ui.ie6 ? 2 : -1;
this.helper.addClass(this._helper).css({width: this.element.outerWidth() + i, height: this.element.outerHeight() + i, position: "absolute", left: this.elementOffset.left - r + "px", top: this.elementOffset.top - r + "px", zIndex: ++n.zIndex}), this.helper.appendTo("body").disableSelection()
} else this.helper = this.element
}, _change: {e: function (e, t, n) {
return{width: this.originalSize.width + t}
}, w: function (e, t, n) {
var r = this.options, i = this.originalSize, s = this.originalPosition;
return{left: s.left + t, width: i.width - t}
}, n: function (e, t, n) {
var r = this.options, i = this.originalSize, s = this.originalPosition;
return{top: s.top + n, height: i.height - n}
}, s: function (e, t, n) {
return{height: this.originalSize.height + n}
}, se: function (t, n, r) {
return e.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [t, n, r]))
}, sw: function (t, n, r) {
return e.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [t, n, r]))
}, ne: function (t, n, r) {
return e.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [t, n, r]))
}, nw: function (t, n, r) {
return e.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [t, n, r]))
}}, _propagate: function (t, n) {
e.ui.plugin.call(this, t, [n, this.ui()]), t != "resize" && this._trigger(t, n, this.ui())
}, plugins: {}, ui: function () {
return{originalElement: this.originalElement, element: this.element, helper: this.helper, position: this.position, size: this.size, originalSize: this.originalSize, originalPosition: this.originalPosition}
}}), e.ui.plugin.add("resizable", "alsoResize", {start: function (t, n) {
var r = e(this).data("resizable"), i = r.options, s = function (t) {
e(t).each(function () {
var t = e(this);
t.data("resizable-alsoresize", {width: parseInt(t.width(), 10), height: parseInt(t.height(), 10), left: parseInt(t.css("left"), 10), top: parseInt(t.css("top"), 10)})
})
};
typeof i.alsoResize == "object" && !i.alsoResize.parentNode ? i.alsoResize.length ? (i.alsoResize = i.alsoResize[0], s(i.alsoResize)) : e.each(i.alsoResize, function (e) {
s(e)
}) : s(i.alsoResize)
}, resize: function (t, n) {
var r = e(this).data("resizable"), i = r.options, s = r.originalSize, o = r.originalPosition, u = {height: r.size.height - s.height || 0, width: r.size.width - s.width || 0, top: r.position.top - o.top || 0, left: r.position.left - o.left || 0}, a = function (t, r) {
e(t).each(function () {
var t = e(this), i = e(this).data("resizable-alsoresize"), s = {}, o = r && r.length ? r : t.parents(n.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
e.each(o, function (e, t) {
var n = (i[t] || 0) + (u[t] || 0);
n && n >= 0 && (s[t] = n || null)
}), t.css(s)
})
};
typeof i.alsoResize == "object" && !i.alsoResize.nodeType ? e.each(i.alsoResize, function (e, t) {
a(e, t)
}) : a(i.alsoResize)
}, stop: function (t, n) {
e(this).removeData("resizable-alsoresize")
}}), e.ui.plugin.add("resizable", "animate", {stop: function (t, n) {
var r = e(this).data("resizable"), i = r.options, s = r._proportionallyResizeElements, o = s.length && /textarea/i.test(s[0].nodeName), u = o && e.ui.hasScroll(s[0], "left") ? 0 : r.sizeDiff.height, a = o ? 0 : r.sizeDiff.width, f = {width: r.size.width - a, height: r.size.height - u}, l = parseInt(r.element.css("left"), 10) + (r.position.left - r.originalPosition.left) || null, c = parseInt(r.element.css("top"), 10) + (r.position.top - r.originalPosition.top) || null;
r.element.animate(e.extend(f, c && l ? {top: c, left: l} : {}), {duration: i.animateDuration, easing: i.animateEasing, step: function () {
var n = {width: parseInt(r.element.css("width"), 10), height: parseInt(r.element.css("height"), 10), top: parseInt(r.element.css("top"), 10), left: parseInt(r.element.css("left"), 10)};
s && s.length && e(s[0]).css({width: n.width, height: n.height}), r._updateCache(n), r._propagate("resize", t)
}})
}}), e.ui.plugin.add("resizable", "containment", {start: function (t, r) {
var i = e(this).data("resizable"), s = i.options, o = i.element, u = s.containment, a = u instanceof e ? u.get(0) : /parent/.test(u) ? o.parent().get(0) : u;
if (!a)return;
i.containerElement = e(a);
if (/document/.test(u) || u == document)i.containerOffset = {left: 0, top: 0}, i.containerPosition = {left: 0, top: 0}, i.parentData = {element: e(document), left: 0, top: 0, width: e(document).width(), height: e(document).height() || document.body.parentNode.scrollHeight}; else {
var f = e(a), l = [];
e(["Top", "Right", "Left", "Bottom"]).each(function (e, t) {
l[e] = n(f.css("padding" + t))
}), i.containerOffset = f.offset(), i.containerPosition = f.position(), i.containerSize = {height: f.innerHeight() - l[3], width: f.innerWidth() - l[1]};
var c = i.containerOffset, h = i.containerSize.height, p = i.containerSize.width, d = e.ui.hasScroll(a, "left") ? a.scrollWidth : p, v = e.ui.hasScroll(a) ? a.scrollHeight : h;
i.parentData = {element: a, left: c.left, top: c.top, width: d, height: v}
}
}, resize: function (t, n) {
var r = e(this).data("resizable"), i = r.options, s = r.containerSize, o = r.containerOffset, u = r.size, a = r.position, f = r._aspectRatio || t.shiftKey, l = {top: 0, left: 0}, c = r.containerElement;
c[0] != document && /static/.test(c.css("position")) && (l = o), a.left < (r._helper ? o.left : 0) && (r.size.width = r.size.width + (r._helper ? r.position.left - o.left : r.position.left - l.left), f && (r.size.height = r.size.width / r.aspectRatio), r.position.left = i.helper ? o.left : 0), a.top < (r._helper ? o.top : 0) && (r.size.height = r.size.height + (r._helper ? r.position.top - o.top : r.position.top), f && (r.size.width = r.size.height * r.aspectRatio), r.position.top = r._helper ? o.top : 0), r.offset.left = r.parentData.left + r.position.left, r.offset.top = r.parentData.top + r.position.top;
var h = Math.abs((r._helper ? r.offset.left - l.left : r.offset.left - l.left) + r.sizeDiff.width), p = Math.abs((r._helper ? r.offset.top - l.top : r.offset.top - o.top) + r.sizeDiff.height), d = r.containerElement.get(0) == r.element.parent().get(0), v = /relative|absolute/.test(r.containerElement.css("position"));
d && v && (h -= r.parentData.left), h + r.size.width >= r.parentData.width && (r.size.width = r.parentData.width - h, f && (r.size.height = r.size.width / r.aspectRatio)), p + r.size.height >= r.parentData.height && (r.size.height = r.parentData.height - p, f && (r.size.width = r.size.height * r.aspectRatio))
}, stop: function (t, n) {
var r = e(this).data("resizable"), i = r.options, s = r.position, o = r.containerOffset, u = r.containerPosition, a = r.containerElement, f = e(r.helper), l = f.offset(), c = f.outerWidth() - r.sizeDiff.width, h = f.outerHeight() - r.sizeDiff.height;
r._helper && !i.animate && /relative/.test(a.css("position")) && e(this).css({left: l.left - u.left - o.left, width: c, height: h}), r._helper && !i.animate && /static/.test(a.css("position")) && e(this).css({left: l.left - u.left - o.left, width: c, height: h})
}}), e.ui.plugin.add("resizable", "ghost", {start: function (t, n) {
var r = e(this).data("resizable"), i = r.options, s = r.size;
r.ghost = r.originalElement.clone(), r.ghost.css({opacity: .25, display: "block", position: "relative", height: s.height, width: s.width, margin: 0, left: 0, top: 0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost == "string" ? i.ghost : ""), r.ghost.appendTo(r.helper)
}, resize: function (t, n) {
var r = e(this).data("resizable"), i = r.options;
r.ghost && r.ghost.css({position: "relative", height: r.size.height, width: r.size.width})
}, stop: function (t, n) {
var r = e(this).data("resizable"), i = r.options;
r.ghost && r.helper && r.helper.get(0).removeChild(r.ghost.get(0))
}}), e.ui.plugin.add("resizable", "grid", {resize: function (t, n) {
var r = e(this).data("resizable"), i = r.options, s = r.size, o = r.originalSize, u = r.originalPosition, a = r.axis, f = i._aspectRatio || t.shiftKey;
i.grid = typeof i.grid == "number" ? [i.grid, i.grid] : i.grid;
var l = Math.round((s.width - o.width) / (i.grid[0] || 1)) * (i.grid[0] || 1), c = Math.round((s.height - o.height) / (i.grid[1] || 1)) * (i.grid[1] || 1);
/^(se|s|e)$/.test(a) ? (r.size.width = o.width + l, r.size.height = o.height + c) : /^(ne)$/.test(a) ? (r.size.width = o.width + l, r.size.height = o.height + c, r.position.top = u.top - c) : /^(sw)$/.test(a) ? (r.size.width = o.width + l, r.size.height = o.height + c, r.position.left = u.left - l) : (r.size.width = o.width + l, r.size.height = o.height + c, r.position.top = u.top - c, r.position.left = u.left - l)
}});
var n = function (e) {
return parseInt(e, 10) || 0
}, r = function (e) {
return!isNaN(parseInt(e, 10))
}
})(jQuery);
(function (e, t) {
e.widget("ui.selectable", e.ui.mouse, {version: "1.9.2", options: {appendTo: "body", autoRefresh: !0, distance: 0, filter: "*", tolerance: "touch"}, _create: function () {
var t = this;
this.element.addClass("ui-selectable"), this.dragged = !1;
var n;
this.refresh = function () {
n = e(t.options.filter, t.element[0]), n.addClass("ui-selectee"), n.each(function () {
var t = e(this), n = t.offset();
e.data(this, "selectable-item", {element: this, $element: t, left: n.left, top: n.top, right: n.left + t.outerWidth(), bottom: n.top + t.outerHeight(), startselected: !1, selected: t.hasClass("ui-selected"), selecting: t.hasClass("ui-selecting"), unselecting: t.hasClass("ui-unselecting")})
})
}, this.refresh(), this.selectees = n.addClass("ui-selectee"), this._mouseInit(), this.helper = e("<div class='ui-selectable-helper'></div>")
}, _destroy: function () {
this.selectees.removeClass("ui-selectee").removeData("selectable-item"), this.element.removeClass("ui-selectable ui-selectable-disabled"), this._mouseDestroy()
}, _mouseStart: function (t) {
var n = this;
this.opos = [t.pageX, t.pageY];
if (this.options.disabled)return;
var r = this.options;
this.selectees = e(r.filter, this.element[0]), this._trigger("start", t), e(r.appendTo).append(this.helper), this.helper.css({left: t.clientX, top: t.clientY, width: 0, height: 0}), r.autoRefresh && this.refresh(), this.selectees.filter(".ui-selected").each(function () {
var r = e.data(this, "selectable-item");
r.startselected = !0, !t.metaKey && !t.ctrlKey && (r.$element.removeClass("ui-selected"), r.selected = !1, r.$element.addClass("ui-unselecting"), r.unselecting = !0, n._trigger("unselecting", t, {unselecting: r.element}))
}), e(t.target).parents().andSelf().each(function () {
var r = e.data(this, "selectable-item");
if (r) {
var i = !t.metaKey && !t.ctrlKey || !r.$element.hasClass("ui-selected");
return r.$element.removeClass(i ? "ui-unselecting" : "ui-selected").addClass(i ? "ui-selecting" : "ui-unselecting"), r.unselecting = !i, r.selecting = i, r.selected = i, i ? n._trigger("selecting", t, {selecting: r.element}) : n._trigger("unselecting", t, {unselecting: r.element}), !1
}
})
}, _mouseDrag: function (t) {
var n = this;
this.dragged = !0;
if (this.options.disabled)return;
var r = this.options, i = this.opos[0], s = this.opos[1], o = t.pageX, u = t.pageY;
if (i > o) {
var a = o;
o = i, i = a
}
if (s > u) {
var a = u;
u = s, s = a
}
return this.helper.css({left: i, top: s, width: o - i, height: u - s}), this.selectees.each(function () {
var a = e.data(this, "selectable-item");
if (!a || a.element == n.element[0])return;
var f = !1;
r.tolerance == "touch" ? f = !(a.left > o || a.right < i || a.top > u || a.bottom < s) : r.tolerance == "fit" && (f = a.left > i && a.right < o && a.top > s && a.bottom < u), f ? (a.selected && (a.$element.removeClass("ui-selected"), a.selected = !1), a.unselecting && (a.$element.removeClass("ui-unselecting"), a.unselecting = !1), a.selecting || (a.$element.addClass("ui-selecting"), a.selecting = !0, n._trigger("selecting", t, {selecting: a.element}))) : (a.selecting && ((t.metaKey || t.ctrlKey) && a.startselected ? (a.$element.removeClass("ui-selecting"), a.selecting = !1, a.$element.addClass("ui-selected"), a.selected = !0) : (a.$element.removeClass("ui-selecting"), a.selecting = !1, a.startselected && (a.$element.addClass("ui-unselecting"), a.unselecting = !0), n._trigger("unselecting", t, {unselecting: a.element}))), a.selected && !t.metaKey && !t.ctrlKey && !a.startselected && (a.$element.removeClass("ui-selected"), a.selected = !1, a.$element.addClass("ui-unselecting"), a.unselecting = !0, n._trigger("unselecting", t, {unselecting: a.element})))
}), !1
}, _mouseStop: function (t) {
var n = this;
this.dragged = !1;
var r = this.options;
return e(".ui-unselecting", this.element[0]).each(function () {
var r = e.data(this, "selectable-item");
r.$element.removeClass("ui-unselecting"), r.unselecting = !1, r.startselected = !1, n._trigger("unselected", t, {unselected: r.element})
}), e(".ui-selecting", this.element[0]).each(function () {
var r = e.data(this, "selectable-item");
r.$element.removeClass("ui-selecting").addClass("ui-selected"), r.selecting = !1, r.selected = !0, r.startselected = !0, n._trigger("selected", t, {selected: r.element})
}), this._trigger("stop", t), this.helper.remove(), !1
}})
})(jQuery);
(function (e, t) {
e.widget("ui.sortable", e.ui.mouse, {version: "1.9.2", widgetEventPrefix: "sort", ready: !1, options: {appendTo: "parent", axis: !1, connectWith: !1, containment: !1, cursor: "auto", cursorAt: !1, dropOnEmpty: !0, forcePlaceholderSize: !1, forceHelperSize: !1, grid: !1, handle: !1, helper: "original", items: "> *", opacity: !1, placeholder: !1, revert: !1, scroll: !0, scrollSensitivity: 20, scrollSpeed: 20, scope: "default", tolerance: "intersect", zIndex: 1e3}, _create: function () {
var e = this.options;
this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), this.floating = this.items.length ? e.axis === "x" || /left|right/.test(this.items[0].item.css("float")) || /inline|table-cell/.test(this.items[0].item.css("display")) : !1, this.offset = this.element.offset(), this._mouseInit(), this.ready = !0
}, _destroy: function () {
this.element.removeClass("ui-sortable ui-sortable-disabled"), this._mouseDestroy();
for (var e = this.items.length - 1; e >= 0; e--)this.items[e].item.removeData(this.widgetName + "-item");
return this
}, _setOption: function (t, n) {
t === "disabled" ? (this.options[t] = n, this.widget().toggleClass("ui-sortable-disabled", !!n)) : e.Widget.prototype._setOption.apply(this, arguments)
}, _mouseCapture: function (t, n) {
var r = this;
if (this.reverting)return!1;
if (this.options.disabled || this.options.type == "static")return!1;
this._refreshItems(t);
var i = null, s = e(t.target).parents().each(function () {
if (e.data(this, r.widgetName + "-item") == r)return i = e(this), !1
});
e.data(t.target, r.widgetName + "-item") == r && (i = e(t.target));
if (!i)return!1;
if (this.options.handle && !n) {
var o = !1;
e(this.options.handle, i).find("*").andSelf().each(function () {
this == t.target && (o = !0)
});
if (!o)return!1
}
return this.currentItem = i, this._removeCurrentsFromItems(), !0
}, _mouseStart: function (t, n, r) {
var i = this.options;
this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(t), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = {top: this.offset.top - this.margins.top, left: this.offset.left - this.margins.left}, e.extend(this.offset, {click: {left: t.pageX - this.offset.left, top: t.pageY - this.offset.top}, parent: this._getParentOffset(), relative: this._getRelativeOffset()}), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(t), this.originalPageX = t.pageX, this.originalPageY = t.pageY, i.cursorAt && this._adjustOffsetFromHelper(i.cursorAt), this.domPosition = {prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0]}, this.helper[0] != this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), i.containment && this._setContainment(), i.cursor && (e("body").css("cursor") && (this._storedCursor = e("body").css("cursor")), e("body").css("cursor", i.cursor)), i.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", i.opacity)), i.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", i.zIndex)), this.scrollParent[0] != document && this.scrollParent[0].tagName != "HTML" && (this.overflowOffset = this.scrollParent.offset()), this._trigger("start", t, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions();
if (!r)for (var s = this.containers.length - 1; s >= 0; s--)this.containers[s]._trigger("activate", t, this._uiHash(this));
return e.ui.ddmanager && (e.ui.ddmanager.current = this), e.ui.ddmanager && !i.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(t), !0
}, _mouseDrag: function (t) {
this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs);
if (this.options.scroll) {
var n = this.options, r = !1;
this.scrollParent[0] != document && this.scrollParent[0].tagName != "HTML" ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - t.pageY < n.scrollSensitivity ? this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop + n.scrollSpeed : t.pageY - this.overflowOffset.top < n.scrollSensitivity && (this.scrollParent[0].scrollTop = r = this.scrollParent[0].scrollTop - n.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - t.pageX < n.scrollSensitivity ? this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft + n.scrollSpeed : t.pageX - this.overflowOffset.left < n.scrollSensitivity && (this.scrollParent[0].scrollLeft = r = this.scrollParent[0].scrollLeft - n.scrollSpeed)) : (t.pageY - e(document).scrollTop() < n.scrollSensitivity ? r = e(document).scrollTop(e(document).scrollTop() - n.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < n.scrollSensitivity && (r = e(document).scrollTop(e(document).scrollTop() + n.scrollSpeed)), t.pageX - e(document).scrollLeft() < n.scrollSensitivity ? r = e(document).scrollLeft(e(document).scrollLeft() - n.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < n.scrollSensitivity && (r = e(document).scrollLeft(e(document).scrollLeft() + n.scrollSpeed))), r !== !1 && e.ui.ddmanager && !n.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t)
}
this.positionAbs = this._convertPositionTo("absolute");
if (!this.options.axis || this.options.axis != "y")this.helper[0].style.left = this.position.left + "px";
if (!this.options.axis || this.options.axis != "x")this.helper[0].style.top = this.position.top + "px";
for (var i = this.items.length - 1; i >= 0; i--) {
var s = this.items[i], o = s.item[0], u = this._intersectsWithPointer(s);
if (!u)continue;
if (s.instance !== this.currentContainer)continue;
if (o != this.currentItem[0] && this.placeholder[u == 1 ? "next" : "prev"]()[0] != o && !e.contains(this.placeholder[0], o) && (this.options.type == "semi-dynamic" ? !e.contains(this.element[0], o) : !0)) {
this.direction = u == 1 ? "down" : "up";
if (this.options.tolerance != "pointer" && !this._intersectsWithSides(s))break;
this._rearrange(t, s), this._trigger("change", t, this._uiHash());
break
}
}
return this._contactContainers(t), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), this._trigger("sort", t, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1
}, _mouseStop: function (t, n) {
if (!t)return;
e.ui.ddmanager && !this.options.dropBehaviour && e.ui.ddmanager.drop(this, t);
if (this.options.revert) {
var r = this, i = this.placeholder.offset();
this.reverting = !0, e(this.helper).animate({left: i.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] == document.body ? 0 : this.offsetParent[0].scrollLeft), top: i.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] == document.body ? 0 : this.offsetParent[0].scrollTop)}, parseInt(this.options.revert, 10) || 500, function () {
r._clear(t)
})
} else this._clear(t, n);
return!1
}, cancel: function () {
if (this.dragging) {
this._mouseUp({target: null}), this.options.helper == "original" ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
for (var t = this.containers.length - 1; t >= 0; t--)this.containers[t]._trigger("deactivate", null, this._uiHash(this)), this.containers[t].containerCache.over && (this.containers[t]._trigger("out", null, this._uiHash(this)), this.containers[t].containerCache.over = 0)
}
return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.options.helper != "original" && this.helper && this.helper[0].parentNode && this.helper.remove(), e.extend(this, {helper: null, dragging: !1, reverting: !1, _noFinalSort: null}), this.domPosition.prev ? e(this.domPosition.prev).after(this.currentItem) : e(this.domPosition.parent).prepend(this.currentItem)), this
}, serialize: function (t) {
var n = this._getItemsAsjQuery(t && t.connected), r = [];
return t = t || {}, e(n).each(function () {
var n = (e(t.item || this).attr(t.attribute || "id") || "").match(t.expression || /(.+)[-=_](.+)/);
n && r.push((t.key || n[1] + "[]") + "=" + (t.key && t.expression ? n[1] : n[2]))
}), !r.length && t.key && r.push(t.key + "="), r.join("&")
}, toArray: function (t) {
var n = this._getItemsAsjQuery(t && t.connected), r = [];
return t = t || {}, n.each(function () {
r.push(e(t.item || this).attr(t.attribute || "id") || "")
}), r
}, _intersectsWith: function (e) {
var t = this.positionAbs.left, n = t + this.helperProportions.width, r = this.positionAbs.top, i = r + this.helperProportions.height, s = e.left, o = s + e.width, u = e.top, a = u + e.height, f = this.offset.click.top, l = this.offset.click.left, c = r + f > u && r + f < a && t + l > s && t + l < o;
return this.options.tolerance == "pointer" || this.options.forcePointerForContainers || this.options.tolerance != "pointer" && this.helperProportions[this.floating ? "width" : "height"] > e[this.floating ? "width" : "height"] ? c : s < t + this.helperProportions.width / 2 && n - this.helperProportions.width / 2 < o && u < r + this.helperProportions.height / 2 && i - this.helperProportions.height / 2 < a
}, _intersectsWithPointer: function (t) {
var n = this.options.axis === "x" || e.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, t.top, t.height), r = this.options.axis === "y" || e.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, t.left, t.width), i = n && r, s = this._getDragVerticalDirection(), o = this._getDragHorizontalDirection();
return i ? this.floating ? o && o == "right" || s == "down" ? 2 : 1 : s && (s == "down" ? 2 : 1) : !1
}, _intersectsWithSides: function (t) {
var n = e.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, t.top + t.height / 2, t.height), r = e.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, t.left + t.width / 2, t.width), i = this._getDragVerticalDirection(), s = this._getDragHorizontalDirection();
return this.floating && s ? s == "right" && r || s == "left" && !r : i && (i == "down" && n || i == "up" && !n)
}, _getDragVerticalDirection: function () {
var e = this.positionAbs.top - this.lastPositionAbs.top;
return e != 0 && (e > 0 ? "down" : "up")
}, _getDragHorizontalDirection: function () {
var e = this.positionAbs.left - this.lastPositionAbs.left;
return e != 0 && (e > 0 ? "right" : "left")
}, refresh: function (e) {
return this._refreshItems(e), this.refreshPositions(), this
}, _connectWith: function () {
var e = this.options;
return e.connectWith.constructor == String ? [e.connectWith] : e.connectWith
}, _getItemsAsjQuery: function (t) {
var n = [], r = [], i = this._connectWith();
if (i && t)for (var s = i.length - 1; s >= 0; s--) {
var o = e(i[s]);
for (var u = o.length - 1; u >= 0; u--) {
var a = e.data(o[u], this.widgetName);
a && a != this && !a.options.disabled && r.push([e.isFunction(a.options.items) ? a.options.items.call(a.element) : e(a.options.items, a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), a])
}
}
r.push([e.isFunction(this.options.items) ? this.options.items.call(this.element, null, {options: this.options, item: this.currentItem}) : e(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);
for (var s = r.length - 1; s >= 0; s--)r[s][0].each(function () {
n.push(this)
});
return e(n)
}, _removeCurrentsFromItems: function () {
var t = this.currentItem.find(":data(" + this.widgetName + "-item)");
this.items = e.grep(this.items, function (e) {
for (var n = 0; n < t.length; n++)if (t[n] == e.item[0])return!1;
return!0
})
}, _refreshItems: function (t) {
this.items = [], this.containers = [this];
var n = this.items, r = [
[e.isFunction(this.options.items) ? this.options.items.call(this.element[0], t, {item: this.currentItem}) : e(this.options.items, this.element), this]
], i = this._connectWith();
if (i && this.ready)for (var s = i.length - 1; s >= 0; s--) {
var o = e(i[s]);
for (var u = o.length - 1; u >= 0; u--) {
var a = e.data(o[u], this.widgetName);
a && a != this && !a.options.disabled && (r.push([e.isFunction(a.options.items) ? a.options.items.call(a.element[0], t, {item: this.currentItem}) : e(a.options.items, a.element), a]), this.containers.push(a))
}
}
for (var s = r.length - 1; s >= 0; s--) {
var f = r[s][1], l = r[s][0];
for (var u = 0, c = l.length; u < c; u++) {
var h = e(l[u]);
h.data(this.widgetName + "-item", f), n.push({item: h, instance: f, width: 0, height: 0, left: 0, top: 0})
}
}
}, refreshPositions: function (t) {
this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
for (var n = this.items.length - 1; n >= 0; n--) {
var r = this.items[n];
if (r.instance != this.currentContainer && this.currentContainer && r.item[0] != this.currentItem[0])continue;
var i = this.options.toleranceElement ? e(this.options.toleranceElement, r.item) : r.item;
t || (r.width = i.outerWidth(), r.height = i.outerHeight());
var s = i.offset();
r.left = s.left, r.top = s.top
}
if (this.options.custom && this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this); else for (var n = this.containers.length - 1; n >= 0; n--) {
var s = this.containers[n].element.offset();
this.containers[n].containerCache.left = s.left, this.containers[n].containerCache.top = s.top, this.containers[n].containerCache.width = this.containers[n].element.outerWidth(), this.containers[n].containerCache.height = this.containers[n].element.outerHeight()
}
return this
}, _createPlaceholder: function (t) {
t = t || this;
var n = t.options;
if (!n.placeholder || n.placeholder.constructor == String) {
var r = n.placeholder;
n.placeholder = {element: function () {
var n = e(document.createElement(t.currentItem[0].nodeName)).addClass(r || t.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
return r || (n.style.visibility = "hidden"), n
}, update: function (e, i) {
if (r && !n.forcePlaceholderSize)return;
i.height() || i.height(t.currentItem.innerHeight() - parseInt(t.currentItem.css("paddingTop") || 0, 10) - parseInt(t.currentItem.css("paddingBottom") || 0, 10)), i.width() || i.width(t.currentItem.innerWidth() - parseInt(t.currentItem.css("paddingLeft") || 0, 10) - parseInt(t.currentItem.css("paddingRight") || 0, 10))
}}
}
t.placeholder = e(n.placeholder.element.call(t.element, t.currentItem)), t.currentItem.after(t.placeholder), n.placeholder.update(t, t.placeholder)
}, _contactContainers: function (t) {
var n = null, r = null;
for (var i = this.containers.length - 1; i >= 0; i--) {
if (e.contains(this.currentItem[0], this.containers[i].element[0]))continue;
if (this._intersectsWith(this.containers[i].containerCache)) {
if (n && e.contains(this.containers[i].element[0], n.element[0]))continue;
n = this.containers[i], r = i
} else this.containers[i].containerCache.over && (this.containers[i]._trigger("out", t, this._uiHash(this)), this.containers[i].containerCache.over = 0)
}
if (!n)return;
if (this.containers.length === 1)this.containers[r]._trigger("over", t, this._uiHash(this)), this.containers[r].containerCache.over = 1; else {
var s = 1e4, o = null, u = this.containers[r].floating ? "left" : "top", a = this.containers[r].floating ? "width" : "height", f = this.positionAbs[u] + this.offset.click[u];
for (var l = this.items.length - 1; l >= 0; l--) {
if (!e.contains(this.containers[r].element[0], this.items[l].item[0]))continue;
if (this.items[l].item[0] == this.currentItem[0])continue;
var c = this.items[l].item.offset()[u], h = !1;
Math.abs(c - f) > Math.abs(c + this.items[l][a] - f) && (h = !0, c += this.items[l][a]), Math.abs(c - f) < s && (s = Math.abs(c - f), o = this.items[l], this.direction = h ? "up" : "down")
}
if (!o && !this.options.dropOnEmpty)return;
this.currentContainer = this.containers[r], o ? this._rearrange(t, o, null, !0) : this._rearrange(t, null, this.containers[r].element, !0), this._trigger("change", t, this._uiHash()), this.containers[r]._trigger("change", t, this._uiHash(this)), this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[r]._trigger("over", t, this._uiHash(this)), this.containers[r].containerCache.over = 1
}
}, _createHelper: function (t) {
var n = this.options, r = e.isFunction(n.helper) ? e(n.helper.apply(this.element[0], [t, this.currentItem])) : n.helper == "clone" ? this.currentItem.clone() : this.currentItem;
return r.parents("body").length || e(n.appendTo != "parent" ? n.appendTo : this.currentItem[0].parentNode)[0].appendChild(r[0]), r[0] == this.currentItem[0] && (this._storedCSS = {width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css("position"), top: this.currentItem.css("top"), left: this.currentItem.css("left")}), (r[0].style.width == "" || n.forceHelperSize) && r.width(this.currentItem.width()), (r[0].style.height == "" || n.forceHelperSize) && r.height(this.currentItem.height()), r
}, _adjustOffsetFromHelper: function (t) {
typeof t == "string" && (t = t.split(" ")), e.isArray(t) && (t = {left: +t[0], top: +t[1] || 0}), "left"in t && (this.offset.click.left = t.left + this.margins.left), "right"in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top"in t && (this.offset.click.top = t.top + this.margins.top), "bottom"in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
}, _getParentOffset: function () {
this.offsetParent = this.helper.offsetParent();
var t = this.offsetParent.offset();
this.cssPosition == "absolute" && this.scrollParent[0] != document && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop());
if (this.offsetParent[0] == document.body || this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() == "html" && e.ui.ie)t = {top: 0, left: 0};
return{top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)}
}, _getRelativeOffset: function () {
if (this.cssPosition == "relative") {
var e = this.currentItem.position();
return{top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(), left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()}
}
return{top: 0, left: 0}
}, _cacheMargins: function () {
this.margins = {left: parseInt(this.currentItem.css("marginLeft"), 10) || 0, top: parseInt(this.currentItem.css("marginTop"), 10) || 0}
}, _cacheHelperProportions: function () {
this.helperProportions = {width: this.helper.outerWidth(), height: this.helper.outerHeight()}
}, _setContainment: function () {
var t = this.options;
t.containment == "parent" && (t.containment = this.helper[0].parentNode);
if (t.containment == "document" || t.containment == "window")this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, e(t.containment == "document" ? document : window).width() - this.helperProportions.width - this.margins.left, (e(t.containment == "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
if (!/^(document|window|parent)$/.test(t.containment)) {
var n = e(t.containment)[0], r = e(t.containment).offset(), i = e(n).css("overflow") != "hidden";
this.containment = [r.left + (parseInt(e(n).css("borderLeftWidth"), 10) || 0) + (parseInt(e(n).css("paddingLeft"), 10) || 0) - this.margins.left, r.top + (parseInt(e(n).css("borderTopWidth"), 10) || 0) + (parseInt(e(n).css("paddingTop"), 10) || 0) - this.margins.top, r.left + (i ? Math.max(n.scrollWidth, n.offsetWidth) : n.offsetWidth) - (parseInt(e(n).css("borderLeftWidth"), 10) || 0) - (parseInt(e(n).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, r.top + (i ? Math.max(n.scrollHeight, n.offsetHeight) : n.offsetHeight) - (parseInt(e(n).css("borderTopWidth"), 10) || 0) - (parseInt(e(n).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top]
}
}, _convertPositionTo: function (t, n) {
n || (n = this.position);
var r = t == "absolute" ? 1 : -1, i = this.options, s = this.cssPosition != "absolute" || this.scrollParent[0] != document && !!e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, o = /(html|body)/i.test(s[0].tagName);
return{top: n.top + this.offset.relative.top * r + this.offset.parent.top * r - (this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : o ? 0 : s.scrollTop()) * r, left: n.left + this.offset.relative.left * r + this.offset.parent.left * r - (this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : o ? 0 : s.scrollLeft()) * r}
}, _generatePosition: function (t) {
var n = this.options, r = this.cssPosition != "absolute" || this.scrollParent[0] != document && !!e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, i = /(html|body)/i.test(r[0].tagName);
this.cssPosition == "relative" && (this.scrollParent[0] == document || this.scrollParent[0] == this.offsetParent[0]) && (this.offset.relative = this._getRelativeOffset());
var s = t.pageX, o = t.pageY;
if (this.originalPosition) {
this.containment && (t.pageX - this.offset.click.left < this.containment[0] && (s = this.containment[0] + this.offset.click.left), t.pageY - this.offset.click.top < this.containment[1] && (o = this.containment[1] + this.offset.click.top), t.pageX - this.offset.click.left > this.containment[2] && (s = this.containment[2] + this.offset.click.left), t.pageY - this.offset.click.top > this.containment[3] && (o = this.containment[3] + this.offset.click.top));
if (n.grid) {
var u = this.originalPageY + Math.round((o - this.originalPageY) / n.grid[1]) * n.grid[1];
o = this.containment ? u - this.offset.click.top < this.containment[1] || u - this.offset.click.top > this.containment[3] ? u - this.offset.click.top < this.containment[1] ? u + n.grid[1] : u - n.grid[1] : u : u;
var a = this.originalPageX + Math.round((s - this.originalPageX) / n.grid[0]) * n.grid[0];
s = this.containment ? a - this.offset.click.left < this.containment[0] || a - this.offset.click.left > this.containment[2] ? a - this.offset.click.left < this.containment[0] ? a + n.grid[0] : a - n.grid[0] : a : a
}
}
return{top: o - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : i ? 0 : r.scrollTop()), left: s - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : i ? 0 : r.scrollLeft())}
}, _rearrange: function (e, t, n, r) {
n ? n[0].appendChild(this.placeholder[0]) : t.item[0].parentNode.insertBefore(this.placeholder[0], this.direction == "down" ? t.item[0] : t.item[0].nextSibling), this.counter = this.counter ? ++this.counter : 1;
var i = this.counter;
this._delay(function () {
i == this.counter && this.refreshPositions(!r)
})
}, _clear: function (t, n) {
this.reverting = !1;
var r = [];
!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null;
if (this.helper[0] == this.currentItem[0]) {
for (var i in this._storedCSS)if (this._storedCSS[i] == "auto" || this._storedCSS[i] == "static")this._storedCSS[i] = "";
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
} else this.currentItem.show();
this.fromOutside && !n && r.push(function (e) {
this._trigger("receive", e, this._uiHash(this.fromOutside))
}), (this.fromOutside || this.domPosition.prev != this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent != this.currentItem.parent()[0]) && !n && r.push(function (e) {
this._trigger("update", e, this._uiHash())
}), this !== this.currentContainer && (n || (r.push(function (e) {
this._trigger("remove", e, this._uiHash())
}), r.push(function (e) {
return function (t) {
e._trigger("receive", t, this._uiHash(this))
}
}.call(this, this.currentContainer)), r.push(function (e) {
return function (t) {
e._trigger("update", t, this._uiHash(this))
}
}.call(this, this.currentContainer))));
for (var i = this.containers.length - 1; i >= 0; i--)n || r.push(function (e) {
return function (t) {
e._trigger("deactivate", t, this._uiHash(this))
}
}.call(this, this.containers[i])), this.containers[i].containerCache.over && (r.push(function (e) {
return function (t) {
e._trigger("out", t, this._uiHash(this))
}
}.call(this, this.containers[i])), this.containers[i].containerCache.over = 0);
this._storedCursor && e("body").css("cursor", this._storedCursor), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", this._storedZIndex == "auto" ? "" : this._storedZIndex), this.dragging = !1;
if (this.cancelHelperRemoval) {
if (!n) {
this._trigger("beforeStop", t, this._uiHash());
for (var i = 0; i < r.length; i++)r[i].call(this, t);
this._trigger("stop", t, this._uiHash())
}
return this.fromOutside = !1, !1
}
n || this._trigger("beforeStop", t, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.helper[0] != this.currentItem[0] && this.helper.remove(), this.helper = null;
if (!n) {
for (var i = 0; i < r.length; i++)r[i].call(this, t);
this._trigger("stop", t, this._uiHash())
}
return this.fromOutside = !1, !0
}, _trigger: function () {
e.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
}, _uiHash: function (t) {
var n = t || this;
return{helper: n.helper, placeholder: n.placeholder || e([]), position: n.position, originalPosition: n.originalPosition, offset: n.positionAbs, item: n.currentItem, sender: t ? t.element : null}
}})
})(jQuery);
(function (e, t) {
var n = 0;
e.widget("ui.autocomplete", {version: "1.9.2", defaultElement: "<input>", options: {appendTo: "body", autoFocus: !1, delay: 300, minLength: 1, position: {my: "left top", at: "left bottom", collision: "none"}, source: null, change: null, close: null, focus: null, open: null, response: null, search: null, select: null}, pending: 0, _create: function () {
var t, n, r;
this.isMultiLine = this._isMultiLine(), this.valueMethod = this.element[this.element.is("input,textarea") ? "val" : "text"], this.isNewMenu = !0, this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"), this._on(this.element, {keydown: function (i) {
if (this.element.prop("readOnly")) {
t = !0, r = !0, n = !0;
return
}
t = !1, r = !1, n = !1;
var s = e.ui.keyCode;
switch (i.keyCode) {
case s.PAGE_UP:
t = !0, this._move("previousPage", i);
break;
case s.PAGE_DOWN:
t = !0, this._move("nextPage", i);
break;
case s.UP:
t = !0, this._keyEvent("previous", i);
break;
case s.DOWN:
t = !0, this._keyEvent("next", i);
break;
case s.ENTER:
case s.NUMPAD_ENTER:
this.menu.active && (t = !0, i.preventDefault(), this.menu.select(i));
break;
case s.TAB:
this.menu.active && this.menu.select(i);
break;
case s.ESCAPE:
this.menu.element.is(":visible") && (this._value(this.term), this.close(i), i.preventDefault());
break;
default:
n = !0, this._searchTimeout(i)
}
}, keypress: function (r) {
if (t) {
t = !1, r.preventDefault();
return
}
if (n)return;
var i = e.ui.keyCode;
switch (r.keyCode) {
case i.PAGE_UP:
this._move("previousPage", r);
break;
case i.PAGE_DOWN:
this._move("nextPage", r);
break;
case i.UP:
this._keyEvent("previous", r);
break;
case i.DOWN:
this._keyEvent("next", r)
}
}, input: function (e) {
if (r) {
r = !1, e.preventDefault();
return
}
this._searchTimeout(e)
}, focus: function () {
this.selectedItem = null, this.previous = this._value()
}, blur: function (e) {
if (this.cancelBlur) {
delete this.cancelBlur;
return
}
clearTimeout(this.searching), this.close(e), this._change(e)
}}), this._initSource(), this.menu = e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo || "body")[0]).menu({input: e(), role: null}).zIndex(this.element.zIndex() + 1).hide().data("menu"), this._on(this.menu.element, {mousedown: function (t) {
t.preventDefault(), this.cancelBlur = !0, this._delay(function () {
delete this.cancelBlur
});
var n = this.menu.element[0];
e(t.target).closest(".ui-menu-item").length || this._delay(function () {
var t = this;
this.document.one("mousedown", function (r) {
r.target !== t.element[0] && r.target !== n && !e.contains(n, r.target) && t.close()
})
})
}, menufocus: function (t, n) {
if (this.isNewMenu) {
this.isNewMenu = !1;
if (t.originalEvent && /^mouse/.test(t.originalEvent.type)) {
this.menu.blur(), this.document.one("mousemove", function () {
e(t.target).trigger(t.originalEvent)
});
return
}
}
var r = n.item.data("ui-autocomplete-item") || n.item.data("item.autocomplete");
!1 !== this._trigger("focus", t, {item: r}) ? t.originalEvent && /^key/.test(t.originalEvent.type) && this._value(r.value) : this.liveRegion.text(r.value)
}, menuselect: function (e, t) {
var n = t.item.data("ui-autocomplete-item") || t.item.data("item.autocomplete"), r = this.previous;
this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = r, this._delay(function () {
this.previous = r, this.selectedItem = n
})), !1 !== this._trigger("select", e, {item: n}) && this._value(n.value), this.term = this._value(), this.close(e), this.selectedItem = n
}}), this.liveRegion = e("<span>", {role: "status", "aria-live": "polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element), e.fn.bgiframe && this.menu.element.bgiframe(), this._on(this.window, {beforeunload: function () {
this.element.removeAttr("autocomplete")
}})
}, _destroy: function () {
clearTimeout(this.searching), this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"), this.menu.element.remove(), this.liveRegion.remove()
}, _setOption: function (e, t) {
this._super(e, t), e === "source" && this._initSource(), e === "appendTo" && this.menu.element.appendTo(this.document.find(t || "body")[0]), e === "disabled" && t && this.xhr && this.xhr.abort()
}, _isMultiLine: function () {
return this.element.is("textarea") ? !0 : this.element.is("input") ? !1 : this.element.prop("isContentEditable")
}, _initSource: function () {
var t, n, r = this;
e.isArray(this.options.source) ? (t = this.options.source, this.source = function (n, r) {
r(e.ui.autocomplete.filter(t, n.term))
}) : typeof this.options.source == "string" ? (n = this.options.source, this.source = function (t, i) {
r.xhr && r.xhr.abort(), r.xhr = e.ajax({url: n, data: t, dataType: "json", success: function (e) {
i(e)
}, error: function () {
i([])
}})
}) : this.source = this.options.source
}, _searchTimeout: function (e) {
clearTimeout(this.searching), this.searching = this._delay(function () {
this.term !== this._value() && (this.selectedItem = null, this.search(null, e))
}, this.options.delay)
}, search: function (e, t) {
e = e != null ? e : this._value(), this.term = this._value();
if (e.length < this.options.minLength)return this.close(t);
if (this._trigger("search", t) === !1)return;
return this._search(e)
}, _search: function (e) {
this.pending++, this.element.addClass("ui-autocomplete-loading"), this.cancelSearch = !1, this.source({term: e}, this._response())
}, _response: function () {
var e = this, t = ++n;
return function (r) {
t === n && e.__response(r), e.pending--, e.pending || e.element.removeClass("ui-autocomplete-loading")
}
}, __response: function (e) {
e && (e = this._normalize(e)), this._trigger("response", null, {content: e}), !this.options.disabled && e && e.length && !this.cancelSearch ? (this._suggest(e), this._trigger("open")) : this._close()
}, close: function (e) {
this.cancelSearch = !0, this._close(e)
}, _close: function (e) {
this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), this.isNewMenu = !0, this._trigger("close", e))
}, _change: function (e) {
this.previous !== this._value() && this._trigger("change", e, {item: this.selectedItem})
}, _normalize: function (t) {
return t.length && t[0].label && t[0].value ? t : e.map(t, function (t) {
return typeof t == "string" ? {label: t, value: t} : e.extend({label: t.label || t.value, value: t.value || t.label}, t)
})
}, _suggest: function (t) {
var n = this.menu.element.empty().zIndex(this.element.zIndex() + 1);
this._renderMenu(n, t), this.menu.refresh(), n.show(), this._resizeMenu(), n.position(e.extend({of: this.element}, this.options.position)), this.options.autoFocus && this.menu.next()
}, _resizeMenu: function () {
var e = this.menu.element;
e.outerWidth(Math.max(e.width("").outerWidth() + 1, this.element.outerWidth()))
}, _renderMenu: function (t, n) {
var r = this;
e.each(n, function (e, n) {
r._renderItemData(t, n)
})
}, _renderItemData: function (e, t) {
return this._renderItem(e, t).data("ui-autocomplete-item", t)
}, _renderItem: function (t, n) {
return e("<li>").append(e("<a>").text(n.label)).appendTo(t)
}, _move: function (e, t) {
if (!this.menu.element.is(":visible")) {
this.search(null, t);
return
}
if (this.menu.isFirstItem() && /^previous/.test(e) || this.menu.isLastItem() && /^next/.test(e)) {
this._value(this.term), this.menu.blur();
return
}
this.menu[e](t)
}, widget: function () {
return this.menu.element
}, _value: function () {
return this.valueMethod.apply(this.element, arguments)
}, _keyEvent: function (e, t) {
if (!this.isMultiLine || this.menu.element.is(":visible"))this._move(e, t), t.preventDefault()
}}), e.extend(e.ui.autocomplete, {escapeRegex: function (e) {
return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
}, filter: function (t, n) {
var r = new RegExp(e.ui.autocomplete.escapeRegex(n), "i");
return e.grep(t, function (e) {
return r.test(e.label || e.value || e)
})
}}), e.widget("ui.autocomplete", e.ui.autocomplete, {options: {messages: {noResults: "No search results.", results: function (e) {
return e + (e > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate."
}}}, __response: function (e) {
var t;
this._superApply(arguments);
if (this.options.disabled || this.cancelSearch)return;
e && e.length ? t = this.options.messages.results(e.length) : t = this.options.messages.noResults, this.liveRegion.text(t)
}})
})(jQuery);
(function ($, undefined) {
function Datepicker() {
this.debug = !1, this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], this._datepickerShowing = !1, this._inDialog = !1, this._mainDivId = "ui-datepicker-div", this._inlineClass = "ui-datepicker-inline", this._appendClass = "ui-datepicker-append", this._triggerClass = "ui-datepicker-trigger", this._dialogClass = "ui-datepicker-dialog", this._disableClass = "ui-datepicker-disabled", this._unselectableClass = "ui-datepicker-unselectable", this._currentClass = "ui-datepicker-current-day", this._dayOverClass = "ui-datepicker-days-cell-over", this.regional = [], this.regional[""] = {closeText: "Done", prevText: "Prev", nextText: "Next", currentText: "Today", monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], weekHeader: "Wk", dateFormat: "mm/dd/yy", firstDay: 0, isRTL: !1, showMonthAfterYear: !1, yearSuffix: ""}, this._defaults = {showOn: "focus", showAnim: "fadeIn", showOptions: {}, defaultDate: null, appendText: "", buttonText: "...", buttonImage: "", buttonImageOnly: !1, hideIfNoPrevNext: !1, navigationAsDateFormat: !1, gotoCurrent: !1, changeMonth: !1, changeYear: !1, yearRange: "c-10:c+10", showOtherMonths: !1, selectOtherMonths: !1, showWeek: !1, calculateWeek: this.iso8601Week, shortYearCutoff: "+10", minDate: null, maxDate: null, duration: "fast", beforeShowDay: null, beforeShow: null, onSelect: null, onChangeMonthYear: null, onClose: null, numberOfMonths: 1, showCurrentAtPos: 0, stepMonths: 1, stepBigMonths: 12, altField: "", altFormat: "", constrainInput: !0, showButtonPanel: !1, autoSize: !1, disabled: !1}, $.extend(this._defaults, this.regional[""]), this.dpDiv = bindHover($('<div id="' + this._mainDivId + '" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))
}
function bindHover(e) {
var t = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
return e.delegate(t, "mouseout",function () {
$(this).removeClass("ui-state-hover"), this.className.indexOf("ui-datepicker-prev") != -1 && $(this).removeClass("ui-datepicker-prev-hover"), this.className.indexOf("ui-datepicker-next") != -1 && $(this).removeClass("ui-datepicker-next-hover")
}).delegate(t, "mouseover", function () {
$.datepicker._isDisabledDatepicker(instActive.inline ? e.parent()[0] : instActive.input[0]) || ($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), $(this).addClass("ui-state-hover"), this.className.indexOf("ui-datepicker-prev") != -1 && $(this).addClass("ui-datepicker-prev-hover"), this.className.indexOf("ui-datepicker-next") != -1 && $(this).addClass("ui-datepicker-next-hover"))
})
}
function extendRemove(e, t) {
$.extend(e, t);
for (var n in t)if (t[n] == null || t[n] == undefined)e[n] = t[n];
return e
}
$.extend($.ui, {datepicker: {version: "1.9.2"}});
var PROP_NAME = "datepicker", dpuuid = (new Date).getTime(), instActive;
$.extend(Datepicker.prototype, {markerClassName: "hasDatepicker", maxRows: 4, log: function () {
this.debug && console.log.apply("", arguments)
}, _widgetDatepicker: function () {
return this.dpDiv
}, setDefaults: function (e) {
return extendRemove(this._defaults, e || {}), this
}, _attachDatepicker: function (target, settings) {
var inlineSettings = null;
for (var attrName in this._defaults) {
var attrValue = target.getAttribute("date:" + attrName);
if (attrValue) {
inlineSettings = inlineSettings || {};
try {
inlineSettings[attrName] = eval(attrValue)
} catch (err) {
inlineSettings[attrName] = attrValue
}
}
}
var nodeName = target.nodeName.toLowerCase(), inline = nodeName == "div" || nodeName == "span";
target.id || (this.uuid += 1, target.id = "dp" + this.uuid);
var inst = this._newInst($(target), inline);
inst.settings = $.extend({}, settings || {}, inlineSettings || {}), nodeName == "input" ? this._connectDatepicker(target, inst) : inline && this._inlineDatepicker(target, inst)
}, _newInst: function (e, t) {
var n = e[0].id.replace(/([^A-Za-z0-9_-])/g, "\\\\$1");
return{id: n, input: e, selectedDay: 0, selectedMonth: 0, selectedYear: 0, drawMonth: 0, drawYear: 0, inline: t, dpDiv: t ? bindHover($('<div class="' + this._inlineClass + ' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')) : this.dpDiv}
}, _connectDatepicker: function (e, t) {
var n = $(e);
t.append = $([]), t.trigger = $([]);
if (n.hasClass(this.markerClassName))return;
this._attachments(n, t), n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function (e, n, r) {
t.settings[n] = r
}).bind("getData.datepicker", function (e, n) {
return this._get(t, n)
}), this._autoSize(t), $.data(e, PROP_NAME, t), t.settings.disabled && this._disableDatepicker(e)
}, _attachments: function (e, t) {
var n = this._get(t, "appendText"), r = this._get(t, "isRTL");
t.append && t.append.remove(), n && (t.append = $('<span class="' + this._appendClass + '">' + n + "</span>"), e[r ? "before" : "after"](t.append)), e.unbind("focus", this._showDatepicker), t.trigger && t.trigger.remove();
var i = this._get(t, "showOn");
(i == "focus" || i == "both") && e.focus(this._showDatepicker);
if (i == "button" || i == "both") {
var s = this._get(t, "buttonText"), o = this._get(t, "buttonImage");
t.trigger = $(this._get(t, "buttonImageOnly") ? $("<img/>").addClass(this._triggerClass).attr({src: o, alt: s, title: s}) : $('<button type="button"></button>').addClass(this._triggerClass).html(o == "" ? s : $("<img/>").attr({src: o, alt: s, title: s}))), e[r ? "before" : "after"](t.trigger), t.trigger.click(function () {
return $.datepicker._datepickerShowing && $.datepicker._lastInput == e[0] ? $.datepicker._hideDatepicker() : $.datepicker._datepickerShowing && $.datepicker._lastInput != e[0] ? ($.datepicker._hideDatepicker(), $.datepicker._showDatepicker(e[0])) : $.datepicker._showDatepicker(e[0]), !1
})
}
}, _autoSize: function (e) {
if (this._get(e, "autoSize") && !e.inline) {
var t = new Date(2009, 11, 20), n = this._get(e, "dateFormat");
if (n.match(/[DM]/)) {
var r = function (e) {
var t = 0, n = 0;
for (var r = 0; r < e.length; r++)e[r].length > t && (t = e[r].length, n = r);
return n
};
t.setMonth(r(this._get(e, n.match(/MM/) ? "monthNames" : "monthNamesShort"))), t.setDate(r(this._get(e, n.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - t.getDay())
}
e.input.attr("size", this._formatDate(e, t).length)
}
}, _inlineDatepicker: function (e, t) {
var n = $(e);
if (n.hasClass(this.markerClassName))return;
n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function (e, n, r) {
t.settings[n] = r
}).bind("getData.datepicker", function (e, n) {
return this._get(t, n)
}), $.data(e, PROP_NAME, t), this._setDate(t, this._getDefaultDate(t), !0), this._updateDatepicker(t), this._updateAlternate(t), t.settings.disabled && this._disableDatepicker(e), t.dpDiv.css("display", "block")
}, _dialogDatepicker: function (e, t, n, r, i) {
var s = this._dialogInst;
if (!s) {
this.uuid += 1;
var o = "dp" + this.uuid;
this._dialogInput = $('<input type="text" id="' + o + '" style="position: absolute; top: -100px; width: 0px;"/>'), this._dialogInput.keydown(this._doKeyDown), $("body").append(this._dialogInput), s = this._dialogInst = this._newInst(this._dialogInput, !1), s.settings = {}, $.data(this._dialogInput[0], PROP_NAME, s)
}
extendRemove(s.settings, r || {}), t = t && t.constructor == Date ? this._formatDate(s, t) : t, this._dialogInput.val(t), this._pos = i ? i.length ? i : [i.pageX, i.pageY] : null;
if (!this._pos) {
var u = document.documentElement.clientWidth, a = document.documentElement.clientHeight, f = document.documentElement.scrollLeft || document.body.scrollLeft, l = document.documentElement.scrollTop || document.body.scrollTop;
this._pos = [u / 2 - 100 + f, a / 2 - 150 + l]
}
return this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), s.settings.onSelect = n, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), this._showDatepicker(this._dialogInput[0]), $.blockUI && $.blockUI(this.dpDiv), $.data(this._dialogInput[0], PROP_NAME, s), this
}, _destroyDatepicker: function (e) {
var t = $(e), n = $.data(e, PROP_NAME);
if (!t.hasClass(this.markerClassName))return;
var r = e.nodeName.toLowerCase();
$.removeData(e, PROP_NAME), r == "input" ? (n.append.remove(), n.trigger.remove(), t.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : (r == "div" || r == "span") && t.removeClass(this.markerClassName).empty()
}, _enableDatepicker: function (e) {
var t = $(e), n = $.data(e, PROP_NAME);
if (!t.hasClass(this.markerClassName))return;
var r = e.nodeName.toLowerCase();
if (r == "input")e.disabled = !1, n.trigger.filter("button").each(function () {
this.disabled = !1
}).end().filter("img").css({opacity: "1.0", cursor: ""}); else if (r == "div" || r == "span") {
var i = t.children("." + this._inlineClass);
i.children().removeClass("ui-state-disabled"), i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1)
}
this._disabledInputs = $.map(this._disabledInputs, function (t) {
return t == e ? null : t
})
}, _disableDatepicker: function (e) {
var t = $(e), n = $.data(e, PROP_NAME);
if (!t.hasClass(this.markerClassName))return;
var r = e.nodeName.toLowerCase();
if (r == "input")e.disabled = !0, n.trigger.filter("button").each(function () {
this.disabled = !0
}).end().filter("img").css({opacity: "0.5", cursor: "default"}); else if (r == "div" || r == "span") {
var i = t.children("." + this._inlineClass);
i.children().addClass("ui-state-disabled"), i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0)
}
this._disabledInputs = $.map(this._disabledInputs, function (t) {
return t == e ? null : t
}), this._disabledInputs[this._disabledInputs.length] = e
}, _isDisabledDatepicker: function (e) {
if (!e)return!1;
for (var t = 0; t < this._disabledInputs.length; t++)if (this._disabledInputs[t] == e)return!0;
return!1
}, _getInst: function (e) {
try {
return $.data(e, PROP_NAME)
} catch (t) {
throw"Missing instance data for this datepicker"
}
}, _optionDatepicker: function (e, t, n) {
var r = this._getInst(e);
if (arguments.length == 2 && typeof t == "string")return t == "defaults" ? $.extend({}, $.datepicker._defaults) : r ? t == "all" ? $.extend({}, r.settings) : this._get(r, t) : null;
var i = t || {};
typeof t == "string" && (i = {}, i[t] = n);
if (r) {
this._curInst == r && this._hideDatepicker();
var s = this._getDateDatepicker(e, !0), o = this._getMinMaxDate(r, "min"), u = this._getMinMaxDate(r, "max");
extendRemove(r.settings, i), o !== null && i.dateFormat !== undefined && i.minDate === undefined && (r.settings.minDate = this._formatDate(r, o)), u !== null && i.dateFormat !== undefined && i.maxDate === undefined && (r.settings.maxDate = this._formatDate(r, u)), this._attachments($(e), r), this._autoSize(r), this._setDate(r, s), this._updateAlternate(r), this._updateDatepicker(r)
}
}, _changeDatepicker: function (e, t, n) {
this._optionDatepicker(e, t, n)
}, _refreshDatepicker: function (e) {
var t = this._getInst(e);
t && this._updateDatepicker(t)
}, _setDateDatepicker: function (e, t) {
var n = this._getInst(e);
n && (this._setDate(n, t), this._updateDatepicker(n), this._updateAlternate(n))
}, _getDateDatepicker: function (e, t) {
var n = this._getInst(e);
return n && !n.inline && this._setDateFromField(n, t), n ? this._getDate(n) : null
}, _doKeyDown: function (e) {
var t = $.datepicker._getInst(e.target), n = !0, r = t.dpDiv.is(".ui-datepicker-rtl");
t._keyEvent = !0;
if ($.datepicker._datepickerShowing)switch (e.keyCode) {
case 9:
$.datepicker._hideDatepicker(), n = !1;
break;
case 13:
var i = $("td." + $.datepicker._dayOverClass + ":not(." + $.datepicker._currentClass + ")", t.dpDiv);
i[0] && $.datepicker._selectDay(e.target, t.selectedMonth, t.selectedYear, i[0]);
var s = $.datepicker._get(t, "onSelect");
if (s) {
var o = $.datepicker._formatDate(t);
s.apply(t.input ? t.input[0] : null, [o, t])
} else $.datepicker._hideDatepicker();
return!1;
case 27:
$.datepicker._hideDatepicker();
break;
case 33:
$.datepicker._adjustDate(e.target, e.ctrlKey ? -$.datepicker._get(t, "stepBigMonths") : -$.datepicker._get(t, "stepMonths"), "M");
break;
case 34:
$.datepicker._adjustDate(e.target, e.ctrlKey ? +$.datepicker._get(t, "stepBigMonths") : +$.datepicker._get(t, "stepMonths"), "M");
break;
case 35:
(e.ctrlKey || e.metaKey) && $.datepicker._clearDate(e.target), n = e.ctrlKey || e.metaKey;
break;
case 36:
(e.ctrlKey || e.metaKey) && $.datepicker._gotoToday(e.target), n = e.ctrlKey || e.metaKey;
break;
case 37:
(e.ctrlKey || e.metaKey) && $.datepicker._adjustDate(e.target, r ? 1 : -1, "D"), n = e.ctrlKey || e.metaKey, e.originalEvent.altKey && $.datepicker._adjustDate(e.target, e.ctrlKey ? -$.datepicker._get(t, "stepBigMonths") : -$.datepicker._get(t, "stepMonths"), "M");
break;
case 38:
(e.ctrlKey || e.metaKey) && $.datepicker._adjustDate(e.target, -7, "D"), n = e.ctrlKey || e.metaKey;
break;
case 39:
(e.ctrlKey || e.metaKey) && $.datepicker._adjustDate(e.target, r ? -1 : 1, "D"), n = e.ctrlKey || e.metaKey, e.originalEvent.altKey && $.datepicker._adjustDate(e.target, e.ctrlKey ? +$.datepicker._get(t, "stepBigMonths") : +$.datepicker._get(t, "stepMonths"), "M");
break;
case 40:
(e.ctrlKey || e.metaKey) && $.datepicker._adjustDate(e.target, 7, "D"), n = e.ctrlKey || e.metaKey;
break;
default:
n = !1
} else e.keyCode == 36 && e.ctrlKey ? $.datepicker._showDatepicker(this) : n = !1;
n && (e.preventDefault(), e.stopPropagation())
}, _doKeyPress: function (e) {
var t = $.datepicker._getInst(e.target);
if ($.datepicker._get(t, "constrainInput")) {
var n = $.datepicker._possibleChars($.datepicker._get(t, "dateFormat")), r = String.fromCharCode(e.charCode == undefined ? e.keyCode : e.charCode);
return e.ctrlKey || e.metaKey || r < " " || !n || n.indexOf(r) > -1
}
}, _doKeyUp: function (e) {
var t = $.datepicker._getInst(e.target);
if (t.input.val() != t.lastVal)try {
var n = $.datepicker.parseDate($.datepicker._get(t, "dateFormat"), t.input ? t.input.val() : null, $.datepicker._getFormatConfig(t));
n && ($.datepicker._setDateFromField(t), $.datepicker._updateAlternate(t), $.datepicker._updateDatepicker(t))
} catch (r) {
$.datepicker.log(r)
}
return!0
}, _showDatepicker: function (e) {
e = e.target || e, e.nodeName.toLowerCase() != "input" && (e = $("input", e.parentNode)[0]);
if ($.datepicker._isDisabledDatepicker(e) || $.datepicker._lastInput == e)return;
var t = $.datepicker._getInst(e);
$.datepicker._curInst && $.datepicker._curInst != t && ($.datepicker._curInst.dpDiv.stop(!0, !0), t && $.datepicker._datepickerShowing && $.datepicker._hideDatepicker($.datepicker._curInst.input[0]));
var n = $.datepicker._get(t, "beforeShow"), r = n ? n.apply(e, [e, t]) : {};
if (r === !1)return;
extendRemove(t.settings, r), t.lastVal = null, $.datepicker._lastInput = e, $.datepicker._setDateFromField(t), $.datepicker._inDialog && (e.value = ""), $.datepicker._pos || ($.datepicker._pos = $.datepicker._findPos(e), $.datepicker._pos[1] += e.offsetHeight);
var i = !1;
$(e).parents().each(function () {
return i |= $(this).css("position") == "fixed", !i
});
var s = {left: $.datepicker._pos[0], top: $.datepicker._pos[1]};
$.datepicker._pos = null, t.dpDiv.empty(), t.dpDiv.css({position: "absolute", display: "block", top: "-1000px"}), $.datepicker._updateDatepicker(t), s = $.datepicker._checkOffset(t, s, i), t.dpDiv.css({position: $.datepicker._inDialog && $.blockUI ? "static" : i ? "fixed" : "absolute", display: "none", left: s.left + "px", top: s.top + "px"});
if (!t.inline) {
var o = $.datepicker._get(t, "showAnim"), u = $.datepicker._get(t, "duration"), a = function () {
var e = t.dpDiv.find("iframe.ui-datepicker-cover");
if (!!e.length) {
var n = $.datepicker._getBorders(t.dpDiv);
e.css({left: -n[0], top: -n[1], width: t.dpDiv.outerWidth(), height: t.dpDiv.outerHeight()})
}
};
t.dpDiv.zIndex($(e).zIndex() + 1), $.datepicker._datepickerShowing = !0, $.effects && ($.effects.effect[o] || $.effects[o]) ? t.dpDiv.show(o, $.datepicker._get(t, "showOptions"), u, a) : t.dpDiv[o || "show"](o ? u : null, a), (!o || !u) && a(), t.input.is(":visible") && !t.input.is(":disabled") && t.input.focus(), $.datepicker._curInst = t
}
}, _updateDatepicker: function (e) {
this.maxRows = 4;
var t = $.datepicker._getBorders(e.dpDiv);
instActive = e, e.dpDiv.empty().append(this._generateHTML(e)), this._attachHandlers(e);
var n = e.dpDiv.find("iframe.ui-datepicker-cover");
!n.length || n.css({left: -t[0], top: -t[1], width: e.dpDiv.outerWidth(), height: e.dpDiv.outerHeight()}), e.dpDiv.find("." + this._dayOverClass + " a").mouseover();
var r = this._getNumberOfMonths(e), i = r[1], s = 17;
e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), i > 1 && e.dpDiv.addClass("ui-datepicker-multi-" + i).css("width", s * i + "em"), e.dpDiv[(r[0] != 1 || r[1] != 1 ? "add" : "remove") + "Class"]("ui-datepicker-multi"), e.dpDiv[(this._get(e, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"), e == $.datepicker._curInst && $.datepicker._datepickerShowing && e.input && e.input.is(":visible") && !e.input.is(":disabled") && e.input[0] != document.activeElement && e.input.focus();
if (e.yearshtml) {
var o = e.yearshtml;
setTimeout(function () {
o === e.yearshtml && e.yearshtml && e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml), o = e.yearshtml = null
}, 0)
}
}, _getBorders: function (e) {
var t = function (e) {
return{thin: 1, medium: 2, thick: 3}[e] || e
};
return[parseFloat(t(e.css("border-left-width"))), parseFloat(t(e.css("border-top-width")))]
}, _checkOffset: function (e, t, n) {
var r = e.dpDiv.outerWidth(), i = e.dpDiv.outerHeight(), s = e.input ? e.input.outerWidth() : 0, o = e.input ? e.input.outerHeight() : 0, u = document.documentElement.clientWidth + (n ? 0 : $(document).scrollLeft()), a = document.documentElement.clientHeight + (n ? 0 : $(document).scrollTop());
return t.left -= this._get(e, "isRTL") ? r - s : 0, t.left -= n && t.left == e.input.offset().left ? $(document).scrollLeft() : 0, t.top -= n && t.top == e.input.offset().top + o ? $(document).scrollTop() : 0, t.left -= Math.min(t.left, t.left + r > u && u > r ? Math.abs(t.left + r - u) : 0), t.top -= Math.min(t.top, t.top + i > a && a > i ? Math.abs(i + o) : 0), t
}, _findPos: function (e) {
var t = this._getInst(e), n = this._get(t, "isRTL");
while (e && (e.type == "hidden" || e.nodeType != 1 || $.expr.filters.hidden(e)))e = e[n ? "previousSibling" : "nextSibling"];
var r = $(e).offset();
return[r.left, r.top]
}, _hideDatepicker: function (e) {
var t = this._curInst;
if (!t || e && t != $.data(e, PROP_NAME))return;
if (this._datepickerShowing) {
var n = this._get(t, "showAnim"), r = this._get(t, "duration"), i = function () {
$.datepicker._tidyDialog(t)
};
$.effects && ($.effects.effect[n] || $.effects[n]) ? t.dpDiv.hide(n, $.datepicker._get(t, "showOptions"), r, i) : t.dpDiv[n == "slideDown" ? "slideUp" : n == "fadeIn" ? "fadeOut" : "hide"](n ? r : null, i), n || i(), this._datepickerShowing = !1;
var s = this._get(t, "onClose");
s && s.apply(t.input ? t.input[0] : null, [t.input ? t.input.val() : "", t]), this._lastInput = null, this._inDialog && (this._dialogInput.css({position: "absolute", left: "0", top: "-100px"}), $.blockUI && ($.unblockUI(), $("body").append(this.dpDiv))), this._inDialog = !1
}
}, _tidyDialog: function (e) {
e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
}, _checkExternalClick: function (e) {
if (!$.datepicker._curInst)return;
var t = $(e.target), n = $.datepicker._getInst(t[0]);
(t[0].id != $.datepicker._mainDivId && t.parents("#" + $.datepicker._mainDivId).length == 0 && !t.hasClass($.datepicker.markerClassName) && !t.closest("." + $.datepicker._triggerClass).length && $.datepicker._datepickerShowing && (!$.datepicker._inDialog || !$.blockUI) || t.hasClass($.datepicker.markerClassName) && $.datepicker._curInst != n) && $.datepicker._hideDatepicker()
}, _adjustDate: function (e, t, n) {
var r = $(e), i = this._getInst(r[0]);
if (this._isDisabledDatepicker(r[0]))return;
this._adjustInstDate(i, t + (n == "M" ? this._get(i, "showCurrentAtPos") : 0), n), this._updateDatepicker(i)
}, _gotoToday: function (e) {
var t = $(e), n = this._getInst(t[0]);
if (this._get(n, "gotoCurrent") && n.currentDay)n.selectedDay = n.currentDay, n.drawMonth = n.selectedMonth = n.currentMonth, n.drawYear = n.selectedYear = n.currentYear; else {
var r = new Date;
n.selectedDay = r.getDate(), n.drawMonth = n.selectedMonth = r.getMonth(), n.drawYear = n.selectedYear = r.getFullYear()
}
this._notifyChange(n), this._adjustDate(t)
}, _selectMonthYear: function (e, t, n) {
var r = $(e), i = this._getInst(r[0]);
i["selected" + (n == "M" ? "Month" : "Year")] = i["draw" + (n == "M" ? "Month" : "Year")] = parseInt(t.options[t.selectedIndex].value, 10), this._notifyChange(i), this._adjustDate(r)
}, _selectDay: function (e, t, n, r) {
var i = $(e);
if ($(r).hasClass(this._unselectableClass) || this._isDisabledDatepicker(i[0]))return;
var s = this._getInst(i[0]);
s.selectedDay = s.currentDay = $("a", r).html(), s.selectedMonth = s.currentMonth = t, s.selectedYear = s.currentYear = n, this._selectDate(e, this._formatDate(s, s.currentDay, s.currentMonth, s.currentYear))
}, _clearDate: function (e) {
var t = $(e), n = this._getInst(t[0]);
this._selectDate(t, "")
}, _selectDate: function (e, t) {
var n = $(e), r = this._getInst(n[0]);
t = t != null ? t : this._formatDate(r), r.input && r.input.val(t), this._updateAlternate(r);
var i = this._get(r, "onSelect");
i ? i.apply(r.input ? r.input[0] : null, [t, r]) : r.input && r.input.trigger("change"), r.inline ? this._updateDatepicker(r) : (this._hideDatepicker(), this._lastInput = r.input[0], typeof r.input[0] != "object" && r.input.focus(), this._lastInput = null)
}, _updateAlternate: function (e) {
var t = this._get(e, "altField");
if (t) {
var n = this._get(e, "altFormat") || this._get(e, "dateFormat"), r = this._getDate(e), i = this.formatDate(n, r, this._getFormatConfig(e));
$(t).each(function () {
$(this).val(i)
})
}
}, noWeekends: function (e) {
var t = e.getDay();
return[t > 0 && t < 6, ""]
}, iso8601Week: function (e) {
var t = new Date(e.getTime());
t.setDate(t.getDate() + 4 - (t.getDay() || 7));
var n = t.getTime();
return t.setMonth(0), t.setDate(1), Math.floor(Math.round((n - t) / 864e5) / 7) + 1
}, parseDate: function (e, t, n) {
if (e == null || t == null)throw"Invalid arguments";
t = typeof t == "object" ? t.toString() : t + "";
if (t == "")return null;
var r = (n ? n.shortYearCutoff : null) || this._defaults.shortYearCutoff;
r = typeof r != "string" ? r : (new Date).getFullYear() % 100 + parseInt(r, 10);
var i = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort, s = (n ? n.dayNames : null) || this._defaults.dayNames, o = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort, u = (n ? n.monthNames : null) || this._defaults.monthNames, a = -1, f = -1, l = -1, c = -1, h = !1, p = function (t) {
var n = y + 1 < e.length && e.charAt(y + 1) == t;
return n && y++, n
}, d = function (e) {
var n = p(e), r = e == "@" ? 14 : e == "!" ? 20 : e == "y" && n ? 4 : e == "o" ? 3 : 2, i = new RegExp("^\\d{1," + r + "}"), s = t.substring(g).match(i);
if (!s)throw"Missing number at position " + g;
return g += s[0].length, parseInt(s[0], 10)
}, v = function (e, n, r) {
var i = $.map(p(e) ? r : n,function (e, t) {
return[
[t, e]
]
}).sort(function (e, t) {
return-(e[1].length - t[1].length)
}), s = -1;
$.each(i, function (e, n) {
var r = n[1];
if (t.substr(g, r.length).toLowerCase() == r.toLowerCase())return s = n[0], g += r.length, !1
});
if (s != -1)return s + 1;
throw"Unknown name at position " + g
}, m = function () {
if (t.charAt(g) != e.charAt(y))throw"Unexpected literal at position " + g;
g++
}, g = 0;
for (var y = 0; y < e.length; y++)if (h)e.charAt(y) == "'" && !p("'") ? h = !1 : m(); else switch (e.charAt(y)) {
case"d":
l = d("d");
break;
case"D":
v("D", i, s);
break;
case"o":
c = d("o");
break;
case"m":
f = d("m");
break;
case"M":
f = v("M", o, u);
break;
case"y":
a = d("y");
break;
case"@":
var b = new Date(d("@"));
a = b.getFullYear(), f = b.getMonth() + 1, l = b.getDate();
break;
case"!":
var b = new Date((d("!") - this._ticksTo1970) / 1e4);
a = b.getFullYear(), f = b.getMonth() + 1, l = b.getDate();
break;
case"'":
p("'") ? m() : h = !0;
break;
default:
m()
}
if (g < t.length) {
var w = t.substr(g);
if (!/^\s+/.test(w))throw"Extra/unparsed characters found in date: " + w
}
a == -1 ? a = (new Date).getFullYear() : a < 100 && (a += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (a <= r ? 0 : -100));
if (c > -1) {
f = 1, l = c;
do {
var E = this._getDaysInMonth(a, f - 1);
if (l <= E)break;
f++, l -= E
} while (!0)
}
var b = this._daylightSavingAdjust(new Date(a, f - 1, l));
if (b.getFullYear() != a || b.getMonth() + 1 != f || b.getDate() != l)throw"Invalid date";
return b
}, ATOM: "yy-mm-dd", COOKIE: "D, dd M yy", ISO_8601: "yy-mm-dd", RFC_822: "D, d M y", RFC_850: "DD, dd-M-y", RFC_1036: "D, d M y", RFC_1123: "D, d M yy", RFC_2822: "D, d M yy", RSS: "D, d M y", TICKS: "!", TIMESTAMP: "@", W3C: "yy-mm-dd", _ticksTo1970: (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) * 24 * 60 * 60 * 1e7, formatDate: function (e, t, n) {
if (!t)return"";
var r = (n ? n.dayNamesShort : null) || this._defaults.dayNamesShort, i = (n ? n.dayNames : null) || this._defaults.dayNames, s = (n ? n.monthNamesShort : null) || this._defaults.monthNamesShort, o = (n ? n.monthNames : null) || this._defaults.monthNames, u = function (t) {
var n = h + 1 < e.length && e.charAt(h + 1) == t;
return n && h++, n
}, a = function (e, t, n) {
var r = "" + t;
if (u(e))while (r.length < n)r = "0" + r;
return r
}, f = function (e, t, n, r) {
return u(e) ? r[t] : n[t]
}, l = "", c = !1;
if (t)for (var h = 0; h < e.length; h++)if (c)e.charAt(h) == "'" && !u("'") ? c = !1 : l += e.charAt(h); else switch (e.charAt(h)) {
case"d":
l += a("d", t.getDate(), 2);
break;
case"D":
l += f("D", t.getDay(), r, i);
break;
case"o":
l += a("o", Math.round(((new Date(t.getFullYear(), t.getMonth(), t.getDate())).getTime() - (new Date(t.getFullYear(), 0, 0)).getTime()) / 864e5), 3);
break;
case"m":
l += a("m", t.getMonth() + 1, 2);
break;
case"M":
l += f("M", t.getMonth(), s, o);
break;
case"y":
l += u("y") ? t.getFullYear() : (t.getYear() % 100 < 10 ? "0" : "") + t.getYear() % 100;
break;
case"@":
l += t.getTime();
break;
case"!":
l += t.getTime() * 1e4 + this._ticksTo1970;
break;
case"'":
u("'") ? l += "'" : c = !0;
break;
default:
l += e.charAt(h)
}
return l
}, _possibleChars: function (e) {
var t = "", n = !1, r = function (t) {
var n = i + 1 < e.length && e.charAt(i + 1) == t;
return n && i++, n
};
for (var i = 0; i < e.length; i++)if (n)e.charAt(i) == "'" && !r("'") ? n = !1 : t += e.charAt(i); else switch (e.charAt(i)) {
case"d":
case"m":
case"y":
case"@":
t += "0123456789";
break;
case"D":
case"M":
return null;
case"'":
r("'") ? t += "'" : n = !0;
break;
default:
t += e.charAt(i)
}
return t
}, _get: function (e, t) {
return e.settings[t] !== undefined ? e.settings[t] : this._defaults[t]
}, _setDateFromField: function (e, t) {
if (e.input.val() == e.lastVal)return;
var n = this._get(e, "dateFormat"), r = e.lastVal = e.input ? e.input.val() : null, i, s;
i = s = this._getDefaultDate(e);
var o = this._getFormatConfig(e);
try {
i = this.parseDate(n, r, o) || s
} catch (u) {
this.log(u), r = t ? "" : r
}
e.selectedDay = i.getDate(), e.drawMonth = e.selectedMonth = i.getMonth(), e.drawYear = e.selectedYear = i.getFullYear(), e.currentDay = r ? i.getDate() : 0, e.currentMonth = r ? i.getMonth() : 0, e.currentYear = r ? i.getFullYear() : 0, this._adjustInstDate(e)
}, _getDefaultDate: function (e) {
return this._restrictMinMax(e, this._determineDate(e, this._get(e, "defaultDate"), new Date))
}, _determineDate: function (e, t, n) {
var r = function (e) {
var t = new Date;
return t.setDate(t.getDate() + e), t
}, i = function (t) {
try {
return $.datepicker.parseDate($.datepicker._get(e, "dateFormat"), t, $.datepicker._getFormatConfig(e))
} catch (n) {
}
var r = (t.toLowerCase().match(/^c/) ? $.datepicker._getDate(e) : null) || new Date, i = r.getFullYear(), s = r.getMonth(), o = r.getDate(), u = /([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, a = u.exec(t);
while (a) {
switch (a[2] || "d") {
case"d":
case"D":
o += parseInt(a[1], 10);
break;
case"w":
case"W":
o += parseInt(a[1], 10) * 7;
break;
case"m":
case"M":
s += parseInt(a[1], 10), o = Math.min(o, $.datepicker._getDaysInMonth(i, s));
break;
case"y":
case"Y":
i += parseInt(a[1], 10), o = Math.min(o, $.datepicker._getDaysInMonth(i, s))
}
a = u.exec(t)
}
return new Date(i, s, o)
}, s = t == null || t === "" ? n : typeof t == "string" ? i(t) : typeof t == "number" ? isNaN(t) ? n : r(t) : new Date(t.getTime());
return s = s && s.toString() == "Invalid Date" ? n : s, s && (s.setHours(0), s.setMinutes(0), s.setSeconds(0), s.setMilliseconds(0)), this._daylightSavingAdjust(s)
}, _daylightSavingAdjust: function (e) {
return e ? (e.setHours(e.getHours() > 12 ? e.getHours() + 2 : 0), e) : null
}, _setDate: function (e, t, n) {
var r = !t, i = e.selectedMonth, s = e.selectedYear, o = this._restrictMinMax(e, this._determineDate(e, t, new Date));
e.selectedDay = e.currentDay = o.getDate(), e.drawMonth = e.selectedMonth = e.currentMonth = o.getMonth(), e.drawYear = e.selectedYear = e.currentYear = o.getFullYear(), (i != e.selectedMonth || s != e.selectedYear) && !n && this._notifyChange(e), this._adjustInstDate(e), e.input && e.input.val(r ? "" : this._formatDate(e))
}, _getDate: function (e) {
var t = !e.currentYear || e.input && e.input.val() == "" ? null : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
return t
}, _attachHandlers: function (e) {
var t = this._get(e, "stepMonths"), n = "#" + e.id.replace(/\\\\/g, "\\");
e.dpDiv.find("[data-handler]").map(function () {
var e = {prev: function () {
window["DP_jQuery_" + dpuuid].datepicker._adjustDate(n, -t, "M")
}, next: function () {
window["DP_jQuery_" + dpuuid].datepicker._adjustDate(n, +t, "M")
}, hide: function () {
window["DP_jQuery_" + dpuuid].datepicker._hideDatepicker()
}, today: function () {
window["DP_jQuery_" + dpuuid].datepicker._gotoToday(n)
}, selectDay: function () {
return window["DP_jQuery_" + dpuuid].datepicker._selectDay(n, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this), !1
}, selectMonth: function () {
return window["DP_jQuery_" + dpuuid].datepicker._selectMonthYear(n, this, "M"), !1
}, selectYear: function () {
return window["DP_jQuery_" + dpuuid].datepicker._selectMonthYear(n, this, "Y"), !1
}};
$(this).bind(this.getAttribute("data-event"), e[this.getAttribute("data-handler")])
})
}, _generateHTML: function (e) {
var t = new Date;
t = this._daylightSavingAdjust(new Date(t.getFullYear(), t.getMonth(), t.getDate()));
var n = this._get(e, "isRTL"), r = this._get(e, "showButtonPanel"), i = this._get(e, "hideIfNoPrevNext"), s = this._get(e, "navigationAsDateFormat"), o = this._getNumberOfMonths(e), u = this._get(e, "showCurrentAtPos"), a = this._get(e, "stepMonths"), f = o[0] != 1 || o[1] != 1, l = this._daylightSavingAdjust(e.currentDay ? new Date(e.currentYear, e.currentMonth, e.currentDay) : new Date(9999, 9, 9)), c = this._getMinMaxDate(e, "min"), h = this._getMinMaxDate(e, "max"), p = e.drawMonth - u, d = e.drawYear;
p < 0 && (p += 12, d--);
if (h) {
var v = this._daylightSavingAdjust(new Date(h.getFullYear(), h.getMonth() - o[0] * o[1] + 1, h.getDate()));
v = c && v < c ? c : v;
while (this._daylightSavingAdjust(new Date(d, p, 1)) > v)p--, p < 0 && (p = 11, d--)
}
e.drawMonth = p, e.drawYear = d;
var m = this._get(e, "prevText");
m = s ? this.formatDate(m, this._daylightSavingAdjust(new Date(d, p - a, 1)), this._getFormatConfig(e)) : m;
var g = this._canAdjustMonth(e, -1, d, p) ? '<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="' + m + '"><span class="ui-icon ui-icon-circle-triangle-' + (n ? "e" : "w") + '">' + m + "</span></a>" : i ? "" : '<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="' + m + '"><span class="ui-icon ui-icon-circle-triangle-' + (n ? "e" : "w") + '">' + m + "</span></a>", y = this._get(e, "nextText");
y = s ? this.formatDate(y, this._daylightSavingAdjust(new Date(d, p + a, 1)), this._getFormatConfig(e)) : y;
var b = this._canAdjustMonth(e, 1, d, p) ? '<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="' + y + '"><span class="ui-icon ui-icon-circle-triangle-' + (n ? "w" : "e") + '">' + y + "</span></a>" : i ? "" : '<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="' + y + '"><span class="ui-icon ui-icon-circle-triangle-' + (n ? "w" : "e") + '">' + y + "</span></a>", w = this._get(e, "currentText"), E = this._get(e, "gotoCurrent") && e.currentDay ? l : t;
w = s ? this.formatDate(w, E, this._getFormatConfig(e)) : w;
var S = e.inline ? "" : '<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">' + this._get(e, "closeText") + "</button>", x = r ? '<div class="ui-datepicker-buttonpane ui-widget-content">' + (n ? S : "") + (this._isInRange(e, E) ? '<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">' + w + "</button>" : "") + (n ? "" : S) + "</div>" : "", T = parseInt(this._get(e, "firstDay"), 10);
T = isNaN(T) ? 0 : T;
var N = this._get(e, "showWeek"), C = this._get(e, "dayNames"), k = this._get(e, "dayNamesShort"), L = this._get(e, "dayNamesMin"), A = this._get(e, "monthNames"), O = this._get(e, "monthNamesShort"), M = this._get(e, "beforeShowDay"), _ = this._get(e, "showOtherMonths"), D = this._get(e, "selectOtherMonths"), P = this._get(e, "calculateWeek") || this.iso8601Week, H = this._getDefaultDate(e), B = "";
for (var j = 0; j < o[0]; j++) {
var F = "";
this.maxRows = 4;
for (var I = 0; I < o[1]; I++) {
var q = this._daylightSavingAdjust(new Date(d, p, e.selectedDay)), R = " ui-corner-all", U = "";
if (f) {
U += '<div class="ui-datepicker-group';
if (o[1] > 1)switch (I) {
case 0:
U += " ui-datepicker-group-first", R = " ui-corner-" + (n ? "right" : "left");
break;
case o[1] - 1:
U += " ui-datepicker-group-last", R = " ui-corner-" + (n ? "left" : "right");
break;
default:
U += " ui-datepicker-group-middle", R = ""
}
U += '">'
}
U += '<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix' + R + '">' + (/all|left/.test(R) && j == 0 ? n ? b : g : "") + (/all|right/.test(R) && j == 0 ? n ? g : b : "") + this._generateMonthYearHeader(e, p, d, c, h, j > 0 || I > 0, A, O) + '</div><table class="ui-datepicker-calendar"><thead>' + "<tr>";
var z = N ? '<th class="ui-datepicker-week-col">' + this._get(e, "weekHeader") + "</th>" : "";
for (var W = 0; W < 7; W++) {
var X = (W + T) % 7;
z += "<th" + ((W + T + 6) % 7 >= 5 ? ' class="ui-datepicker-week-end"' : "") + ">" + '<span title="' + C[X] + '">' + L[X] + "</span></th>"
}
U += z + "</tr></thead><tbody>";
var V = this._getDaysInMonth(d, p);
d == e.selectedYear && p == e.selectedMonth && (e.selectedDay = Math.min(e.selectedDay, V));
var J = (this._getFirstDayOfMonth(d, p) - T + 7) % 7, K = Math.ceil((J + V) / 7), Q = f ? this.maxRows > K ? this.maxRows : K : K;
this.maxRows = Q;
var G = this._daylightSavingAdjust(new Date(d, p, 1 - J));
for (var Y = 0; Y < Q; Y++) {
U += "<tr>";
var Z = N ? '<td class="ui-datepicker-week-col">' + this._get(e, "calculateWeek")(G) + "</td>" : "";
for (var W = 0; W < 7; W++) {
var et = M ? M.apply(e.input ? e.input[0] : null, [G]) : [!0, ""], tt = G.getMonth() != p, nt = tt && !D || !et[0] || c && G < c || h && G > h;
Z += '<td class="' + ((W + T + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (tt ? " ui-datepicker-other-month" : "") + (G.getTime() == q.getTime() && p == e.selectedMonth && e._keyEvent || H.getTime() == G.getTime() && H.getTime() == q.getTime() ? " " + this._dayOverClass : "") + (nt ? " " + this._unselectableClass + " ui-state-disabled" : "") + (tt && !_ ? "" : " " + et[1] + (G.getTime() == l.getTime() ? " " + this._currentClass : "") + (G.getTime() == t.getTime() ? " ui-datepicker-today" : "")) + '"' + ((!tt || _) && et[2] ? ' title="' + et[2] + '"' : "") + (nt ? "" : ' data-handler="selectDay" data-event="click" data-month="' + G.getMonth() + '" data-year="' + G.getFullYear() + '"') + ">" + (tt && !_ ? "&#xa0;" : nt ? '<span class="ui-state-default">' + G.getDate() + "</span>" : '<a class="ui-state-default' + (G.getTime() == t.getTime() ? " ui-state-highlight" : "") + (G.getTime() == l.getTime() ? " ui-state-active" : "") + (tt ? " ui-priority-secondary" : "") + '" href="#">' + G.getDate() + "</a>") + "</td>", G.setDate(G.getDate() + 1), G = this._daylightSavingAdjust(G)
}
U += Z + "</tr>"
}
p++, p > 11 && (p = 0, d++), U += "</tbody></table>" + (f ? "</div>" + (o[0] > 0 && I == o[1] - 1 ? '<div class="ui-datepicker-row-break"></div>' : "") : ""), F += U
}
B += F
}
return B += x + ($.ui.ie6 && !e.inline ? '<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>' : ""), e._keyEvent = !1, B
}, _generateMonthYearHeader: function (e, t, n, r, i, s, o, u) {
var a = this._get(e, "changeMonth"), f = this._get(e, "changeYear"), l = this._get(e, "showMonthAfterYear"), c = '<div class="ui-datepicker-title">', h = "";
if (s || !a)h += '<span class="ui-datepicker-month">' + o[t] + "</span>"; else {
var p = r && r.getFullYear() == n, d = i && i.getFullYear() == n;
h += '<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';
for (var v = 0; v < 12; v++)(!p || v >= r.getMonth()) && (!d || v <= i.getMonth()) && (h += '<option value="' + v + '"' + (v == t ? ' selected="selected"' : "") + ">" + u[v] + "</option>");
h += "</select>"
}
l || (c += h + (s || !a || !f ? "&#xa0;" : ""));
if (!e.yearshtml) {
e.yearshtml = "";
if (s || !f)c += '<span class="ui-datepicker-year">' + n + "</span>"; else {
var m = this._get(e, "yearRange").split(":"), g = (new Date).getFullYear(), y = function (e) {
var t = e.match(/c[+-].*/) ? n + parseInt(e.substring(1), 10) : e.match(/[+-].*/) ? g + parseInt(e, 10) : parseInt(e, 10);
return isNaN(t) ? g : t
}, b = y(m[0]), w = Math.max(b, y(m[1] || ""));
b = r ? Math.max(b, r.getFullYear()) : b, w = i ? Math.min(w, i.getFullYear()) : w, e.yearshtml += '<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';
for (; b <= w; b++)e.yearshtml += '<option value="' + b + '"' + (b == n ? ' selected="selected"' : "") + ">" + b + "</option>";
e.yearshtml += "</select>", c += e.yearshtml, e.yearshtml = null
}
}
return c += this._get(e, "yearSuffix"), l && (c += (s || !a || !f ? "&#xa0;" : "") + h), c += "</div>", c
}, _adjustInstDate: function (e, t, n) {
var r = e.drawYear + (n == "Y" ? t : 0), i = e.drawMonth + (n == "M" ? t : 0), s = Math.min(e.selectedDay, this._getDaysInMonth(r, i)) + (n == "D" ? t : 0), o = this._restrictMinMax(e, this._daylightSavingAdjust(new Date(r, i, s)));
e.selectedDay = o.getDate(), e.drawMonth = e.selectedMonth = o.getMonth(), e.drawYear = e.selectedYear = o.getFullYear(), (n == "M" || n == "Y") && this._notifyChange(e)
}, _restrictMinMax: function (e, t) {
var n = this._getMinMaxDate(e, "min"), r = this._getMinMaxDate(e, "max"), i = n && t < n ? n : t;
return i = r && i > r ? r : i, i
}, _notifyChange: function (e) {
var t = this._get(e, "onChangeMonthYear");
t && t.apply(e.input ? e.input[0] : null, [e.selectedYear, e.selectedMonth + 1, e])
}, _getNumberOfMonths: function (e) {
var t = this._get(e, "numberOfMonths");
return t == null ? [1, 1] : typeof t == "number" ? [1, t] : t
}, _getMinMaxDate: function (e, t) {
return this._determineDate(e, this._get(e, t + "Date"), null)
}, _getDaysInMonth: function (e, t) {
return 32 - this._daylightSavingAdjust(new Date(e, t, 32)).getDate()
}, _getFirstDayOfMonth: function (e, t) {
return(new Date(e, t, 1)).getDay()
}, _canAdjustMonth: function (e, t, n, r) {
var i = this._getNumberOfMonths(e), s = this._daylightSavingAdjust(new Date(n, r + (t < 0 ? t : i[0] * i[1]), 1));
return t < 0 && s.setDate(this._getDaysInMonth(s.getFullYear(), s.getMonth())), this._isInRange(e, s)
}, _isInRange: function (e, t) {
var n = this._getMinMaxDate(e, "min"), r = this._getMinMaxDate(e, "max");
return(!n || t.getTime() >= n.getTime()) && (!r || t.getTime() <= r.getTime())
}, _getFormatConfig: function (e) {
var t = this._get(e, "shortYearCutoff");
return t = typeof t != "string" ? t : (new Date).getFullYear() % 100 + parseInt(t, 10), {shortYearCutoff: t, dayNamesShort: this._get(e, "dayNamesShort"), dayNames: this._get(e, "dayNames"), monthNamesShort: this._get(e, "monthNamesShort"), monthNames: this._get(e, "monthNames")}
}, _formatDate: function (e, t, n, r) {
t || (e.currentDay = e.selectedDay, e.currentMonth = e.selectedMonth, e.currentYear = e.selectedYear);
var i = t ? typeof t == "object" ? t : this._daylightSavingAdjust(new Date(r, n, t)) : this._daylightSavingAdjust(new Date(e.currentYear, e.currentMonth, e.currentDay));
return this.formatDate(this._get(e, "dateFormat"), i, this._getFormatConfig(e))
}}), $.fn.datepicker = function (e) {
if (!this.length)return this;
$.datepicker.initialized || ($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv), $.datepicker.initialized = !0);
var t = Array.prototype.slice.call(arguments, 1);
return typeof e != "string" || e != "isDisabled" && e != "getDate" && e != "widget" ? e == "option" && arguments.length == 2 && typeof arguments[1] == "string" ? $.datepicker["_" + e + "Datepicker"].apply($.datepicker, [this[0]].concat(t)) : this.each(function () {
typeof e == "string" ? $.datepicker["_" + e + "Datepicker"].apply($.datepicker, [this].concat(t)) : $.datepicker._attachDatepicker(this, e)
}) : $.datepicker["_" + e + "Datepicker"].apply($.datepicker, [this[0]].concat(t))
}, $.datepicker = new Datepicker, $.datepicker.initialized = !1, $.datepicker.uuid = (new Date).getTime(), $.datepicker.version = "1.9.2", window["DP_jQuery_" + dpuuid] = $
})(jQuery);
(function (e, t) {
var n = !1;
e.widget("ui.menu", {version: "1.9.2", defaultElement: "<ul>", delay: 300, options: {icons: {submenu: "ui-icon-carat-1-e"}, menus: "ul", position: {my: "left top", at: "right top"}, role: "menu", blur: null, focus: null, select: null}, _create: function () {
this.activeMenu = this.element, this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({role: this.options.role, tabIndex: 0}).bind("click" + this.eventNamespace, e.proxy(function (e) {
this.options.disabled && e.preventDefault()
}, this)), this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"), this._on({"mousedown .ui-menu-item > a": function (e) {
e.preventDefault()
}, "click .ui-state-disabled > a": function (e) {
e.preventDefault()
}, "click .ui-menu-item:has(a)": function (t) {
var r = e(t.target).closest(".ui-menu-item");
!n && r.not(".ui-state-disabled").length && (n = !0, this.select(t), r.has(".ui-menu").length ? this.expand(t) : this.element.is(":focus") || (this.element.trigger("focus", [!0]), this.active && this.active.parents(".ui-menu").length === 1 && clearTimeout(this.timer)))
}, "mouseenter .ui-menu-item": function (t) {
var n = e(t.currentTarget);
n.siblings().children(".ui-state-active").removeClass("ui-state-active"), this.focus(t, n)
}, mouseleave: "collapseAll", "mouseleave .ui-menu": "collapseAll", focus: function (e, t) {
var n = this.active || this.element.children(".ui-menu-item").eq(0);
t || this.focus(e, n)
}, blur: function (t) {
this._delay(function () {
e.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(t)
})
}, keydown: "_keydown"}), this.refresh(), this._on(this.document, {click: function (t) {
e(t.target).closest(".ui-menu").length || this.collapseAll(t), n = !1
}})
}, _destroy: function () {
this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(), this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function () {
var t = e(this);
t.data("ui-menu-submenu-carat") && t.remove()
}), this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")
}, _keydown: function (t) {
function a(e) {
return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
}
var n, r, i, s, o, u = !0;
switch (t.keyCode) {
case e.ui.keyCode.PAGE_UP:
this.previousPage(t);
break;
case e.ui.keyCode.PAGE_DOWN:
this.nextPage(t);
break;
case e.ui.keyCode.HOME:
this._move("first", "first", t);
break;
case e.ui.keyCode.END:
this._move("last", "last", t);
break;
case e.ui.keyCode.UP:
this.previous(t);
break;
case e.ui.keyCode.DOWN:
this.next(t);
break;
case e.ui.keyCode.LEFT:
this.collapse(t);
break;
case e.ui.keyCode.RIGHT:
this.active && !this.active.is(".ui-state-disabled") && this.expand(t);
break;
case e.ui.keyCode.ENTER:
case e.ui.keyCode.SPACE:
this._activate(t);
break;
case e.ui.keyCode.ESCAPE:
this.collapse(t);
break;
default:
u = !1, r = this.previousFilter || "", i = String.fromCharCode(t.keyCode), s = !1, clearTimeout(this.filterTimer), i === r ? s = !0 : i = r + i, o = new RegExp("^" + a(i), "i"), n = this.activeMenu.children(".ui-menu-item").filter(function () {
return o.test(e(this).children("a").text())
}), n = s && n.index(this.active.next()) !== -1 ? this.active.nextAll(".ui-menu-item") : n, n.length || (i = String.fromCharCode(t.keyCode), o = new RegExp("^" + a(i), "i"), n = this.activeMenu.children(".ui-menu-item").filter(function () {
return o.test(e(this).children("a").text())
})), n.length ? (this.focus(t, n), n.length > 1 ? (this.previousFilter = i, this.filterTimer = this._delay(function () {
delete this.previousFilter
}, 1e3)) : delete this.previousFilter) : delete this.previousFilter
}
u && t.preventDefault()
}, _activate: function (e) {
this.active.is(".ui-state-disabled") || (this.active.children("a[aria-haspopup='true']").length ? this.expand(e) : this.select(e))
}, refresh: function () {
var t, n = this.options.icons.submenu, r = this.element.find(this.options.menus);
r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role: this.options.role, "aria-hidden": "true", "aria-expanded": "false"}).each(function () {
var t = e(this), r = t.prev("a"), i = e("<span>").addClass("ui-menu-icon ui-icon " + n).data("ui-menu-submenu-carat", !0);
r.attr("aria-haspopup", "true").prepend(i), t.attr("aria-labelledby", r.attr("id"))
}), t = r.add(this.element), t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex: -1, role: this._itemRole()}), t.children(":not(.ui-menu-item)").each(function () {
var t = e(this);
/[^\-—–\s]/.test(t.text()) || t.addClass("ui-widget-content ui-menu-divider")
}), t.children(".ui-state-disabled").attr("aria-disabled", "true"), this.active && !e.contains(this.element[0], this.active[0]) && this.blur()
}, _itemRole: function () {
return{menu: "menuitem", listbox: "option"}[this.options.role]
}, focus: function (e, t) {
var n, r;
this.blur(e, e && e.type === "focus"), this._scrollIntoView(t), this.active = t.first(), r = this.active.children("a").addClass("ui-state-focus"), this.options.role && this.element.attr("aria-activedescendant", r.attr("id")), this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"), e && e.type === "keydown" ? this._close() : this.timer = this._delay(function () {
this._close()
}, this.delay), n = t.children(".ui-menu"), n.length && /^mouse/.test(e.type) && this._startOpening(n), this.activeMenu = t.parent(), this._trigger("focus", e, {item: t})
}, _scrollIntoView: function (t) {
var n, r, i, s, o, u;
this._hasScroll() && (n = parseFloat(e.css(this.activeMenu[0], "borderTopWidth")) || 0, r = parseFloat(e.css(this.activeMenu[0], "paddingTop")) || 0, i = t.offset().top - this.activeMenu.offset().top - n - r, s = this.activeMenu.scrollTop(), o = this.activeMenu.height(), u = t.height(), i < 0 ? this.activeMenu.scrollTop(s + i) : i + u > o && this.activeMenu.scrollTop(s + i - o + u))
}, blur: function (e, t) {
t || clearTimeout(this.timer);
if (!this.active)return;
this.active.children("a").removeClass("ui-state-focus"), this.active = null, this._trigger("blur", e, {item: this.active})
}, _startOpening: function (e) {
clearTimeout(this.timer);
if (e.attr("aria-hidden") !== "true")return;
this.timer = this._delay(function () {
this._close(), this._open(e)
}, this.delay)
}, _open: function (t) {
var n = e.extend({of: this.active}, this.options.position);
clearTimeout(this.timer), this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden", "true"), t.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(n)
}, collapseAll: function (t, n) {
clearTimeout(this.timer), this.timer = this._delay(function () {
var r = n ? this.element : e(t && t.target).closest(this.element.find(".ui-menu"));
r.length || (r = this.element), this._close(r), this.blur(t), this.activeMenu = r
}, this.delay)
}, _close: function (e) {
e || (e = this.active ? this.active.parent() : this.element), e.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find("a.ui-state-active").removeClass("ui-state-active")
}, collapse: function (e) {
var t = this.active && this.active.parent().closest(".ui-menu-item", this.element);
t && t.length && (this._close(), this.focus(e, t))
}, expand: function (e) {
var t = this.active && this.active.children(".ui-menu ").children(".ui-menu-item").first();
t && t.length && (this._open(t.parent()), this._delay(function () {
this.focus(e, t)
}))
}, next: function (e) {
this._move("next", "first", e)
}, previous: function (e) {
this._move("prev", "last", e)
}, isFirstItem: function () {
return this.active && !this.active.prevAll(".ui-menu-item").length
}, isLastItem: function () {
return this.active && !this.active.nextAll(".ui-menu-item").length
}, _move: function (e, t, n) {
var r;
this.active && (e === "first" || e === "last" ? r = this.active[e === "first" ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : r = this.active[e + "All"](".ui-menu-item").eq(0));
if (!r || !r.length || !this.active)r = this.activeMenu.children(".ui-menu-item")[t]();
this.focus(n, r)
}, nextPage: function (t) {
var n, r, i;
if (!this.active) {
this.next(t);
return
}
if (this.isLastItem())return;
this._hasScroll() ? (r = this.active.offset().top, i = this.element.height(), this.active.nextAll(".ui-menu-item").each(function () {
return n = e(this), n.offset().top - r - i < 0
}), this.focus(t, n)) : this.focus(t, this.activeMenu.children(".ui-menu-item")[this.active ? "last" : "first"]())
}, previousPage: function (t) {
var n, r, i;
if (!this.active) {
this.next(t);
return
}
if (this.isFirstItem())return;
this._hasScroll() ? (r = this.active.offset().top, i = this.element.height(), this.active.prevAll(".ui-menu-item").each(function () {
return n = e(this), n.offset().top - r + i > 0
}), this.focus(t, n)) : this.focus(t, this.activeMenu.children(".ui-menu-item").first())
}, _hasScroll: function () {
return this.element.outerHeight() < this.element.prop("scrollHeight")
}, select: function (t) {
this.active = this.active || e(t.target).closest(".ui-menu-item");
var n = {item: this.active};
this.active.has(".ui-menu").length || this.collapseAll(t, !0), this._trigger("select", t, n)
}})
})(jQuery);
(function (e, t) {
var n = 5;
e.widget("ui.slider", e.ui.mouse, {version: "1.9.2", widgetEventPrefix: "slide", options: {animate: !1, distance: 0, max: 100, min: 0, orientation: "horizontal", range: !1, step: 1, value: 0, values: null}, _create: function () {
var t, r, i = this.options, s = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"), o = "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>", u = [];
this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, this._detectOrientation(), this._mouseInit(), this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget" + " ui-widget-content" + " ui-corner-all" + (i.disabled ? " ui-slider-disabled ui-disabled" : "")), this.range = e([]), i.range && (i.range === !0 && (i.values || (i.values = [this._valueMin(), this._valueMin()]), i.values.length && i.values.length !== 2 && (i.values = [i.values[0], i.values[0]])), this.range = e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header" + (i.range === "min" || i.range === "max" ? " ui-slider-range-" + i.range : ""))), r = i.values && i.values.length || 1;
for (t = s.length; t < r; t++)u.push(o);
this.handles = s.add(e(u.join("")).appendTo(this.element)), this.handle = this.handles.eq(0), this.handles.add(this.range).filter("a").click(function (e) {
e.preventDefault()
}).mouseenter(function () {
i.disabled || e(this).addClass("ui-state-hover")
}).mouseleave(function () {
e(this).removeClass("ui-state-hover")
}).focus(function () {
i.disabled ? e(this).blur() : (e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"), e(this).addClass("ui-state-focus"))
}).blur(function () {
e(this).removeClass("ui-state-focus")
}), this.handles.each(function (t) {
e(this).data("ui-slider-handle-index", t)
}), this._on(this.handles, {keydown: function (t) {
var r, i, s, o, u = e(t.target).data("ui-slider-handle-index");
switch (t.keyCode) {
case e.ui.keyCode.HOME:
case e.ui.keyCode.END:
case e.ui.keyCode.PAGE_UP:
case e.ui.keyCode.PAGE_DOWN:
case e.ui.keyCode.UP:
case e.ui.keyCode.RIGHT:
case e.ui.keyCode.DOWN:
case e.ui.keyCode.LEFT:
t.preventDefault();
if (!this._keySliding) {
this._keySliding = !0, e(t.target).addClass("ui-state-active"), r = this._start(t, u);
if (r === !1)return
}
}
o = this.options.step, this.options.values && this.options.values.length ? i = s = this.values(u) : i = s = this.value();
switch (t.keyCode) {
case e.ui.keyCode.HOME:
s = this._valueMin();
break;
case e.ui.keyCode.END:
s = this._valueMax();
break;
case e.ui.keyCode.PAGE_UP:
s = this._trimAlignValue(i + (this._valueMax() - this._valueMin()) / n);
break;
case e.ui.keyCode.PAGE_DOWN:
s = this._trimAlignValue(i - (this._valueMax() - this._valueMin()) / n);
break;
case e.ui.keyCode.UP:
case e.ui.keyCode.RIGHT:
if (i === this._valueMax())return;
s = this._trimAlignValue(i + o);
break;
case e.ui.keyCode.DOWN:
case e.ui.keyCode.LEFT:
if (i === this._valueMin())return;
s = this._trimAlignValue(i - o)
}
this._slide(t, u, s)
}, keyup: function (t) {
var n = e(t.target).data("ui-slider-handle-index");
this._keySliding && (this._keySliding = !1, this._stop(t, n), this._change(t, n), e(t.target).removeClass("ui-state-active"))
}}), this._refreshValue(), this._animateOff = !1
}, _destroy: function () {
this.handles.remove(), this.range.remove(), this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"), this._mouseDestroy()
}, _mouseCapture: function (t) {
var n, r, i, s, o, u, a, f, l = this, c = this.options;
return c.disabled ? !1 : (this.elementSize = {width: this.element.outerWidth(), height: this.element.outerHeight()}, this.elementOffset = this.element.offset(), n = {x: t.pageX, y: t.pageY}, r = this._normValueFromMouse(n), i = this._valueMax() - this._valueMin() + 1, this.handles.each(function (t) {
var n = Math.abs(r - l.values(t));
i > n && (i = n, s = e(this), o = t)
}), c.range === !0 && this.values(1) === c.min && (o += 1, s = e(this.handles[o])), u = this._start(t, o), u === !1 ? !1 : (this._mouseSliding = !0, this._handleIndex = o, s.addClass("ui-state-active").focus(), a = s.offset(), f = !e(t.target).parents().andSelf().is(".ui-slider-handle"), this._clickOffset = f ? {left: 0, top: 0} : {left: t.pageX - a.left - s.width() / 2, top: t.pageY - a.top - s.height() / 2 - (parseInt(s.css("borderTopWidth"), 10) || 0) - (parseInt(s.css("borderBottomWidth"), 10) || 0) + (parseInt(s.css("marginTop"), 10) || 0)}, this.handles.hasClass("ui-state-hover") || this._slide(t, o, r), this._animateOff = !0, !0))
}, _mouseStart: function () {
return!0
}, _mouseDrag: function (e) {
var t = {x: e.pageX, y: e.pageY}, n = this._normValueFromMouse(t);
return this._slide(e, this._handleIndex, n), !1
}, _mouseStop: function (e) {
return this.handles.removeClass("ui-state-active"), this._mouseSliding = !1, this._stop(e, this._handleIndex), this._change(e, this._handleIndex), this._handleIndex = null, this._clickOffset = null, this._animateOff = !1, !1
}, _detectOrientation: function () {
this.orientation = this.options.orientation === "vertical" ? "vertical" : "horizontal"
}, _normValueFromMouse: function (e) {
var t, n, r, i, s;
return this.orientation === "horizontal" ? (t = this.elementSize.width, n = e.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (t = this.elementSize.height, n = e.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)), r = n / t, r > 1 && (r = 1), r < 0 && (r = 0), this.orientation === "vertical" && (r = 1 - r), i = this._valueMax() - this._valueMin(), s = this._valueMin() + r * i, this._trimAlignValue(s)
}, _start: function (e, t) {
var n = {handle: this.handles[t], value: this.value()};
return this.options.values && this.options.values.length && (n.value = this.values(t), n.values = this.values()), this._trigger("start", e, n)
}, _slide: function (e, t, n) {
var r, i, s;
this.options.values && this.options.values.length ? (r = this.values(t ? 0 : 1), this.options.values.length === 2 && this.options.range === !0 && (t === 0 && n > r || t === 1 && n < r) && (n = r), n !== this.values(t) && (i = this.values(), i[t] = n, s = this._trigger("slide", e, {handle: this.handles[t], value: n, values: i}), r = this.values(t ? 0 : 1), s !== !1 && this.values(t, n, !0))) : n !== this.value() && (s = this._trigger("slide", e, {handle: this.handles[t], value: n}), s !== !1 && this.value(n))
}, _stop: function (e, t) {
var n = {handle: this.handles[t], value: this.value()};
this.options.values && this.options.values.length && (n.value = this.values(t), n.values = this.values()), this._trigger("stop", e, n)
}, _change: function (e, t) {
if (!this._keySliding && !this._mouseSliding) {
var n = {handle: this.handles[t], value: this.value()};
this.options.values && this.options.values.length && (n.value = this.values(t), n.values = this.values()), this._trigger("change", e, n)
}
}, value: function (e) {
if (arguments.length) {
this.options.value = this._trimAlignValue(e), this._refreshValue(), this._change(null, 0);
return
}
return this._value()
}, values: function (t, n) {
var r, i, s;
if (arguments.length > 1) {
this.options.values[t] = this._trimAlignValue(n), this._refreshValue(), this._change(null, t);
return
}
if (!arguments.length)return this._values();
if (!e.isArray(arguments[0]))return this.options.values && this.options.values.length ? this._values(t) : this.value();
r = this.options.values, i = arguments[0];
for (s = 0; s < r.length; s += 1)r[s] = this._trimAlignValue(i[s]), this._change(null, s);
this._refreshValue()
}, _setOption: function (t, n) {
var r, i = 0;
e.isArray(this.options.values) && (i = this.options.values.length), e.Widget.prototype._setOption.apply(this, arguments);
switch (t) {
case"disabled":
n ? (this.handles.filter(".ui-state-focus").blur(), this.handles.removeClass("ui-state-hover"), this.handles.prop("disabled", !0), this.element.addClass("ui-disabled")) : (this.handles.prop("disabled", !1), this.element.removeClass("ui-disabled"));
break;
case"orientation":
this._detectOrientation(), this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation), this._refreshValue();
break;
case"value":
this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1;
break;
case"values":
this._animateOff = !0, this._refreshValue();
for (r = 0; r < i; r += 1)this._change(null, r);
this._animateOff = !1;
break;
case"min":
case"max":
this._animateOff = !0, this._refreshValue(), this._animateOff = !1
}
}, _value: function () {
var e = this.options.value;
return e = this._trimAlignValue(e), e
}, _values: function (e) {
var t, n, r;
if (arguments.length)return t = this.options.values[e], t = this._trimAlignValue(t), t;
n = this.options.values.slice();
for (r = 0; r < n.length; r += 1)n[r] = this._trimAlignValue(n[r]);
return n
}, _trimAlignValue: function (e) {
if (e <= this._valueMin())return this._valueMin();
if (e >= this._valueMax())return this._valueMax();
var t = this.options.step > 0 ? this.options.step : 1, n = (e - this._valueMin()) % t, r = e - n;
return Math.abs(n) * 2 >= t && (r += n > 0 ? t : -t), parseFloat(r.toFixed(5))
}, _valueMin: function () {
return this.options.min
}, _valueMax: function () {
return this.options.max
}, _refreshValue: function () {
var t, n, r, i, s, o = this.options.range, u = this.options, a = this, f = this._animateOff ? !1 : u.animate, l = {};
this.options.values && this.options.values.length ? this.handles.each(function (r) {
n = (a.values(r) - a._valueMin()) / (a._valueMax() - a._valueMin()) * 100, l[a.orientation === "horizontal" ? "left" : "bottom"] = n + "%", e(this).stop(1, 1)[f ? "animate" : "css"](l, u.animate), a.options.range === !0 && (a.orientation === "horizontal" ? (r === 0 && a.range.stop(1, 1)[f ? "animate" : "css"]({left: n + "%"}, u.animate), r === 1 && a.range[f ? "animate" : "css"]({width: n - t + "%"}, {queue: !1, duration: u.animate})) : (r === 0 && a.range.stop(1, 1)[f ? "animate" : "css"]({bottom: n + "%"}, u.animate), r === 1 && a.range[f ? "animate" : "css"]({height: n - t + "%"}, {queue: !1, duration: u.animate}))), t = n
}) : (r = this.value(), i = this._valueMin(), s = this._valueMax(), n = s !== i ? (r - i) / (s - i) * 100 : 0, l[this.orientation === "horizontal" ? "left" : "bottom"] = n + "%", this.handle.stop(1, 1)[f ? "animate" : "css"](l, u.animate), o === "min" && this.orientation === "horizontal" && this.range.stop(1, 1)[f ? "animate" : "css"]({width: n + "%"}, u.animate), o === "max" && this.orientation === "horizontal" && this.range[f ? "animate" : "css"]({width: 100 - n + "%"}, {queue: !1, duration: u.animate}), o === "min" && this.orientation === "vertical" && this.range.stop(1, 1)[f ? "animate" : "css"]({height: n + "%"}, u.animate), o === "max" && this.orientation === "vertical" && this.range[f ? "animate" : "css"]({height: 100 - n + "%"}, {queue: !1, duration: u.animate}))
}})
})(jQuery);
jQuery(function ($) {
$.datepicker.regional['de'] = {
closeText: 'schließen',
prevText: '&#x3C;zurück',
nextText: 'Vor&#x3E;',
currentText: 'heute',
monthNames: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
monthNamesShort: ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
dayNames: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
dayNamesShort: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],
dayNamesMin: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa'],
weekHeader: 'KW',
dateFormat: 'dd.mm.yy',
firstDay: 1,
isRTL: false,
showMonthAfterYear: false,
yearSuffix: ''};
$.datepicker.setDefaults($.datepicker.regional['de']);
});
$.fn.extend({
jqEnsure: function (myOptions) {
var self = this;
var options = {
autoBinding: {
enabled: false,
selectorPrefix: '',
selectorSuffix: ''
},
errorMessages: {
enabled: false,
language: 'en',
className: 'errorMessage',
dom: '<div></div>'
},
styling: {
label: {
enabled: false,
className: 'error'
},
field: {
enabled: false,
className: 'error'
}
},
onTheFlyValidation: {
enabled: false
},
handleSubmit: {
enabled: false,
preventSubmit: false
},
debugMode: {
enabled: false
}
};
var validators = {
required: {
validate: function ($field, value, arguments) {
return (value !== '');
}
},
minLength: {
validate: function ($field, value, arguments) {
return value.length >= arguments.minLength;
}
},
maxLength: {
validate: function ($field, value, arguments) {
return value.length <= arguments.maxLength;
}
},
string: {
validate: function ($field, value, arguments) {
return typeof value === 'string';
}
},
integer: {
validate: function ($field, value, arguments) {
return typeof value === 'integer';
}
},
email: {
validate: function ($field, value, arguments) {
return value.match(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/) ? true : false;
}
},
ajax: {
validate: function ($field, value, arguments) {
}
}
};
var localization = {
en: {
required: 'This field is required!',
minLength: 'This field needs at minimum #number# characters!',
maxLength: 'This field is only allowed with a maximum of #number# characters!',
string: 'This field only allows text!',
integer: 'This field only allows numbers!',
email: 'This field expects a valid email-address!',
ajax: 'Invalid input!'
},
de: {
required: 'Dies ist ein Pflichtfeld!',
minLength: 'Dieses Feld muss mindestens #number# Zeichen haben!',
maxLength: 'Dieses Feld darf maximal #number# Zeichen haben!',
string: 'Dieses Feld erlaubt nur Text!',
integer: 'Dieses Feld erlaubt nur Zahlen!',
email: 'Dieses Feld erwartet eine gültige E-Mail Adresse!',
ajax: 'Ungültige Eingabe!'
}
};
var events = {
onInit: function () {
},
onConfigure: function () {
},
onValidate: function (fields) {
},
onSubmit: function (event, validationResult) {
},
onSingleValidate: function ($field) {
},
onSuccess: function ($fields) {
},
onFail: function ($fields) {
},
onSingleSuccess: function ($field) {
},
onSingleFail: function ($field) {
}
};
var boundValidators = {};
this.setOption = function (optionName, value) {
options[optionName] = value;
};
this.setValidator = function (validatorName, validator) {
validators[validatorName] = validator;
};
this.setEvent = function (eventName, event) {
events[eventName] = event;
};
this.bindValidator = function (selector, validatorName, arguments) {
if (typeof boundValidators[selector] === 'undefined') {
boundValidators[selector] = [];
}
boundValidators[selector].push({
validatorName: validatorName,
arguments: arguments
});
};
this.unbindValidators = function (selector) {
if (typeof boundValidators[selector] !== 'undefined') {
throw selector + ' has no bound validator!';
}
delete boundValidators[selector];
};
this.validate = function () {
var status = [],
fields = [],
validFields = [],
invalidFields = [];
$.each(boundValidators, function (index) {
var $matchingFields = $(index, $form);
var boundValidator = $(this);
$matchingFields.each(function () {
var $matchingField = $(this);
removeErrorMessage($matchingField);
$.each(boundValidator, function (index) {
var currentValidatorName = $(this)[index].validatorName;
var currentValidatorArguments = $(this)[index].arguments;
var result = validateField($matchingField, currentValidatorName, currentValidatorArguments);
events.onSingleValidate($matchingField);
status.push(result);
if (result) {
events.onSingleSuccess($matchingField);
validFields.push($matchingField);
styleLabel($matchingField, false);
styleField($matchingField, false);
} else {
events.onSingleFail($matchingField);
invalidFields.push($matchingField);
styleLabel($matchingField, true);
styleField($matchingField, true);
displayErrorMessage($matchingField, localization[options.errorMessages.language][currentValidatorName]);
}
});
});
});
$.extend(fields, validFields);
$.extend(fields, invalidFields);
events.onValidate(fields);
if ($.inArray(false, status) !== -1) {
events.onFail(invalidFields);
return false;
} else {
events.onSuccess(validFields);
return true;
}
};
var bindOnTheFlyValidation = function () {
$(':input', $form).bind('change keydown', function (event) {
self.validate();
});
};
var validateField = function ($field, validatorName, validatorArguments) {
var validator = validators[validatorName];
return validator.validate($field, $field.val(), validatorArguments);
};
var styleLabel = function ($field, error) {
if (options.styling.label.enabled === true) {
if (error === true) {
$field.prev('label').addClass(options.styling.label.className);
} else {
$field.prev('label').removeClass(options.styling.label.className);
}
}
};
var styleField = function ($field, error) {
if (options.styling.field.enabled === true) {
if (error === true) {
$field.addClass(options.styling.field.className);
} else {
$field.removeClass(options.styling.field.className);
}
}
};
var displayErrorMessage = function ($field, message) {
if (options.errorMessages.enabled === true) {
var $errorMessage = $(options.errorMessages.dom);
$errorMessage.addClass(options.errorMessages.className);
$errorMessage.html(message);
$errorMessage.insertAfter($field);
}
};
var removeErrorMessage = function ($field) {
var $errorMessage = $field.next('.' + options.errorMessages.className);
if ($errorMessage.length !== 0) {
$errorMessage.remove();
}
};
var configure = function (myOptions) {
events.onConfigure();
$.extend(true, options, myOptions.options);
$.extend(true, validators, myOptions.validators);
$.extend(true, localization, myOptions.localization);
$.extend(true, events, myOptions.events);
};
var autoBind = function () {
$.each(validators, function (index) {
var fieldClass = '.' + options.autoBinding.selectorPrefix + index + options.autoBinding.selectorSuffix;
self.bindValidator(fieldClass, index, {});
});
};
var bindSubmitHandler = function () {
$form.submit(function (event) {
var validationResult = self.validate();
if (validationResult === false && options.handleSubmit.preventSubmit === true) {
event.preventDefault();
}
events.onSubmit(event, validationResult);
})
};
events.onInit();
configure(myOptions);
var $form = $(this);
if (options.autoBinding.enabled === true) {
autoBind();
}
if (options.onTheFlyValidation.enabled === true) {
bindOnTheFlyValidation();
}
if (options.handleSubmit.enabled === true) {
bindSubmitHandler()
}
return this;
}
});
var DateTime = function (date) {
var currentDate,
dayMap = {
de: ['So', 'Mo', 'Di', 'Mi', 'Do', 'Fr', 'Sa']
},
self = this;
this.modifyDate = function (days) {
currentDate.setDate(currentDate.getDate() + days);
return this;
};
this.modifyHours = function (hours) {
currentDate.setHours(currentDate.getHours() + hours);
return this;
};
this.getShortDayName = function (language) {
if (typeof language == 'undefined') {
language = 'de';
}
return dayMap[language][currentDate.getDay()];
};
this.resetTime = function () {
currentDate.setHours(0);
currentDate.setMinutes(0);
currentDate.setSeconds(0);
return this;
};
this.isTimeBefore = function (timeString) {
var timeStringSplit = timeString.split(':');
var givenHours = +timeStringSplit[0];
var givenMinutes = +timeStringSplit[1];
if (currentDate.getHours() < givenHours) {
return true;
} else if (currentDate.getHours() == givenHours) {
if (givenMinutes > currentDate.getMinutes()) {
return true;
}
}
return false;
};
this.isTimeAfter = function (timeString) {
var timeStringSplit = timeString.split(':');
var givenHours = +timeStringSplit[0];
var givenMinutes = +timeStringSplit[1];
if (currentDate.getHours() > givenHours) {
return true;
} else if (currentDate.getHours() == givenHours) {
if (givenMinutes < currentDate.getMinutes()) {
return true;
}
}
return false;
};
this.getHours = function () {
return currentDate.getHours();
};
this.getMinutes = function () {
return currentDate.getMinutes();
};
this.getDate = function () {
return currentDate;
};
var __construct = function (date) {
currentDate = new Date(date.getTime());
return self;
};
return __construct(date);
};
;
(function (f, h, $) {
var a = 'placeholder' in h.createElement('input'), d = 'placeholder' in h.createElement('textarea'), i = $.fn, c = $.valHooks, k, j;
if (a && d) {
j = i.placeholder = function () {
return this
};
j.input = j.textarea = true
} else {
j = i.placeholder = function () {
var l = this;
l.filter((a ? 'textarea' : ':input') + '[placeholder]').not('.placeholder').bind({'focus.placeholder': b, 'blur.placeholder': e}).data('placeholder-enabled', true).trigger('blur.placeholder');
return l
};
j.input = a;
j.textarea = d;
k = {get: function (m) {
var l = $(m);
return l.data('placeholder-enabled') && l.hasClass('placeholder') ? '' : m.value
}, set: function (m, n) {
var l = $(m);
if (!l.data('placeholder-enabled')) {
return m.value = n
}
if (n == '') {
m.value = n;
if (m != h.activeElement) {
e.call(m)
}
} else {
if (l.hasClass('placeholder')) {
b.call(m, true, n) || (m.value = n)
} else {
m.value = n
}
}
return l
}};
a || (c.input = k);
d || (c.textarea = k);
$(function () {
$(h).delegate('form', 'submit.placeholder', function () {
var l = $('.placeholder', this).each(b);
setTimeout(function () {
l.each(e)
}, 10)
})
});
$(f).bind('beforeunload.placeholder', function () {
$('.placeholder').each(function () {
this.value = ''
})
})
}
function g(m) {
var l = {}, n = /^jQuery\d+$/;
$.each(m.attributes, function (p, o) {
if (o.specified && !n.test(o.name)) {
l[o.name] = o.value
}
});
return l
}
function b(m, n) {
var l = this, o = $(l);
if (l.value == o.attr('placeholder') && o.hasClass('placeholder')) {
if (o.data('placeholder-password')) {
o = o.hide().next().show().attr('id', o.removeAttr('id').data('placeholder-id'));
if (m === true) {
return o[0].value = n
}
o.focus()
} else {
l.value = '';
o.removeClass('placeholder');
l == h.activeElement && l.select()
}
}
}
function e() {
var q, l = this, p = $(l), m = p, o = this.id;
if (l.value == '') {
if (l.type == 'password') {
if (!p.data('placeholder-textinput')) {
try {
q = p.clone().attr({type: 'text'})
} catch (n) {
q = $('<input>').attr($.extend(g(this), {type: 'text'}))
}
q.removeAttr('name').data({'placeholder-password': true, 'placeholder-id': o}).bind('focus.placeholder', b);
p.data({'placeholder-textinput': q, 'placeholder-id': o}).before(q)
}
p = p.removeAttr('id').hide().prev().attr('id', o).show()
}
p.addClass('placeholder');
p[0].value = p.attr('placeholder')
} else {
p.removeClass('placeholder')
}
}
}(this, document, jQuery));
var docCookies = {
getItem: function (sKey) {
if (!sKey) { return null; }
return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*" + encodeURIComponent(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*([^;]*).*$)|^.*$"), "$1")) || null;
},
setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {
if (!sKey || /^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)) { return false; }
var sExpires = "";
if (vEnd) {
switch (vEnd.constructor) {
case Number:
sExpires = vEnd === Infinity ? "; expires=Fri, 31 Dec 9999 23:59:59 GMT" : "; max-age=" + vEnd;
break;
case String:
sExpires = "; expires=" + vEnd;
break;
case Date:
sExpires = "; expires=" + vEnd.toUTCString();
break;
}
}
document.cookie = encodeURIComponent(sKey) + "=" + encodeURIComponent(sValue) + sExpires + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "") + (bSecure ? "; secure" : "");
return true;
},
removeItem: function (sKey, sPath, sDomain) {
if (!this.hasItem(sKey)) { return false; }
document.cookie = encodeURIComponent(sKey) + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT" + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "");
return true;
},
hasItem: function (sKey) {
if (!sKey) { return false; }
return (new RegExp("(?:^|;\\s*)" + encodeURIComponent(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=")).test(document.cookie);
},
keys: function () {
var aKeys = document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g, "").split(/\s*(?:\=[^;]*)?;\s*/);
for (var nLen = aKeys.length, nIdx = 0; nIdx < nLen; nIdx++) { aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]); }
return aKeys;
}
};
(function ($) {
$.prettyPhoto = {version: '3.1.3'};
$.fn.prettyPhoto = function (pp_settings) {
pp_settings = jQuery.extend({animation_speed: 'fast', slideshow: 5000, autoplay_slideshow: false, opacity: 0.80, show_title: true, allow_resize: true, default_width: 500, default_height: 344, counter_separator_label: '/', theme: 'pp_default', horizontal_padding: 20, hideflash: false, wmode: 'opaque', autoplay: true, modal: false, deeplinking: true, overlay_gallery: true, keyboard_shortcuts: true, changepicturecallback: function () {
}, callback: function () {
}, ie6_fallback: true, markup: '<div class="pp_pic_holder"> \
<div class="ppt">&nbsp;</div> \
<div class="pp_top"> \
<div class="pp_left"></div> \
<div class="pp_middle"></div> \
<div class="pp_right"></div> \
</div> \
<div class="pp_content_container"> \
<div class="pp_left"> \
<div class="pp_right"> \
<div class="pp_content"> \
<div class="pp_loaderIcon"></div> \
<div class="pp_fade"> \
<a href="#" class="pp_expand" title="Expand the image">Expand</a> \
<div class="pp_hoverContainer"> \
<a class="pp_next" href="#">next</a> \
<a class="pp_previous" href="#">previous</a> \
</div> \
<div id="pp_full_res"></div> \
<div class="pp_details"> \
<div class="pp_nav"> \
<a href="#" class="pp_arrow_previous">Previous</a> \
<p class="currentTextHolder">0/0</p> \
<a href="#" class="pp_arrow_next">Next</a> \
</div> \
<a class="pp_close" href="#">Close</a> \
</div> \
</div> \
</div> \
</div> \
</div> \
</div> \
<div class="pp_bottom"> \
<div class="pp_left"></div> \
<div class="pp_middle"></div> \
<div class="pp_right"></div> \
</div> \
</div> \
<div class="pp_overlay"></div>', gallery_markup: '<div class="pp_gallery"> \
<a href="#" class="pp_arrow_previous">Previous</a> \
<div> \
<ul> \
{gallery} \
</ul> \
</div> \
<a href="#" class="pp_arrow_next">Next</a> \
</div>', image_markup: '<img id="fullResImage" src="{path}" />', flash_markup: '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>', quicktime_markup: '<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>', iframe_markup: '<iframe src ="{path}" width="{width}" height="{height}" frameborder="no" scrolling="no"></iframe>', inline_markup: '<div class="pp_inline">{content}</div>', custom_markup: '', social_tools: '<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="http://www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'}, pp_settings);
var matchedObjects = this, percentBased = false, pp_dimensions, pp_open, pp_contentHeight, pp_contentWidth, pp_containerHeight, pp_containerWidth, windowHeight = $(window).height(), windowWidth = $(window).width(), pp_slideshow;
doresize = true, scroll_pos = _get_scroll();
$(window).unbind('resize.prettyphoto').bind('resize.prettyphoto', function () {
_center_overlay();
_resize_overlay();
});
if (pp_settings.keyboard_shortcuts) {
$(document).unbind('keydown.prettyphoto').bind('keydown.prettyphoto', function (e) {
if (typeof $pp_pic_holder != 'undefined') {
if ($pp_pic_holder.is(':visible')) {
switch (e.keyCode) {
case 37:
$.prettyPhoto.changePage('previous');
e.preventDefault();
break;
case 39:
$.prettyPhoto.changePage('next');
e.preventDefault();
break;
case 27:
if (!settings.modal)
$.prettyPhoto.close();
e.preventDefault();
break;
}
;
}
;
}
;
});
}
;
$.prettyPhoto.initialize = function () {
settings = pp_settings;
if (settings.theme == 'pp_default')settings.horizontal_padding = 16;
if (settings.ie6_fallback && $.browser.msie && parseInt($.browser.version) == 6)settings.theme = "light_square";
theRel = $(this).attr('rel');
galleryRegExp = /\[(?:.*)\]/;
isSet = (galleryRegExp.exec(theRel)) ? true : false;
pp_images = (isSet) ? jQuery.map(matchedObjects, function (n, i) {
if ($(n).attr('rel').indexOf(theRel) != -1)return $(n).attr('href');
}) : $.makeArray($(this).attr('href'));
pp_titles = (isSet) ? jQuery.map(matchedObjects, function (n, i) {
if ($(n).attr('rel').indexOf(theRel) != -1)return($(n).find('img').attr('alt')) ? $(n).find('img').attr('alt') : "";
}) : $.makeArray($(this).find('img').attr('alt'));
pp_descriptions = (isSet) ? jQuery.map(matchedObjects, function (n, i) {
if ($(n).attr('rel').indexOf(theRel) != -1)return($(n).attr('title')) ? $(n).attr('title') : "";
}) : $.makeArray($(this).attr('title'));
if (pp_images.length > 30)settings.overlay_gallery = false;
set_position = jQuery.inArray($(this).attr('href'), pp_images);
rel_index = (isSet) ? set_position : $("a[rel^='" + theRel + "']").index($(this));
_build_overlay(this);
if (settings.allow_resize)
$(window).bind('scroll.prettyphoto', function () {
_center_overlay();
});
$.prettyPhoto.open();
return false;
};
$.prettyPhoto.open = function (event) {
if (pp_open) {
return;
}
if (typeof settings == "undefined") {
settings = pp_settings;
if ($.browser.msie && $.browser.version == 6)settings.theme = "light_square";
pp_images = $.makeArray(arguments[0]);
pp_titles = (arguments[1]) ? $.makeArray(arguments[1]) : $.makeArray("");
pp_descriptions = (arguments[2]) ? $.makeArray(arguments[2]) : $.makeArray("");
isSet = (pp_images.length > 1) ? true : false;
set_position = 0;
_build_overlay(event.target);
}
if ($.browser.msie && $.browser.version == 6)$('select').css('visibility', 'hidden');
if (settings.hideflash)$('object,embed,iframe[src*=youtube],iframe[src*=vimeo]').css('visibility', 'hidden');
_checkPosition($(pp_images).size());
$('.pp_loaderIcon').show();
if (settings.deeplinking)
setHashtag();
if (settings.social_tools) {
facebook_like_link = settings.social_tools.replace('{location_href}', encodeURIComponent(location.href));
$pp_pic_holder.find('.pp_social').html(facebook_like_link);
}
if ($ppt.is(':hidden'))$ppt.css('opacity', 0).show();
$pp_overlay.show().fadeTo(settings.animation_speed, settings.opacity);
$pp_pic_holder.find('.currentTextHolder').text((set_position + 1) + settings.counter_separator_label + $(pp_images).size());
if (pp_descriptions[set_position] != "") {
$pp_pic_holder.find('.pp_description').show().html(unescape(pp_descriptions[set_position]));
} else {
$pp_pic_holder.find('.pp_description').hide();
}
movie_width = (parseFloat(getParam('width', pp_images[set_position]))) ? getParam('width', pp_images[set_position]) : settings.default_width.toString();
movie_height = (parseFloat(getParam('height', pp_images[set_position]))) ? getParam('height', pp_images[set_position]) : settings.default_height.toString();
percentBased = false;
if (movie_height.indexOf('%') != -1) {
movie_height = parseFloat(($(window).height() * parseFloat(movie_height) / 100) - 150);
percentBased = true;
}
if (movie_width.indexOf('%') != -1) {
movie_width = parseFloat(($(window).width() * parseFloat(movie_width) / 100) - 150);
percentBased = true;
}
$pp_pic_holder.fadeIn(function () {
(settings.show_title && pp_titles[set_position] != "" && typeof pp_titles[set_position] != "undefined") ? $ppt.html(unescape(pp_titles[set_position])) : $ppt.html('&nbsp;');
imgPreloader = "";
skipInjection = false;
switch (_getFileType(pp_images[set_position])) {
case'image':
imgPreloader = new Image();
nextImage = new Image();
if (isSet && set_position < $(pp_images).size() - 1)nextImage.src = pp_images[set_position + 1];
prevImage = new Image();
if (isSet && pp_images[set_position - 1])prevImage.src = pp_images[set_position - 1];
$pp_pic_holder.find('#pp_full_res')[0].innerHTML = settings.image_markup.replace(/{path}/g, pp_images[set_position]);
imgPreloader.onload = function () {
pp_dimensions = _fitToViewport(imgPreloader.width, imgPreloader.height);
_showContent();
};
imgPreloader.onerror = function () {
alert('Image cannot be loaded. Make sure the path is correct and image exist.');
$.prettyPhoto.close();
};
imgPreloader.src = pp_images[set_position];
break;
case'youtube':
pp_dimensions = _fitToViewport(movie_width, movie_height);
movie_id = getParam('v', pp_images[set_position]);
if (movie_id == "") {
movie_id = pp_images[set_position].split('youtu.be/');
movie_id = movie_id[1];
if (movie_id.indexOf('?') > 0)
movie_id = movie_id.substr(0, movie_id.indexOf('?'));
if (movie_id.indexOf('&') > 0)
movie_id = movie_id.substr(0, movie_id.indexOf('&'));
}
movie = 'http://www.youtube.com/embed/' + movie_id;
(getParam('rel', pp_images[set_position])) ? movie += "?rel=" + getParam('rel', pp_images[set_position]) : movie += "?rel=1";
if (settings.autoplay)movie += "&autoplay=1";
toInject = settings.iframe_markup.replace(/{width}/g, pp_dimensions['width']).replace(/{height}/g, pp_dimensions['height']).replace(/{wmode}/g, settings.wmode).replace(/{path}/g, movie);
break;
case'vimeo':
pp_dimensions = _fitToViewport(movie_width, movie_height);
movie_id = pp_images[set_position];
var regExp = /http:\/\/(www\.)?vimeo.com\/(\d+)/;
var match = movie_id.match(regExp);
movie = 'http://player.vimeo.com/video/' + match[2] + '?title=0&amp;byline=0&amp;portrait=0';
if (settings.autoplay)movie += "&autoplay=1;";
vimeo_width = pp_dimensions['width'] + '/embed/?moog_width=' + pp_dimensions['width'];
toInject = settings.iframe_markup.replace(/{width}/g, vimeo_width).replace(/{height}/g, pp_dimensions['height']).replace(/{path}/g, movie);
break;
case'quicktime':
pp_dimensions = _fitToViewport(movie_width, movie_height);
pp_dimensions['height'] += 15;
pp_dimensions['contentHeight'] += 15;
pp_dimensions['containerHeight'] += 15;
toInject = settings.quicktime_markup.replace(/{width}/g, pp_dimensions['width']).replace(/{height}/g, pp_dimensions['height']).replace(/{wmode}/g, settings.wmode).replace(/{path}/g, pp_images[set_position]).replace(/{autoplay}/g, settings.autoplay);
break;
case'flash':
pp_dimensions = _fitToViewport(movie_width, movie_height);
flash_vars = pp_images[set_position];
flash_vars = flash_vars.substring(pp_images[set_position].indexOf('flashvars') + 10, pp_images[set_position].length);
filename = pp_images[set_position];
filename = filename.substring(0, filename.indexOf('?'));
toInject = settings.flash_markup.replace(/{width}/g, pp_dimensions['width']).replace(/{height}/g, pp_dimensions['height']).replace(/{wmode}/g, settings.wmode).replace(/{path}/g, filename + '?' + flash_vars);
break;
case'iframe':
pp_dimensions = _fitToViewport(movie_width, movie_height);
frame_url = pp_images[set_position];
frame_url = frame_url.substr(0, frame_url.indexOf('iframe') - 1);
toInject = settings.iframe_markup.replace(/{width}/g, pp_dimensions['width']).replace(/{height}/g, pp_dimensions['height']).replace(/{path}/g, frame_url);
break;
case'ajax':
doresize = false;
pp_dimensions = _fitToViewport(movie_width, movie_height);
doresize = true;
skipInjection = true;
$.get(pp_images[set_position], function (responseHTML) {
toInject = settings.inline_markup.replace(/{content}/g, responseHTML);
$pp_pic_holder.find('#pp_full_res')[0].innerHTML = toInject;
_showContent();
});
break;
case'custom':
pp_dimensions = _fitToViewport(movie_width, movie_height);
toInject = settings.custom_markup;
break;
case'inline':
myClone = $(pp_images[set_position]).clone().append('<br clear="all" />').css({'width': settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo($('body')).show();
doresize = false;
pp_dimensions = _fitToViewport($(myClone).width(), $(myClone).height());
doresize = true;
$(myClone).remove();
toInject = settings.inline_markup.replace(/{content}/g, $(pp_images[set_position]).html());
break;
}
;
if (!imgPreloader && !skipInjection) {
$pp_pic_holder.find('#pp_full_res')[0].innerHTML = toInject;
_showContent();
}
;
});
return false;
};
$.prettyPhoto.changePage = function (direction) {
currentGalleryPage = 0;
if (direction == 'previous') {
set_position--;
if (set_position < 0)set_position = $(pp_images).size() - 1;
} else if (direction == 'next') {
set_position++;
if (set_position > $(pp_images).size() - 1)set_position = 0;
} else {
set_position = direction;
}
;
rel_index = set_position;
if (!doresize)doresize = true;
$('.pp_contract').removeClass('pp_contract').addClass('pp_expand');
_hideContent(function () {
$.prettyPhoto.open();
});
};
$.prettyPhoto.changeGalleryPage = function (direction) {
if (direction == 'next') {
currentGalleryPage++;
if (currentGalleryPage > totalPage)currentGalleryPage = 0;
} else if (direction == 'previous') {
currentGalleryPage--;
if (currentGalleryPage < 0)currentGalleryPage = totalPage;
} else {
currentGalleryPage = direction;
}
;
slide_speed = (direction == 'next' || direction == 'previous') ? settings.animation_speed : 0;
slide_to = currentGalleryPage * (itemsPerPage * itemWidth);
$pp_gallery.find('ul').animate({left: -slide_to}, slide_speed);
};
$.prettyPhoto.startSlideshow = function () {
if (typeof pp_slideshow == 'undefined') {
$pp_pic_holder.find('.pp_play').unbind('click').removeClass('pp_play').addClass('pp_pause').click(function () {
$.prettyPhoto.stopSlideshow();
return false;
});
pp_slideshow = setInterval($.prettyPhoto.startSlideshow, settings.slideshow);
} else {
$.prettyPhoto.changePage('next');
}
;
};
$.prettyPhoto.stopSlideshow = function () {
$pp_pic_holder.find('.pp_pause').unbind('click').removeClass('pp_pause').addClass('pp_play').click(function () {
$.prettyPhoto.startSlideshow();
return false;
});
clearInterval(pp_slideshow);
pp_slideshow = undefined;
};
$.prettyPhoto.close = function () {
if ($pp_overlay.is(":animated"))return;
$.prettyPhoto.stopSlideshow();
$pp_pic_holder.stop().find('object,embed').css('visibility', 'hidden');
$('div.pp_pic_holder,div.ppt,.pp_fade').fadeOut(settings.animation_speed, function () {
$(this).remove();
});
$pp_overlay.fadeOut(settings.animation_speed, function () {
if ($.browser.msie && $.browser.version == 6)$('select').css('visibility', 'visible');
try {
if (settings.hideflash)$('object,embed,iframe[src*=youtube],iframe[src*=vimeo]').css('visibility', 'visible');
} catch (e) {}
$(this).remove();
$(window).unbind('scroll.prettyphoto');
clearHashtag();
try {
settings.callback();
} catch (e) {}
doresize = true;
pp_open = false;
delete settings;
});
};
function _showContent() {
$('.pp_loaderIcon').hide();
projectedTop = scroll_pos['scrollTop'] + ((windowHeight / 2) - (pp_dimensions['containerHeight'] / 2));
if (projectedTop < 0)projectedTop = 0;
$ppt.fadeTo(settings.animation_speed, 1);
$pp_pic_holder.find('.pp_content').animate({height: pp_dimensions['contentHeight'], width: pp_dimensions['contentWidth']}, settings.animation_speed);
$pp_pic_holder.animate({'top': projectedTop, 'left': (windowWidth / 2) - (pp_dimensions['containerWidth'] / 2), width: pp_dimensions['containerWidth']}, settings.animation_speed, function () {
$pp_pic_holder.find('.pp_hoverContainer,#fullResImage').height(pp_dimensions['height']).width(pp_dimensions['width']);
$pp_pic_holder.find('.pp_fade').fadeIn(settings.animation_speed);
if (isSet && _getFileType(pp_images[set_position]) == "image") {
$pp_pic_holder.find('.pp_hoverContainer').show();
} else {
$pp_pic_holder.find('.pp_hoverContainer').hide();
}
if (pp_dimensions['resized']) {
$('a.pp_expand,a.pp_contract').show();
} else {
$('a.pp_expand').hide();
}
if (settings.autoplay_slideshow && !pp_slideshow && !pp_open)$.prettyPhoto.startSlideshow();
settings.changepicturecallback();
pp_open = true;
});
_insert_gallery();
}
;
function _hideContent(callback) {
$pp_pic_holder.find('#pp_full_res object,#pp_full_res embed').css('visibility', 'hidden');
$pp_pic_holder.find('.pp_fade').fadeOut(settings.animation_speed, function () {
$('.pp_loaderIcon').show();
callback();
});
}
;
function _checkPosition(setCount) {
(setCount > 1) ? $('.pp_nav').show() : $('.pp_nav').hide();
}
;
function _fitToViewport(width, height) {
resized = false;
_getDimensions(width, height);
imageWidth = width, imageHeight = height;
if (((pp_containerWidth > windowWidth) || (pp_containerHeight > windowHeight)) && doresize && settings.allow_resize && !percentBased) {
resized = true, fitting = false;
while (!fitting) {
if ((pp_containerWidth > windowWidth)) {
imageWidth = (windowWidth - 200);
imageHeight = (height / width) * imageWidth;
} else if ((pp_containerHeight > windowHeight)) {
imageHeight = (windowHeight - 200);
imageWidth = (width / height) * imageHeight;
} else {
fitting = true;
}
;
pp_containerHeight = imageHeight, pp_containerWidth = imageWidth;
}
;
_getDimensions(imageWidth, imageHeight);
if ((pp_containerWidth > windowWidth) || (pp_containerHeight > windowHeight)) {
_fitToViewport(pp_containerWidth, pp_containerHeight);
}
;
}
;
return{width: Math.floor(imageWidth), height: Math.floor(imageHeight), containerHeight: Math.floor(pp_containerHeight), containerWidth: Math.floor(pp_containerWidth) + (settings.horizontal_padding * 2), contentHeight: Math.floor(pp_contentHeight), contentWidth: Math.floor(pp_contentWidth), resized: resized};
}
;
function _getDimensions(width, height) {
width = parseFloat(width);
height = parseFloat(height);
$pp_details = $pp_pic_holder.find('.pp_details');
$pp_details.width(width);
detailsHeight = parseFloat($pp_details.css('marginTop')) + parseFloat($pp_details.css('marginBottom'));
$pp_details = $pp_details.clone().addClass(settings.theme).width(width).appendTo($('body')).css({'position': 'absolute', 'top': -10000});
detailsHeight += $pp_details.height();
detailsHeight = (detailsHeight <= 34) ? 0 : detailsHeight;
if ($.browser.msie && $.browser.version == 7)detailsHeight += 8;
$pp_details.remove();
$pp_title = $pp_pic_holder.find('.ppt');
$pp_title.width(width);
titleHeight = parseFloat($pp_title.css('marginTop')) + parseFloat($pp_title.css('marginBottom'));
$pp_title = $pp_title.clone().appendTo($('body')).css({'position': 'absolute', 'top': -10000});
titleHeight += $pp_title.height();
$pp_title.remove();
pp_contentHeight = height + detailsHeight;
pp_contentWidth = width;
pp_containerHeight = pp_contentHeight + titleHeight + $pp_pic_holder.find('.pp_top').height() + $pp_pic_holder.find('.pp_bottom').height();
pp_containerWidth = width;
}
function _getFileType(itemSrc) {
if (itemSrc.match(/youtube\.com\/watch/i) || itemSrc.match(/youtu\.be/i)) {
return'youtube';
} else if (itemSrc.match(/vimeo\.com/i)) {
return'vimeo';
} else if (itemSrc.match(/\b.mov\b/i)) {
return'quicktime';
} else if (itemSrc.match(/\b.swf\b/i)) {
return'flash';
} else if (itemSrc.match(/\biframe=true\b/i)) {
return'iframe';
} else if (itemSrc.match(/\bajax=true\b/i)) {
return'ajax';
} else if (itemSrc.match(/\bcustom=true\b/i)) {
return'custom';
} else if (itemSrc.substr(0, 1) == '#') {
return'inline';
} else {
return'image';
}
;
}
;
function _center_overlay() {
if (doresize && typeof $pp_pic_holder != 'undefined') {
scroll_pos = _get_scroll();
contentHeight = $pp_pic_holder.height(), contentwidth = $pp_pic_holder.width();
projectedTop = (windowHeight / 2) + scroll_pos['scrollTop'] - (contentHeight / 2);
if (projectedTop < 0)projectedTop = 0;
if (contentHeight > windowHeight)
return;
$pp_pic_holder.css({'top': projectedTop, 'left': (windowWidth / 2) + scroll_pos['scrollLeft'] - (contentwidth / 2)});
}
;
}
;
function _get_scroll() {
if (self.pageYOffset) {
return{scrollTop: self.pageYOffset, scrollLeft: self.pageXOffset};
} else if (document.documentElement && document.documentElement.scrollTop) {
return{scrollTop: document.documentElement.scrollTop, scrollLeft: document.documentElement.scrollLeft};
} else if (document.body) {
return{scrollTop: document.body.scrollTop, scrollLeft: document.body.scrollLeft};
}
;
}
;
function _resize_overlay() {
windowHeight = $(window).height(), windowWidth = $(window).width();
if (typeof $pp_overlay != "undefined")$pp_overlay.height($(document).height()).width(windowWidth);
}
;
function _insert_gallery() {
if (isSet && settings.overlay_gallery && _getFileType(pp_images[set_position]) == "image" && (settings.ie6_fallback && !($.browser.msie && parseInt($.browser.version) == 6))) {
itemWidth = 52 + 5;
navWidth = (settings.theme == "facebook" || settings.theme == "pp_default") ? 50 : 30;
itemsPerPage = Math.floor((pp_dimensions['containerWidth'] - 100 - navWidth) / itemWidth);
itemsPerPage = (itemsPerPage < pp_images.length) ? itemsPerPage : pp_images.length;
totalPage = Math.ceil(pp_images.length / itemsPerPage) - 1;
if (totalPage == 0) {
navWidth = 0;
$pp_gallery.find('.pp_arrow_next,.pp_arrow_previous').hide();
} else {
$pp_gallery.find('.pp_arrow_next,.pp_arrow_previous').show();
}
;
galleryWidth = itemsPerPage * itemWidth;
fullGalleryWidth = pp_images.length * itemWidth;
$pp_gallery.css('margin-left', -((galleryWidth / 2) + (navWidth / 2))).find('div:first').width(galleryWidth + 5).find('ul').width(fullGalleryWidth).find('li.selected').removeClass('selected');
goToPage = (Math.floor(set_position / itemsPerPage) < totalPage) ? Math.floor(set_position / itemsPerPage) : totalPage;
$.prettyPhoto.changeGalleryPage(goToPage);
$pp_gallery_li.filter(':eq(' + set_position + ')').addClass('selected');
} else {
$pp_pic_holder.find('.pp_content').unbind('mouseenter mouseleave');
}
}
function _build_overlay(caller) {
if (settings.social_tools)
facebook_like_link = settings.social_tools.replace('{location_href}', encodeURIComponent(location.href));
settings.markup = settings.markup.replace('{pp_social}', (settings.social_tools) ? facebook_like_link : '');
$('body').append(settings.markup);
$pp_pic_holder = $('.pp_pic_holder'), $ppt = $('.ppt'), $pp_overlay = $('div.pp_overlay');
if (isSet && settings.overlay_gallery) {
currentGalleryPage = 0;
toInject = "";
for (var i = 0; i < pp_images.length; i++) {
if (!pp_images[i].match(/\b(jpg|jpeg|png|gif)\b/gi)) {
classname = 'default';
img_src = '';
} else {
classname = '';
img_src = pp_images[i];
}
toInject += "<li class='" + classname + "'><a href='#'><img src='" + img_src + "' width='50' alt='' /></a></li>";
}
;
toInject = settings.gallery_markup.replace(/{gallery}/g, toInject);
$pp_pic_holder.find('#pp_full_res').after(toInject);
$pp_gallery = $('.pp_pic_holder .pp_gallery'), $pp_gallery_li = $pp_gallery.find('li');
$pp_gallery.find('.pp_arrow_next').click(function () {
$.prettyPhoto.changeGalleryPage('next');
$.prettyPhoto.stopSlideshow();
return false;
});
$pp_gallery.find('.pp_arrow_previous').click(function () {
$.prettyPhoto.changeGalleryPage('previous');
$.prettyPhoto.stopSlideshow();
return false;
});
$pp_pic_holder.find('.pp_content').hover(function () {
$pp_pic_holder.find('.pp_gallery:not(.disabled)').fadeIn();
}, function () {
$pp_pic_holder.find('.pp_gallery:not(.disabled)').fadeOut();
});
itemWidth = 52 + 5;
$pp_gallery_li.each(function (i) {
$(this).find('a').click(function () {
$.prettyPhoto.changePage(i);
$.prettyPhoto.stopSlideshow();
return false;
});
});
}
;
if (settings.slideshow) {
$pp_pic_holder.find('.pp_nav').prepend('<a href="#" class="pp_play">Play</a>');
$pp_pic_holder.find('.pp_nav .pp_play').click(function () {
$.prettyPhoto.startSlideshow();
return false;
});
}
$pp_pic_holder.attr('class', 'pp_pic_holder ' + settings.theme);
$pp_overlay.css({'opacity': 0, 'height': $(document).height(), 'width': $(window).width()}).bind('click', function () {
if (!settings.modal)$.prettyPhoto.close();
});
$('a.pp_close, #nlLayerLink').bind('click', function () {
$.prettyPhoto.close();
return false;
});
$('a.pp_expand').bind('click', function (e) {
if ($(this).hasClass('pp_expand')) {
$(this).removeClass('pp_expand').addClass('pp_contract');
doresize = false;
} else {
$(this).removeClass('pp_contract').addClass('pp_expand');
doresize = true;
}
;
_hideContent(function () {
$.prettyPhoto.open();
});
return false;
});
$pp_pic_holder.find('.pp_previous, .pp_nav .pp_arrow_previous').bind('click', function () {
$.prettyPhoto.changePage('previous');
$.prettyPhoto.stopSlideshow();
return false;
});
$pp_pic_holder.find('.pp_next, .pp_nav .pp_arrow_next').bind('click', function () {
$.prettyPhoto.changePage('next');
$.prettyPhoto.stopSlideshow();
return false;
});
_center_overlay();
}
;
if (!pp_alreadyInitialized && getHashtag()) {
pp_alreadyInitialized = true;
hashIndex = getHashtag();
hashRel = hashIndex;
hashIndex = hashIndex.substring(hashIndex.indexOf('/') + 1, hashIndex.length - 1);
hashIndex = parseInt(hashIndex);
hashRel = escape(hashRel.substring(0, hashRel.indexOf('/')));
setTimeout(function () {
$("a[rel^='" + hashRel + "']:eq(" + hashIndex + ")").trigger('click');
}, 50);
}
return this.unbind('click.prettyphoto').bind('click.prettyphoto', $.prettyPhoto.initialize);
};
function getHashtag() {
url = location.href;
hashtag = (url.indexOf('#!') != -1) ? decodeURI(url.substring(url.indexOf('#!') + 2, url.length)) : false;
return hashtag;
}
;
function setHashtag() {
if (typeof theRel == 'undefined')return;
location.hash = '!' + theRel + '/' + rel_index + '/';
}
;
function clearHashtag() {
url = location.href;
hashtag = url.indexOf('#!prettyPhoto') != -1;
if (hashtag)location.hash = "!prettyPhoto";
}
function getParam(name, url) {
name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
var regexS = "[\\?&]" + name + "=([^&#]*)";
var regex = new RegExp(regexS);
var results = regex.exec(url);
return(results == null) ? "" : results[1];
}
})(jQuery);
var pp_alreadyInitialized = false;
var Navi = (function () {
'use strict';
function hideAll(item) {
if (!$(item).parents('.main-navi').length) {
$('nav.main-navi').find('.sub-navi').hide();
}
}
function toggleItem(item, show) {
if ($(item).hasClass('no-sub')) {
return;
}
var container = $('.container').length ? $('.container') : $('#page');
var li = item.nodeName == 'LI' ? $(item) : $(item).parent('li');
var ul = $(li.find('ul')[0]);
var ulHeight = ul.outerHeight();
var select = $('.full-range .category-filter > li select');
if (!ul.id) {
ul.id = 'a' + new Date().getTime();
}
var navis = $('.touch nav.main-navi').find('.sub-navi');
for (var i = 0; i < navis.length; i++) {
if (ul.id != navis[i].id) {
$(navis[i]).hide();
}
}
if (show) {
ul.show();
$(item).find("span:first").addClass('active');
select.blur();
} else {
ul.hide();
$(item).find("span:first").removeClass('active');
}
};
function bindEventHandler() {
$("nav.second-navi > ul > li").hover(function () {
toggleItem(this, true);
}, function () {
toggleItem(this, false);
});
$(document).on('click', function (event) {
hideAll(event.target);
});
}
return {
init: function () {
bindEventHandler();
}
};
}());
var StoreAssignment = (function () {
'use strict';
var checkCookie = function () {
if (document.cookie.search(/store_assignment/) === -1) {
return;
}
var value = document.cookie.replace(/.*store_assignment=([\d]*_[\d]*).*/, '$1');
if (value != companyGroupId + '_' + storeId) {
showNotification()
}
};
var writeCookie = function () {
var expires = new Date(Date.now() + 2592000000).toGMTString();   // 30 days
var domain = '.' + document.domain.split('.').slice(-2).join('.');
document.cookie = 'store_assignment=' + companyGroupId + '_' + storeId + '; expires=' + expires + '; path=/; domain=' + domain + ';';
};
var showNotification = function () {
var div = document.createElement('DIV');
div.id = 'notificationBar';
var outerSpan = document.createElement('SPAN');
outerSpan.innerHTML = '<b>Hinweis:</b> Sie haben Ihren Fachmarkt gewechselt. Dadurch können sich Preise und Verfügbarkeiten geändert haben.';
var span = document.createElement('SPAN');
span.id = 'notificationBarClose';
span.onclick = hideNotification;
span.innerHTML = '<span class="closeLink">Schließen</span> x';
outerSpan.appendChild(span);
div.appendChild(outerSpan);
var body = document.body;
body.insertBefore(div, body.firstChild);
body.className += ' showNotificationBar';
};
var hideNotification = function () {
var div = document.getElementById('notificationBar');
div.parentNode.removeChild(div);
document.body.className = document.body.className.replace('showNotificationBar', '');
};
return {
check : function () {
checkCookie();
writeCookie();
}
};
}());
$(document).ready(function () {
StoreAssignment.check();
Navi.init();
if (!$('#infoicon').length) {
return;
}
JStt.ui.Tooltip.init({
zIndex : 10000,
backgroundColor : '#CCCCCC',
borderColor : '#CCCCCC'
});
JStt.ui.Tooltip.attachTo('infoicon', 'cookie_info_tt', 'mouseover', 'mouseout');
});
var expert = {
mobileWhitelist: [
'start_page_ag', 'assortment_page', 'store', 'service_detailpage',
'content_page|impressum', 'content_page|agb', 'content_page|datenschutzerklaerung'
]
};
var objectKeys = function (object) {
var keys = $.map(object, function (value, key) {
return key;
});
return keys;
};
var showMobileLink = function() {
if (!('ontouchstart' in window) || (window.innerWidth / (window.devicePixelRatio || 1)) >= 400) {
return;
}
var mobileLink = document.getElementById('mobileLink');
if (!mobileLink) {
return;
}
var pageClass = mobileLink.getAttribute('data-pageclass');
var parts = [];
for (var i = 0, len = expert.mobileWhitelist.length; i < len; i++) {
parts = expert.mobileWhitelist[i].split('|');
if (pageClass == parts[0]) {
mobileLink.href = 'https://m.expert.de' + window.location.pathname + window.location.search;
if (!parts[1]) {
mobileLink.style.display = 'block';
window.setTimeout(function () {
mobileLink.style.cssFloat = 'left';
}, 0);
return;
}
var regex = new RegExp('\/' + parts[1] + '[\\d]*\/?$', 'i');
if (window.location.href.search(regex) != -1) {
mobileLink.style.display = 'block';
window.setTimeout(function () {
mobileLink.style.cssFloat = 'left';
}, 0);
return;
}
}
}
};
(function ($) {
var a = 0;
$.getUID = function () {
a++;
return'jQ-uid-' + a;
};
$.fn.getUID = function () {
if (!this.length) {
return 0;
}
var firstElement = this.first(),
elementId = firstElement.attr('id');
if (!elementId) {
elementId = $.getUID();
firstElement.attr('id', elementId);
}
return elementId;
};
})(jQuery);
(function ($) {
var b = function () {
return{
init: function () {
if (typeof $('body').scrollable === 'function') {
$(".jsTeaserInteractive").each(function () {
var currentTeaser = $(this),
teaserItems = currentTeaser.find('.jsTeaserSliderItems'),
teaserNextButton = currentTeaser.find('.jsTeaserNext'),
teaserPrevButton = currentTeaser.find('.jsTeaserPrev');
currentTeaser.getUID();
currentTeaser.scrollable({
circular: true,
easing: 'swing',
items: teaserItems,
next: teaserNextButton,
prev: teaserPrevButton,
speed: 600
});
});
}
}
};
};
var a = function () {
return{
init: function () {
var tabList = $(".storeFinderTab a.tab");
var tabContents = $(".storeFinderTab>div");
tabContents.filter(':first').show();
tabList.click(function () {
var h = this;
tabList.each(function (j, k) {
if (h == k) {
tabContents.hide();
$(tabContents[j]).show();
if ($(tabContents[j]).find('#map')) {
google.maps.event.trigger(window.map.getGMap(), 'resize');   // Workaround for GMap display bug
window.map.showStoreDetail('0');
}
tabList.removeClass("activeLeft activeRight");
$(tabList[j]).addClass(j ? "activeRight" : "activeLeft");
}
});
});
if (document.location.href.search('&routing=1') !== -1) {
$('#jsTabRouting').click();   // Switch to routing tab
}
}
};
};
var e = function () {
return{
init: function () {
var $previewImages = $('.storeFinderTab .preview img'),
$bigImages = $('.storeFinderTab .tab>img');
$bigImages.not(':first-child').hide();
$previewImages.click(function () {
var clickedIndex = $(this).parent().index('.preview'),
fadeImage = $($bigImages.filter(':visible')),
newImage = $($bigImages.get(clickedIndex));
if (fadeImage.attr('src') != newImage.attr('src')) {
fadeImage.add(newImage).fadeToggle(500);
}
});
}
};
};
$(document).ready(function () {
new b().init();
new a().init();
new e().init();
});
})(jQuery);
$(document).ready(function () {
$("a[rel^='prettyPhoto']").prettyPhoto({
deeplinking: false, // prevent URL in the address bar from being changed
default_width: 521,
default_height: 207
});
var faqEvent = 0;
$('.contentRowFAQList article h2').click(function () {
if (faqEvent) return;
faqEvent = 1;
var c = $(this).find('span').html() === '+' ? '-' : '+';
$(this).toggleClass('hover').find('span').html(c);
$(this).parent().find('div').slideToggle(500, function () {
faqEvent = 0;
});
});
showMobileLink();
});
(function ($) {
var $visibilitySwitcher = $('.switchVisibility');
if ($visibilitySwitcher.length) {
$visibilitySwitcher.live('click', function (ev) {
var $this = $(this);
$this.find('img').toggleClass('hidden');
$.ajax($this.attr('href'));
ev.preventDefault();
});
}
}(jQuery));
function getWindowHeight() {
if (document.body && document.body.offsetWidth) {
ret = document.body.offsetHeight;
}
if (document.compatMode == 'CSS1Compat' && document.documentElement) {
ret = document.documentElement.offsetHeight;
}
if (window.innerWidth && window.innerHeight) {
ret = window.innerHeight;
}
return ret;
}
$.fn.extend({
expert: function () {
var self = this;
var fromMenu = false;
self.naviHeaderModule = function () {
var $navigationPoint = $(this);
var $navigationPointText = $navigationPoint.find('span.moduleType');
var $headerMetaPositioning = $navigationPoint.find('div.headerMetaAppointmentPositioning');
var $layer = $navigationPoint.find('div.headerModulFlyout');
var showLayer = function () {
$layer.show();
$headerMetaPositioning.show();
$navigationPointText.addClass('hover');
if (fromMenu) {
$('#flyoutReason').focus();
fromMenu = false;
}
};
var hideLayer = function () {
$layer.hide();
$headerMetaPositioning.css({'display': ''});
$navigationPointText.removeClass('hover');
$('#flyoutDate').datepicker('hide');
window.appointmentAutocomplete.hide();
fromMenu = false;
};
var handleHoverOut = function (event) {
var $triggeredBy = $(event.target);
var $relatedTarget = $(event.relatedTarget);
if ($(this).find($triggeredBy).length || $(this).find($relatedTarget).length) {
fromMenu = false;
if (!$relatedTarget.parents('.headerMetaAppointmentPositioning').length) {
return;
}
showLayer();
} else {
if ($relatedTarget.parents('.headerMetaAppointmentPositioning').length
|| $relatedTarget[0].parentNode.className == 'expertAutocomplete' || $relatedTarget[0].className == 'expertAutocomplete'
|| $relatedTarget[0].id == 'ui-datepicker-div' || $($relatedTarget[0]).parents('#ui-datepicker-div').length
|| $($relatedTarget[0]).parents('li.appointmentHeaderHover').length
) {
return;
}
hideLayer();
}
};
var bindLayerEvents = function () {
$navigationPointText.hover(function (event) {
fromMenu = true;
});
$navigationPoint.hover(function (event) {
showLayer();
$(this).addClass('hover');
}, function (event) {
var $relatedTarget = $(event.relatedTarget);
if ($('header').find($relatedTarget).length) {
hideLayer();
}
$navigationPointText.removeClass('hover');
});
$layer.find('div, input, label, select, button, textarea, p, span, legend, fieldset').bind('mouseleave hoverout', handleHoverOut);
$layer.bind('mouseleave hoverout', handleHoverOut);
};
bindLayerEvents();
};
return self;
}
});
$(document).ready(function () {
$('input, textarea').placeholder();
$.tools.validator.fn("[type=radio]", function (el, value) {
var elements = $('input[type="radio"][name="' + el[0].name + '"]');
var state = false;
for (var i = 0; i < elements.length; i++) {
if (elements[i].checked) {
state = true;
}
}
return state;
});
$('form.validation img[src=""]').hide();
$('form.validation').each(function (i, f) {
$(f).find('input.validate').validator({
position: 'bottom left',
message: '<span/>'
});
$(f).bind('onFail', function (e, errors) {
$.each(errors, function () {
var input = this.input;
$('html, body').animate({
scrollTop: input.offset().top - 20
}, 200);
return false;
});
});
});
$('.msSlider .jsSlick').slick({
infinite : true,
slidesToShow   : 8,
slidesToScroll : 1,
prevArrow : '<a class="stagePrev"></a>',
nextArrow : '<a class="stageNext"></a>'
});
$('.naviHeaderModule:first').addClass('first');
$('.appointmentHeaderHover').expert().naviHeaderModule();
bindLoginFlyoutValidation();
});
var bindLoginFlyoutValidation = function () {
'use strict';
var form = $('.headerLoginModul form');
var validator = form.jqEnsure({
options : {
styling: {
field : {
enabled : true
}
},
onTheFlyValidation : true
}
});
validator.bindValidator('.requiredVal', 'required');
validator.bindValidator('.loginEmail' , 'email');
form.submit(function (event) {
var errorMsg = document.getElementById('loginErrorMsg');
if (!validator.validate()) {
event.preventDefault();
errorMsg.style.visibility = 'visible';
}
});
};
if (typeof JStt == 'undefined') {
JStt = (function () {
return {
_isIE : (function () {
if (window.opera) {
return false;
}
var matches = navigator.userAgent.match(/MSIE (\d+\.\d+)/i);
return matches ? Number(matches[1]) : false;
}()),
_exec : function (func, params, scope, p1) {
params = params == null ? [] : params;
scope  = scope === undefined ? null : scope;
var p = params;
if (p1 != null) {
p = [p1].concat(params);
}
return func.apply(scope, p);
},
uniqId : function () {
return 'JStt_ID' + String(Math.random()).substr(2);
}
};
}());
} // if
if (!JStt.event) {
JStt.event = {};
}
if (!JStt.ui) {
JStt.ui = {};
}
if (!JStt.event.DocumentEventManager) {
JStt.event.DocumentEventManager = (function () {
var regEvents = {};
var handleEvent = function (ev) {
ev = ev == null ? window.event : ev;
var handlers = regEvents[ev.type];
var result = true;
if (handlers) {
var retval;
for (var i = 0, len = handlers.length; i < len; i++) {
retval = JStt._exec(handlers[i].func, handlers[i].params, handlers[i].scope, ev);
if (retval != null && !retval) {
result = false;
}
}
}
return result;
};
return {
registerEvent : function (config) {
var params = config.params == null ? [] : config.params;
var scope  = config.scope === undefined ? null : config.scope;
var handlers = regEvents;
if (!handlers[config.type]) {
handlers[config.type] = [];
var oldHandler = document['on' + config.type];   // Preserve potential old event handler
if (oldHandler) {
handlers[config.type].push({
func   : oldHandler,
params : [],
scope  : null
});
}
document['on' + config.type] = handleEvent;
}
var handler = {
func   : config.handler,
params : params,
scope  : scope
};
handlers[config.type].push(handler);
return JStt.event.DocumentEventManager;
}
};
}());
} // if
if (!JStt.event.EventManager) {
JStt.event.EventManager = (function () {
var regEvents = {};
var handleEvent = function (ev) {
ev = ev == null ? window.event : ev;
var element = JStt.event.EventManager.getTargetElement(ev);
var elemId = element.id;
while (!regEvents[elemId] && element.nodeName != 'BODY') {
element = element.parentNode;
elemId = element.id;
}
var handlers;
if (regEvents[elemId] && (handlers = regEvents[elemId][ev.type])) {
for (var i = 0, len = handlers.length; i < len; i++) {
JStt._exec(handlers[i].func, handlers[i].params, handlers[i].scope, ev);
}
}
};
return {
registerEvent : function (config) {
var params = config.params == null ? [] : config.params;
var scope  = config.scope === undefined ? null : config.scope;
var elemId = config.element.id;
if (!elemId) {
config.element.id = elemId = JStt.uniqId();
}
if (!regEvents[elemId]) {
regEvents[elemId] = {};
}
var handlers = regEvents[elemId];
if (!handlers[config.type]) {
handlers[config.type] = [];
JStt.event.EventManager.addEventHandler(config.element, config.type, handleEvent);
}
var handler = {
func   : config.handler,
params : params,
scope  : scope
};
handlers[config.type].push(handler);
return JStt.event.EventManager;
},
addEventHandler : function (element, type, handler) {
var func;
if (element.addEventListener) {   // DOM version
func = function (element, type, handler) {
element.addEventListener(type, handler, false);
return JStt.event.EventManager;
};
} else if (element.attachEvent) {   // IE version
func = function (element, type, handler) {
element.attachEvent('on' + type, handler);
return JStt.event.EventManager;
};
}
if (func) {
JStt.event.EventManager.addEventHandler = func;
return func(element, type, handler);
}
},
getTargetElement : function (ev) {
ev = ev == null ? window.event : ev;
return ev.currentTarget ? ev.currentTarget : ev.srcElement;
}
};
}());
JStt.regEv = JStt.event.EventManager.registerEvent;
} // if
if (!JStt.ui.Util) {
JStt.ui.Util = {
getDocumentDimensions : function () {
var func;
if (document.compatMode && document.compatMode != 'BackCompat') {
if (navigator.userAgent.search('KHTML|AppleWebKit|Safari') != -1) {
func = function () {
return {
width   : document.documentElement.clientWidth,
height  : document.documentElement.clientHeight,
offsetX : document.body.scrollLeft,
offsetY : document.body.scrollTop,
sWidth  : document.documentElement.scrollWidth,
sHeight : document.documentElement.scrollHeight
};
};
} else {
func = function () {
return {
width   : document.documentElement.clientWidth,
height  : document.documentElement.clientHeight,
offsetX : document.documentElement.scrollLeft,
offsetY : document.documentElement.scrollTop,
sWidth  : document.documentElement.scrollWidth,
sHeight : document.documentElement.scrollHeight
};
};
}
} else {   // Quirks mode
func = function () {
return {
width   : document.body.clientWidth,
height  : document.body.clientHeight,
offsetX : document.body.scrollLeft,
offsetY : document.body.scrollTop,
sWidth  : document.body.scrollWidth,
sHeight : document.body.scrollHeight
};
};
}
JStt.ui.Util.getDocumentDimensions = func;
return func();
},
setOpacity : function (element, opacity) {
if (typeof element != 'object') {
element = document.getElementById(element);
}
if (opacity > 100) {
opacity = 100;
}
if (opacity < 0) {
opacity = 0;
}
var op = Math.round(opacity * 100) / 10000;   // Round to 2 decimal places
if (element.currentStyle && !element.currentStyle.hasLayout) {
element.style.zoom = 1;   // Force hasLayout property for filter to work
}
element.style.filter       = 'alpha(opacity=' + opacity + ')';
element.style.KHTMLOpacity = op;
element.style.MozOpacity   = op;
element.style.opacity      = op;
}
};
} // if
if (!JStt.ui.CursorPos) {
JStt.ui.CursorPos = (function () {
var inited = false;
var retrieveCoords = function (ev) {
var coords = JStt.ui.CursorPos.getFromEvent(ev);
JStt.ui.CursorPos.x = coords.x;
JStt.ui.CursorPos.y = coords.y;
};
return {
x : null,
y : null,
init : function () {
if (inited) {
return;
}
inited = true;
JStt.event.DocumentEventManager.registerEvent({
type    : 'mousemove',
handler : retrieveCoords
});
},
getFromEvent : function (ev) {
ev = ev == null ? window.event : ev;
var func;
if (JStt._isIE) {   // IE version
if (document.compatMode && document.compatMode != 'BackCompat') {
func = function (ev) {
return {
x : document.documentElement.scrollLeft + ev.clientX,
y : document.documentElement.scrollTop + ev.clientY
};
};
} else {
func = function (ev) {
return {
x : document.body.scrollLeft + ev.clientX,
y : document.body.scrollTop + ev.clientY
};
};
}
} else {   // DOM version
func = function (ev) {
return {
x : ev.pageX,
y : ev.pageY
};
};
}
JStt.ui.CursorPos.getFromEvent = func;
return func(ev);
}
};
}());
} // if
if (!JStt.ui.Tooltip) {
JStt.ui.Tooltip = (function () {
var inited = false;
var opacity = 0;
var fadingIn = false;
var fadeTimer;
var waiting = false;
var showTimer;
var docDim;
var visible = false;
var deferVTimer;
var deferSTimer;
var ie6Shim;
var fadeIn = function (div) {
var steps = 20; // Fade-in steps per second
var fade = function () {
if (opacity >= 100) {
opacity = 100;
fadingIn = false;
return;
}
opacity += 100 / (JStt.ui.Tooltip.fadeInTime / 1000) / steps;
JStt.ui.Util.setOpacity(div, opacity);
window.clearTimeout(fadeTimer);
fadeTimer = window.setTimeout(fade, 1000 / steps);
};
JStt.ui.Util.setOpacity(div, opacity);
fade();
};
var fadeOut = function (div) {
var steps = 20; // Fade-out steps per second
var fade = function () {
if (opacity <= 0) {
opacity = 0;
div.style.display = 'none';
visible = false;
return;
}
opacity -= 100 / (JStt.ui.Tooltip.fadeOutTime / 1000) / steps;
JStt.ui.Util.setOpacity(div, opacity);
window.clearTimeout(fadeTimer);
fadeTimer = window.setTimeout(fade, 1000 / steps);
};
JStt.ui.Util.setOpacity(div, opacity);
fade();
};
var determineDocDimensions = function () {
docDim = JStt.ui.Util.getDocumentDimensions();
};
return {
offsetX : 0,
offsetY : 21,
fadeInTime : 300,
fadeOutTime : 400,
showDelay : 0,
backgroundColor : '#FFFFD0',
borderColor : '#000000',
zIndex : 1000,
useIE6Shim : true,
show : function (source) {
var showDiv = function () {
waiting = false;
if (!docDim) {
return;
}
if (deferVTimer) {
window.clearTimeout(deferVTimer);
deferVTimer = null;
}
visible = true;
var div = document.getElementById('JStt_Tooltip');
if (!div) {
div = document.createElement('div');
div.id = 'JStt_Tooltip';
div.style.display         = 'none';
div.style.position        = 'absolute';
div.style.zIndex          = String(JStt.ui.Tooltip.zIndex);
if (JStt.ui.Tooltip.backgroundColor) {
div.style.backgroundColor = JStt.ui.Tooltip.backgroundColor;
}
if (JStt.ui.Tooltip.borderColor) {
div.style.border = '1px solid ' + JStt.ui.Tooltip.borderColor;
}
document.body.appendChild(div);
}
var iframe;
if (ie6Shim) {
iframe = document.getElementById('JStt_IFTooltip');
if (!iframe) {
iframe = document.createElement('iframe');
iframe.id = 'JStt_IFTooltip';
iframe.style.display  = 'none';
iframe.style.position = 'absolute';
iframe.style.zIndex   = String(JStt.ui.Tooltip.zIndex - 1);
iframe.style.border   = '0';
document.body.appendChild(iframe);
}
}
if (typeof source != 'object') {
source = document.getElementById(source);
}
div.innerHTML = source.innerHTML;
div.style.display = ''; // Temporarily show DIV to determine its size
var divWidth  = div.offsetWidth;
var divHeight = div.offsetHeight;
div.style.display = 'none';
var x, y;
if (JStt.ui.CursorPos.x + JStt.ui.Tooltip.offsetX + divWidth - docDim.offsetX > docDim.width) {
x = docDim.width - divWidth + docDim.offsetX;
} else if (JStt.ui.CursorPos.x + JStt.ui.Tooltip.offsetX - docDim.offsetX < 0) {
x = docDim.offsetX;
} else {
x = JStt.ui.CursorPos.x + JStt.ui.Tooltip.offsetX;
}
if (JStt.ui.CursorPos.y + JStt.ui.Tooltip.offsetY + divHeight - docDim.offsetY > docDim.height) {
y = JStt.ui.CursorPos.y - divHeight - 8;
} else if (JStt.ui.CursorPos.y + JStt.ui.Tooltip.offsetY - docDim.offsetY < 0) {
y = JStt.ui.CursorPos.y + 18;
} else {
y = JStt.ui.CursorPos.y + JStt.ui.Tooltip.offsetY;
}
div.style.left = x + 'px';
div.style.top  = y + 'px';
div.style.display = '';
if (!ie6Shim) {
if (JStt.ui.Tooltip.fadeInTime) {
if (!fadingIn) {
fadingIn = true;
fadeIn(div);
}
} else {
window.clearTimeout(fadeTimer);
opacity = 100;
JStt.ui.Util.setOpacity(div, opacity);
}
} else {
iframe.style.left    = x + 'px';
iframe.style.top     = y + 'px';
iframe.style.width   = div.offsetWidth + 'px';
iframe.style.height  = div.offsetHeight + 'px';
iframe.style.display = '';
}
};
if (!visible && JStt.ui.Tooltip.showDelay > 0 && !showTimer) {
waiting = true;
showTimer = window.setTimeout(showDiv, JStt.ui.Tooltip.showDelay);
}
if (!waiting) {
deferSTimer = window.setTimeout(showDiv, 0);
}
},
hide : function () {
waiting = false;
window.clearTimeout(deferSTimer);
if (showTimer) {
window.clearTimeout(showTimer);
showTimer = null;
}
fadingIn = false;
var div = document.getElementById('JStt_Tooltip');
if (!div) {
return;
}
if (JStt.ui.Tooltip.fadeOutTime && !ie6Shim) {
fadeOut(div);
} else {
div.style.display = 'none';
deferVTimer = window.setTimeout(function () {
visible = false;
}, 100);
var iframe = document.getElementById('JStt_IFTooltip');
if (iframe) {
iframe.style.display = 'none';
}
window.clearTimeout(fadeTimer);
}
if (!JStt.ui.Tooltip.fadeOutTime) {
opacity = 0;
}
},
attachTo : function (element, source, showEvent, hideEvent) {
if (typeof element != 'object') {
element = document.getElementById(element);
}
showEvent = showEvent == null ? 'mouseover' : showEvent;
hideEvent = hideEvent == null ? 'mouseout' : hideEvent;
JStt.regEv({
element : element,
type    : showEvent,
handler : function (ev, src) {
JStt.ui.Tooltip.show(src);
},
params  : [source]
});
JStt.regEv({
element : element,
type    : hideEvent,
handler : JStt.ui.Tooltip.hide
});
},
init : function (config) {
if (inited) {
return;
}
config = config == null ? {} : config;
for (var k in config) {
if (config.hasOwnProperty(k) && JStt.ui.Tooltip.hasOwnProperty(k)) {
JStt.ui.Tooltip[k] = config[k];
}
}
ie6Shim = JStt.ui.Tooltip.useIE6Shim && (JStt._isIE == 6);
JStt.ui.CursorPos.init();
determineDocDimensions();
JStt.event.EventManager
.addEventHandler(window, 'resize', determineDocDimensions)
.addEventHandler(window, 'scroll', determineDocDimensions);
inited = true;
}
};
}());
} // if
(function defineMustache(global,factory){if(typeof exports==="object"&&exports&&typeof exports.nodeName!=="string"){factory(exports)}else if(typeof define==="function"&&define.amd){define(["exports"],factory)}else{global.Mustache={};factory(global.Mustache)}})(this,function mustacheFactory(mustache){var objectToString=Object.prototype.toString;var isArray=Array.isArray||function isArrayPolyfill(object){return objectToString.call(object)==="[object Array]"};function isFunction(object){return typeof object==="function"}function typeStr(obj){return isArray(obj)?"array":typeof obj}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(obj,propName){return obj!=null&&typeof obj==="object"&&propName in obj}var regExpTest=RegExp.prototype.test;function testRegExp(re,string){return regExpTest.call(re,string)}var nonSpaceRe=/\S/;function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(string){return String(string).replace(/[&<>"'`=\/]/g,function fromEntityMap(s){return entityMap[s]})}var whiteRe=/\s*/;var spaceRe=/\s+/;var equalsRe=/\s*=/;var curlyRe=/\s*\}/;var tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(template,tags){if(!template)return[];var sections=[];var tokens=[];var spaces=[];var hasTag=false;var nonSpace=false;function stripSpace(){if(hasTag&&!nonSpace){while(spaces.length)delete tokens[spaces.pop()]}else{spaces=[]}hasTag=false;nonSpace=false}var openingTagRe,closingTagRe,closingCurlyRe;function compileTags(tagsToCompile){if(typeof tagsToCompile==="string")tagsToCompile=tagsToCompile.split(spaceRe,2);if(!isArray(tagsToCompile)||tagsToCompile.length!==2)throw new Error("Invalid tags: "+tagsToCompile);openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+"\\s*");closingTagRe=new RegExp("\\s*"+escapeRegExp(tagsToCompile[1]));closingCurlyRe=new RegExp("\\s*"+escapeRegExp("}"+tagsToCompile[1]))}compileTags(tags||mustache.tags);var scanner=new Scanner(template);var start,type,value,chr,token,openSection;while(!scanner.eos()){start=scanner.pos;value=scanner.scanUntil(openingTagRe);if(value){for(var i=0,valueLength=value.length;i<valueLength;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length)}else{nonSpace=true}tokens.push(["text",chr,start,start+1]);start+=1;if(chr==="\n")stripSpace()}}if(!scanner.scan(openingTagRe))break;hasTag=true;type=scanner.scan(tagRe)||"name";scanner.scan(whiteRe);if(type==="="){value=scanner.scanUntil(equalsRe);scanner.scan(equalsRe);scanner.scanUntil(closingTagRe)}else if(type==="{"){value=scanner.scanUntil(closingCurlyRe);scanner.scan(curlyRe);scanner.scanUntil(closingTagRe);type="&"}else{value=scanner.scanUntil(closingTagRe)}if(!scanner.scan(closingTagRe))throw new Error("Unclosed tag at "+scanner.pos);token=[type,value,start,scanner.pos];tokens.push(token);if(type==="#"||type==="^"){sections.push(token)}else if(type==="/"){openSection=sections.pop();if(!openSection)throw new Error('Unopened section "'+value+'" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}else if(type==="name"||type==="{"||type==="&"){nonSpace=true}else if(type==="="){compileTags(value)}}openSection=sections.pop();if(openSection)throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return nestTokens(squashTokens(tokens))}function squashTokens(tokens){var squashedTokens=[];var token,lastToken;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];if(token){if(token[0]==="text"&&lastToken&&lastToken[0]==="text"){lastToken[1]+=token[1];lastToken[3]=token[3]}else{squashedTokens.push(token);lastToken=token}}}return squashedTokens}function nestTokens(tokens){var nestedTokens=[];var collector=nestedTokens;var sections=[];var token,section;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];switch(token[0]){case"#":case"^":collector.push(token);sections.push(token);collector=token[4]=[];break;case"/":section=sections.pop();section[5]=token[2];collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}}return nestedTokens}function Scanner(string){this.string=string;this.tail=string;this.pos=0}Scanner.prototype.eos=function eos(){return this.tail===""};Scanner.prototype.scan=function scan(re){var match=this.tail.match(re);if(!match||match.index!==0)return"";var string=match[0];this.tail=this.tail.substring(string.length);this.pos+=string.length;return string};Scanner.prototype.scanUntil=function scanUntil(re){var index=this.tail.search(re),match;switch(index){case-1:match=this.tail;this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index);this.tail=this.tail.substring(index)}this.pos+=match.length;return match};function Context(view,parentContext){this.view=view;this.cache={".":this.view};this.parent=parentContext}Context.prototype.push=function push(view){return new Context(view,this)};Context.prototype.lookup=function lookup(name){var cache=this.cache;var value;if(cache.hasOwnProperty(name)){value=cache[name]}else{var context=this,names,index,lookupHit=false;while(context){if(name.indexOf(".")>0){value=context.view;names=name.split(".");index=0;while(value!=null&&index<names.length){if(index===names.length-1)lookupHit=hasProperty(value,names[index]);value=value[names[index++]]}}else{value=context.view[name];lookupHit=hasProperty(context.view,name)}if(lookupHit)break;context=context.parent}cache[name]=value}if(isFunction(value))value=value.call(this.view);return value};function Writer(){this.cache={}}Writer.prototype.clearCache=function clearCache(){this.cache={}};Writer.prototype.parse=function parse(template,tags){var cache=this.cache;var tokens=cache[template];if(tokens==null)tokens=cache[template]=parseTemplate(template,tags);return tokens};Writer.prototype.render=function render(template,view,partials){var tokens=this.parse(template);var context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)};Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate){var buffer="";var token,symbol,value;for(var i=0,numTokens=tokens.length;i<numTokens;++i){value=undefined;token=tokens[i];symbol=token[0];if(symbol==="#")value=this.renderSection(token,context,partials,originalTemplate);else if(symbol==="^")value=this.renderInverted(token,context,partials,originalTemplate);else if(symbol===">")value=this.renderPartial(token,context,partials,originalTemplate);else if(symbol==="&")value=this.unescapedValue(token,context);else if(symbol==="name")value=this.escapedValue(token,context);else if(symbol==="text")value=this.rawValue(token);if(value!==undefined)buffer+=value}return buffer};Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate){var self=this;var buffer="";var value=context.lookup(token[1]);function subRender(template){return self.render(template,context,partials)}if(!value)return;if(isArray(value)){for(var j=0,valueLength=value.length;j<valueLength;++j){buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate)}}else if(typeof value==="object"||typeof value==="string"||typeof value==="number"){buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate)}else if(isFunction(value)){if(typeof originalTemplate!=="string")throw new Error("Cannot use higher-order sections without the original template");value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender);if(value!=null)buffer+=value}else{buffer+=this.renderTokens(token[4],context,partials,originalTemplate)}return buffer};Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate){var value=context.lookup(token[1]);if(!value||isArray(value)&&value.length===0)return this.renderTokens(token[4],context,partials,originalTemplate)};Writer.prototype.renderPartial=function renderPartial(token,context,partials){if(!partials)return;var value=isFunction(partials)?partials(token[1]):partials[token[1]];if(value!=null)return this.renderTokens(this.parse(value),context,partials,value)};Writer.prototype.unescapedValue=function unescapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return value};Writer.prototype.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return mustache.escape(value)};Writer.prototype.rawValue=function rawValue(token){return token[1]};mustache.name="mustache.js";mustache.version="2.2.1";mustache.tags=["{{","}}"];var defaultWriter=new Writer;mustache.clearCache=function clearCache(){return defaultWriter.clearCache()};mustache.parse=function parse(template,tags){return defaultWriter.parse(template,tags)};mustache.render=function render(template,view,partials){if(typeof template!=="string"){throw new TypeError('Invalid template! Template should be a "string" '+'but "'+typeStr(template)+'" was given as the first '+"argument for mustache#render(template, view, partials)")}return defaultWriter.render(template,view,partials)};mustache.to_html=function to_html(template,view,partials,send){var result=mustache.render(template,view,partials);if(isFunction(send)){send(result)}else{return result}};mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer});
(function($){
var methods = {
init: function(options) {
var o = $.extend({
items: 1,
itemsOnPage: 3,
pages: 0,
displayedPages: 3,
edges: 1,
currentPage: 0,
hrefTextPrefix: '#page-',
hrefTextSuffix: '',
prevText: 'Prev',
nextText: 'Next',
ellipseText: '&hellip;',
ellipsePageSet: false,
cssStyle: 'light-theme',
listStyle: '',
labelMap: [],
selectOnClick: true,
nextAtFront: false,
invertPageOrder: false,
useStartEdge : true,
useEndEdge : true,
onPageClick: function(pageNumber, event) {
},
onInit: function() {
}
}, options || {});
var self = this;
o.pages = o.pages ? o.pages : Math.ceil(o.items / o.itemsOnPage) ? Math.ceil(o.items / o.itemsOnPage) : 1;
if (o.currentPage)
o.currentPage = o.currentPage - 1;
else
o.currentPage = !o.invertPageOrder ? 0 : o.pages - 1;
o.halfDisplayed = o.displayedPages / 2;
this.each(function() {
self.addClass(o.cssStyle + ' simple-pagination').data('pagination', o);
methods._draw.call(self);
});
o.onInit();
return this;
},
selectPage: function(page) {
methods._selectPage.call(this, page - 1);
return this;
},
prevPage: function() {
var o = this.data('pagination');
if (!o.invertPageOrder) {
if (o.currentPage > 0) {
methods._selectPage.call(this, o.currentPage - 1);
}
} else {
if (o.currentPage < o.pages - 1) {
methods._selectPage.call(this, o.currentPage + 1);
}
}
return this;
},
nextPage: function() {
var o = this.data('pagination');
if (!o.invertPageOrder) {
if (o.currentPage < o.pages - 1) {
methods._selectPage.call(this, o.currentPage + 1);
}
} else {
if (o.currentPage > 0) {
methods._selectPage.call(this, o.currentPage - 1);
}
}
return this;
},
getPagesCount: function() {
return this.data('pagination').pages;
},
setPagesCount: function(count) {
this.data('pagination').pages = count;
},
getCurrentPage: function () {
return this.data('pagination').currentPage + 1;
},
destroy: function(){
this.empty();
return this;
},
drawPage: function (page) {
var o = this.data('pagination');
o.currentPage = page - 1;
this.data('pagination', o);
methods._draw.call(this);
return this;
},
redraw: function(){
methods._draw.call(this);
return this;
},
disable: function(){
var o = this.data('pagination');
o.disabled = true;
this.data('pagination', o);
methods._draw.call(this);
return this;
},
enable: function(){
var o = this.data('pagination');
o.disabled = false;
this.data('pagination', o);
methods._draw.call(this);
return this;
},
updateItems: function (newItems) {
var o = this.data('pagination');
o.items = newItems;
o.pages = methods._getPages(o);
this.data('pagination', o);
methods._draw.call(this);
},
updateItemsOnPage: function (itemsOnPage) {
var o = this.data('pagination');
o.itemsOnPage = itemsOnPage;
o.pages = methods._getPages(o);
this.data('pagination', o);
methods._selectPage.call(this, 0);
return this;
},
getItemsOnPage: function() {
return this.data('pagination').itemsOnPage;
},
_draw: function() {
var o = this.data('pagination'),
interval = methods._getInterval(o),
i,
tagName;
methods.destroy.call(this);
tagName = (typeof this.prop === 'function') ? this.prop('tagName') : this.attr('tagName');
var $panel = tagName === 'UL' ? this : $('<ul' + (o.listStyle ? ' class="' + o.listStyle + '"' : '') + '></ul>').appendTo(this);
if (o.prevText) {
methods._appendItem.call(this, !o.invertPageOrder ? o.currentPage - 1 : o.currentPage + 1, {text: o.prevText, classes: 'prev'});
}
if (o.nextText && o.nextAtFront) {
methods._appendItem.call(this, !o.invertPageOrder ? o.currentPage + 1 : o.currentPage - 1, {text: o.nextText, classes: 'next'});
}
if (!o.invertPageOrder) {
if (interval.start > 0 && o.edges > 0) {
if(o.useStartEdge) {
var end = Math.min(o.edges, interval.start);
for (i = 0; i < end; i++) {
methods._appendItem.call(this, i);
}
}
if (o.edges < interval.start && (interval.start - o.edges != 0)) {
$panel.append('<li class="disabled"><span class="ellipse">' + o.ellipseText + '</span></li>');
} else if (interval.start - o.edges == 1) {
methods._appendItem.call(this, o.edges);
}
}
} else {
if (interval.end < o.pages && o.edges > 0) {
if(o.useStartEdge) {
var begin = Math.max(o.pages - o.edges, interval.end);
for (i = o.pages - 1; i >= begin; i--) {
methods._appendItem.call(this, i);
}
}
if (o.pages - o.edges > interval.end && (o.pages - o.edges - interval.end != 1)) {
$panel.append('<li class="disabled"><span class="ellipse">' + o.ellipseText + '</span></li>');
} else if (o.pages - o.edges - interval.end == 1) {
methods._appendItem.call(this, interval.end);
}
}
}
if (!o.invertPageOrder) {
for (i = interval.start; i < interval.end; i++) {
methods._appendItem.call(this, i);
}
} else {
for (i = interval.end - 1; i >= interval.start; i--) {
methods._appendItem.call(this, i);
}
}
if (!o.invertPageOrder) {
if (interval.end < o.pages && o.edges > 0) {
if (o.pages - o.edges > interval.end && (o.pages - o.edges - interval.end != 1)) {
$panel.append('<li class="disabled"><span class="ellipse">' + o.ellipseText + '</span></li>');
} else if (o.pages - o.edges - interval.end == 1) {
$panel.append('<li class="disabled"><span class="ellipse">' + o.ellipseText + '</span></li>');
} else if (o.pages - o.edges - interval.end > 1) {
methods._appendItem.call(this, interval.end);
}
if(o.useEndEdge) {
var begin = Math.max(o.pages - o.edges, interval.end);
for (i = begin; i < o.pages; i++) {
methods._appendItem.call(this, i);
}
}
}
} else {
if (interval.start > 0 && o.edges > 0) {
if (o.edges < interval.start && (interval.start - o.edges != 1)) {
$panel.append('<li class="disabled"><span class="ellipse">' + o.ellipseText + '</span></li>');
} else if (interval.start - o.edges == 1) {
methods._appendItem.call(this, o.edges);
}
if(o.useEndEdge) {
var end = Math.min(o.edges, interval.start);
for (i = end - 1; i >= 0; i--) {
methods._appendItem.call(this, i);
}
}
}
}
if (o.nextText && !o.nextAtFront) {
methods._appendItem.call(this, !o.invertPageOrder ? o.currentPage + 1 : o.currentPage - 1, {text: o.nextText, classes: 'next'});
}
if (o.ellipsePageSet && !o.disabled) {
methods._ellipseClick.call(this, $panel);
}
},
_getPages: function(o) {
var pages = Math.ceil(o.items / o.itemsOnPage);
return pages || 1;
},
_getInterval: function(o) {
return {
start: Math.ceil(o.currentPage > o.halfDisplayed ? Math.max(Math.min(o.currentPage - o.halfDisplayed, (o.pages - o.displayedPages)), 0) : 0),
end: Math.ceil(o.currentPage > o.halfDisplayed ? Math.min(o.currentPage + o.halfDisplayed, o.pages) : Math.min(o.displayedPages, o.pages))
};
},
_appendItem: function(pageIndex, opts) {
var self = this, options, $link, o = self.data('pagination'), $linkWrapper = $('<li></li>'), $ul = self.find('ul');
pageIndex = pageIndex < 0 ? 0 : (pageIndex < o.pages ? pageIndex : o.pages - 1);
options = {
text: pageIndex + 1,
classes: ''
};
if (o.labelMap.length && o.labelMap[pageIndex]) {
options.text = o.labelMap[pageIndex];
}
options = $.extend(options, opts || {});
if (pageIndex == o.currentPage || o.disabled) {
if (o.disabled || options.classes === 'prev' || options.classes === 'next') {
$linkWrapper.addClass('disabled');
} else {
$linkWrapper.addClass('active');
}
$link = $('<span class="current">' + (options.text) + '</span>');
} else {
$link = $('<span class="page-link">' + (options.text) + '</span>');
$link.click(function(event){
return methods._selectPage.call(self, pageIndex, event);
});
}
if (options.classes) {
$link.addClass(options.classes);
}
$linkWrapper.append($link);
if ($ul.length) {
$ul.append($linkWrapper);
} else {
self.append($linkWrapper);
}
},
_selectPage: function(pageIndex, event) {
var o = this.data('pagination');
o.currentPage = pageIndex;
if (o.selectOnClick) {
methods._draw.call(this);
}
return o.onPageClick(pageIndex + 1, event);
},
_ellipseClick: function($panel) {
var self = this,
o = this.data('pagination'),
$ellip = $panel.find('.ellipse');
$ellip.addClass('clickable').parent().removeClass('disabled');
$ellip.click(function(event) {
if (!o.disable) {
var $this = $(this),
val = (parseInt($this.parent().prev().text(), 10) || 0) + 1;
$this
.html('<input type="number" min="1" max="' + o.pages + '" step="1" value="' + val + '">')
.find('input')
.focus()
.click(function(event) {
event.stopPropagation();
})
.keyup(function(event) {
var val = $(this).val();
if (event.which === 13 && val !== '') {
if ((val>0)&&(val<=o.pages))
methods._selectPage.call(self, val - 1);
} else if (event.which === 27) {
$ellip.empty().html(o.ellipseText);
}
})
.bind('blur', function(event) {
var val = $(this).val();
if (val !== '') {
methods._selectPage.call(self, val - 1);
}
$ellip.empty().html(o.ellipseText);
return false;
});
}
return false;
});
}
};
$.fn.pagination = function(method) {
if (methods[method] && method.charAt(0) != '_') {
return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
} else if (typeof method === 'object' || !method) {
return methods.init.apply(this, arguments);
} else {
$.error('Method ' +  method + ' does not exist on jQuery.pagination');
}
};
})(jQuery);
(function($, Mustache) {
var BASE_API_URL = '/articlepromotion/api';
var currPage = 0;
var currCategoryId = 0;
var prodListEmpty = 0;
var products = {};
var categories = {};
var getEfficiency = function(effLabel) {
switch (effLabel) {
case "A++":
return "aplusplusef"
case "A+":
return "aplusef"
case "A":
return "aef"
case "B":
return "bef"
case "C":
return "cef"
case "D":
return "def"
case "E":
return "eef"
default:
return "noneef"
}
}
var getAvailability = function(availability) {
switch (availability) {
case "available immediately":
var obj = {
className:  "product-available",
text: "sofort verfügbar",
};
return obj;
case "available soon":
var obj = {
className:  "product-available",
text: "in 2-3 Tagen verfügbar",
};
return obj;
case "available someday":
var obj = {
className:  "product-available-someday",
text: "Artikel beschaffbar",
};
return obj;
case "unavailable":
var obj = {
className:  "product-available-not",
text: "nicht mehr beschaffbar",
};
return obj;
default:
return "product-available-hide"
}
}
var changePage = function(page) {
if ($.type(page) === 'object') {
currPage = parseInt(page.text()) - 1;
} else {
currPage = page - 1;
}
}
var CategoryService = function(nodeId, branchId) {
this.nodeId = nodeId;
this.branchId = branchId;
};
CategoryService.prototype.fetchCategoryTree = function() {
return $.get('/articlepromotion/api/category/node/' + this.nodeId + '/branch/' + this.branchId);
};
function findNavItem(nav, index){
index = index.split(".");
nav[ index[0] ]
match = nav[ index[0] ];
if( "children" in match && index.length > 1 ){
return findNavItem(match.children, index.slice(1).join(".") );
}
return match;
}
function buildNav(nav, level){
level = level || 0;
var output = nav
.map( function(item, index){
var children = "";
if("children" in item){
children = '\n' + buildNav( item.children, level + 1 )
}
return '<div class="itemLink nav-level' + level + '" data-categoryid="' + item.id + '" data-categorynav-level="' + level + '"><li><span>' + item.name + '</span></li>' + children + '</div>' } )
.join("");
return output;
}
function revealSub($trigger) {
var currentnavlevel = $trigger.data('categorynav-level');
var currentnavlevelClass = ".nav-level" + $trigger.data('categorynav-level');
if ($trigger.hasClass('revealed')) {
$trigger.siblings(currentnavlevelClass).show();
$trigger.find('.itemLink').hide();
$trigger.find('.category-selected-parent').removeClass('category-selected-parent')
$trigger.children('li').show();
$trigger.removeClass('revealed');
if ($trigger.hasClass('nav-level0')) {
currCategoryId = 0;
} else {
currCategoryId = $trigger.parent('.itemLink').data("categoryid");
}
return;
}
currCategoryId = $trigger.data("categoryid");
$trigger.children('li').first().addClass('category-selected-parent');
if ($trigger.hasClass('nav-level2')) {
$currentnavlevelJQ = $(currentnavlevelClass)
$trigger.siblings(currentnavlevelClass).find('.category-selected-parent').removeClass('category-selected-parent');
$currentnavlevelJQ.parent('.itemLink').children('li.category-selected-parent').after($trigger);
} else {
$trigger.addClass('revealed');
$trigger.siblings(currentnavlevelClass).hide();
}
$trigger.children(currentnavlevel + 1).show();
}
var ProductService = function(nodeId, branchId) {
this.nodeId = nodeId;
this.branchId = branchId;
};
ProductService.prototype.fetchProducts = function(categoryId, page) {
var promise;
if (categoryId > 0) {
promise = $.get(BASE_API_URL + '/product/node/' + this.nodeId + '/branch/' + this.branchId + '/category/' + categoryId + '/page/' + page);
} else {
promise = $.get(BASE_API_URL + '/product/node/' + this.nodeId + '/branch/' + this.branchId + '/page/' + page);
}
return promise;
}
function renderProducts(productData) {
function dataExist(data) {
if (data == null) {
return "";
} else {
return data;
}
}
function parsePrice(price) {
if (price == null) {
return;
}
return parseFloat(price).toFixed(2).toString().replace(".", ",").replace(",00", ",-");
}
function getIcon(aktionen) {
if (aktionen == null) {
return "";
}
var finalItems = '';
for (var i = 0; i < aktionen.length; i++) {
finalItems = finalItems + '<div class="interferers-action" content="'+ aktionen[i].imageAlt +'">' +
'   <img src="'+ aktionen[i].imageUrls.small +'" alt="'+ aktionen[i].imageAlt +'">' +
'</div>';
}
return finalItems;
}
function specialPriceZero(priceRaw, specialPriceRaw, isOnlineProduct) {
var storeName = window.storeName;
var storeLocation = window.storeCity;
var specialPrice = parseFloat(specialPriceRaw);
var price = parseFloat(priceRaw);
var priceMarkup = '';
if (priceRaw == null || specialPriceRaw == null) {
priceMarkup = '<div class="no-market">Jetzt Preis prüfen</div>';
return priceMarkup;
}
if (specialPrice == 0) {
priceMarkup = '<div class="no-price"></div>';
return priceMarkup;
}
priceMarkup = '    <div class="product-price">' + specialPriceRaw + '</div>'
+ '<div class="bubble">'
+ '<div class="info-icon"></div>'
+ '<div class="bubble-wrapper">'
+ '<div class="bubble-content">Dieser Preis gilt für ' + storeName + ' in ' + storeLocation + '</div>'
+ '</div>'
+ '</div>';
if (price > specialPrice && price !== 0) {
priceMarkup = priceMarkup + '<span class="promo-price"><br /><span>' + priceRaw + '</span></span>';
}
if (isOnlineProduct) {
priceMarkup = priceMarkup
+ '    <div class="product-legal-notice">'
+ 'inkl. MwSt., zzgl. <a href="/shop/d2c/ajax_cms/getpage/page_id/versandkosten/json/1" class="text-underline">Versandkosten</a>'
+ '</div>';
} else {
priceMarkup = priceMarkup + '<div class="product-legal-notice">inkl. MwSt.</div>';
}
return priceMarkup;
}
function buttonMarkup(originalPrice, specialPrice, productUrl) {
var microButtonTemplate = '<a class="product-microbutton" href="{{productUrl}}"><span>{{label}}</span></a>';
var microButtonLabel = 'Zum Angebot';
if (originalPrice == null || specialPrice == null) {
microButtonLabel = 'Preisabfrage starten';
}
return Mustache.render(microButtonTemplate, {productUrl: productUrl, label: microButtonLabel});
}
var productTemplate = '';
var templateData = {
productUrl: productData.url,
productImage: dataExist(productData.image),
availability: getAvailability(productData.availability_label),
description: productData.name,
manufacturer: productData.manufacturer || '',
efficiency: {
label: dataExist(productData.eec).eec_label,
image: dataExist(productData.eec).eec_href,
className: getEfficiency(dataExist(productData.eec).eec_label)
}
};
var isOnlineProduct = productData.online == true;
var priceMarkup = specialPriceZero(
parsePrice(productData.original_price),
parsePrice(productData.special_offer_price),
isOnlineProduct
);
if (templateData.manufacturer === '') {
productTemplate = '<div class="prod-container prod-container--no-manufacturer">';
} else {
productTemplate = '<div class="prod-container">';
}
if (isOnlineProduct) {
productTemplate = productTemplate +
'<div class="product-aditional-features">' +
'	<div class="interferers-action online-icon" content="Unsere Top-Produkte sind online sofort kaufbar.">' +
'		<img src="/extension/expertarticlepromotion/design/expertarticlepromotion/stylesheets/onlineVerfuegbar.svg" />' +
'	</div>' +
getIcon(productData.aktionen) +
'</div>';
} else {
productTemplate = productTemplate +
'<div class="product-aditional-features">' + getIcon(productData.aktionen) + '</div>';
}
productTemplate = productTemplate +
'<div class="prod-img">' +
'   <a href="{{productUrl}}"><img src="{{productImage}}" /></a>' +
'</div>' +
'<div class="product-efficiency {{efficiency.className}}">' +
'   <span>{{efficiency.label}}</span>' +
'   <div class="product-efficiency-layer">' +
'       <img src="{{efficiency.image}}" />' +
'   </div>' +
'</div>';
if (templateData.manufacturer !== '') {
productTemplate = productTemplate + '<a href="{{productUrl}}"><div class="product-title">{{manufacturer}}</div></a>';
}
productTemplate = productTemplate +
'<div class="product-description">{{description}}</div>' +
priceMarkup +
'<div class="product-availability {{availability.className}}">{{availability.text}}</div>' +
buttonMarkup(productData.original_price, productData.special_offer_price, productData.url) +
'</div>'; // <-- closing div for prod-container
productMarkup = Mustache.render(productTemplate, templateData);
$(".productListing").append(productMarkup);
}
$.fn.articlepromotion = function() {
var branchId = window.storeId;
if (branchId === '') {
branchId = window.companyGroupId; // workaround for AG because we don't get a proper id here
}
var nodeId = $(".articlePromotion").attr("data-nodeid");
var $navigation = $('ul.js-promotion-navigation');
var service = new CategoryService(nodeId, branchId);
var productService = new ProductService(nodeId, branchId);
var promise = service.fetchCategoryTree();
promise.then(function(data) {
var products = data.products;
var categories = data.categories;
$navigation.append((buildNav(categories)));
promRender(currCategoryId, currPage);
});
var dataLoading = function(containerAppend) {
$(containerAppend).append('<div class="dataLoading"><div class="dataLoading-spinner"></div></div>');
}
var promRender = function(categoryId, page) {
$('html,body').scrollTop(0);
var prodPromise = productService.fetchProducts(categoryId, page);
var prodList = $(".productListing");
var productListing = $(".products-listing");
var productListingInfo = $(".currPageInfo");
if (prodListEmpty == 0) {
prodList.empty();
prodListEmpty = 1;
}
prodList.append('<div class="dataLoading"><div class="dataLoading-spinner"></div></div>');
$(".page-info").hide();
prodPromise.then(function(data) {
var products = data.products;
if (products.length == 0) {
$(".noProds").remove();
productListing.hide();
productListingInfo.hide();
prodList.append('<div class="noProds">Keine Produkte gefunden<p>Bitte aktualisieren Sie die Seite.</p></div>')
$(".dataLoading").remove();
} else {
$(".noProds").remove();
for (product in products) {
var product = products[product];
renderProducts(product);
$(".dataLoading").remove();
$(".page-info").show();
}
productListing.empty();
productListing.show();
productListingInfo.show();
var maxPages = data.maxPages;
pagesRender(maxPages);
}
}, function() {
var prodList = $(".productListing");
$(".dataLoading").remove();
prodList.empty();
prodList.append('<div class="noProds">Keine Produkte gefunden.<p>Bitte aktualisieren Sie die Seite.</p></div>');
});
};
var pagesRender = function(maxPages) {
var productListing = $(".products-listing");
if (currCategoryId > 0) {
var currCategory = $('*[data-categoryid="' + currCategoryId + '"] > li span').text();
} else {
currCategory = 'Aktuelle Aktionsprodukte';
}
$(function() {
$(".products-listing").pagination({
currentPage: currPage + 1,
pages: maxPages,
prevText: "◀",
nextText: "▶",
onPageClick: function (pageNumber) {
prodListEmpty = 0;
changePage(pageNumber);
promRender(currCategoryId, currPage);
}
});
});
$(".products-page-info .currPage").text(parseInt(currPage) + 1);
$(".products-page-info .maxPage").text(parseInt(maxPages));
$(".products-page-info .currCategory").text(currCategory);
$(".products-page-info").show();
};
jQuery(document).on('click', '.itemLink li', function(event) {
event.preventDefault();
revealSub($(this).parent(".itemLink"));
prodListEmpty = 0;
changePage(1);
promRender(currCategoryId, currPage);
});
};
}(jQuery, Mustache));
jQuery(document).ready(function() {
if ($('.contentWrap').hasClass('articlePromotion')) {
jQuery().articlepromotion();
}
});
(function (factory) {
if (typeof define === 'function' && define.amd) {
define(['jquery'], factory);
} else if (typeof exports === 'object') {
module.exports = factory(require('jquery'));
} else {
factory(jQuery);
}
}(function ($) {
var pluses = /\+/g;
function encode(s) {
return config.raw ? s : encodeURIComponent(s);
}
function decode(s) {
return config.raw ? s : decodeURIComponent(s);
}
function stringifyCookieValue(value) {
return encode(config.json ? JSON.stringify(value) : String(value));
}
function parseCookieValue(s) {
if (s.indexOf('"') === 0) {
s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
}
try {
s = decodeURIComponent(s.replace(pluses, ' '));
return config.json ? JSON.parse(s) : s;
} catch(e) {}
}
function read(s, converter) {
var value = config.raw ? s : parseCookieValue(s);
return $.isFunction(converter) ? converter(value) : value;
}
var config = $.cookie = function (key, value, options) {
if (arguments.length > 1 && !$.isFunction(value)) {
options = $.extend({}, config.defaults, options);
if (typeof options.expires === 'number') {
var days = options.expires, t = options.expires = new Date();
t.setMilliseconds(t.getMilliseconds() + days * 864e+5);
}
return (document.cookie = [
encode(key), '=', stringifyCookieValue(value),
options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
options.path    ? '; path=' + options.path : '',
options.domain  ? '; domain=' + options.domain : '',
options.secure  ? '; secure' : ''
].join(''));
}
var result = key ? undefined : {},
cookies = document.cookie ? document.cookie.split('; ') : [],
i = 0,
l = cookies.length;
for (; i < l; i++) {
var parts = cookies[i].split('='),
name = decode(parts.shift()),
cookie = parts.join('=');
if (key === name) {
result = read(cookie, value);
break;
}
if (!key && (cookie = read(cookie)) !== undefined) {
result[name] = cookie;
}
}
return result;
};
config.defaults = {};
$.removeCookie = function (key, options) {
$.cookie(key, '', $.extend({}, options, { expires: -1 }));
return !$.cookie(key);
};
}));
!function(e,t,i){"use strict";"undefined"!=typeof module&&module.exports?module.exports=i():"function"==typeof define&&define.amd?define(i):t[e]=i()}("Fingerprint2",this,function(){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var i;if(null==this)throw new TypeError("'this' is null or undefined");var a=Object(this),r=a.length>>>0;if(0===r)return-1;var n=+t||0;if(Math.abs(n)===1/0&&(n=0),n>=r)return-1;for(i=Math.max(n>=0?n:r-Math.abs(n),0);r>i;){if(i in a&&a[i]===e)return i;i++}return-1});var e=function(e){var t={swfContainerId:"fingerprintjs2",swfPath:"flash/compiled/FontList.swf",detectScreenOrientation:!0,sortPluginsFor:[/palemoon/i]};this.options=this.extend(e,t),this.nativeForEach=Array.prototype.forEach,this.nativeMap=Array.prototype.map};return e.prototype={extend:function(e,t){if(null==e)return t;for(var i in e)null!=e[i]&&t[i]!==e[i]&&(t[i]=e[i]);return t},log:function(e){window.console&&console.log(e)},get:function(e){var t=[];t=this.userAgentKey(t),t=this.languageKey(t),t=this.colorDepthKey(t),t=this.pixelRatioKey(t),t=this.screenResolutionKey(t),t=this.availableScreenResolutionKey(t),t=this.timezoneOffsetKey(t),t=this.sessionStorageKey(t),t=this.localStorageKey(t),t=this.indexedDbKey(t),t=this.addBehaviorKey(t),t=this.openDatabaseKey(t),t=this.cpuClassKey(t),t=this.platformKey(t),t=this.doNotTrackKey(t),t=this.pluginsKey(t),t=this.canvasKey(t),t=this.webglKey(t),t=this.adBlockKey(t),t=this.hasLiedLanguagesKey(t),t=this.hasLiedResolutionKey(t),t=this.hasLiedOsKey(t),t=this.hasLiedBrowserKey(t),t=this.touchSupportKey(t);var i=this;this.fontsKey(t,function(t){var a=[];i.each(t,function(e){var t=e.value;"undefined"!=typeof e.value.join&&(t=e.value.join(";")),a.push(t)});var r=i.x64hash128(a.join("~~~"),31);return e(r,t)})},userAgentKey:function(e){return this.options.excludeUserAgent||e.push({key:"user_agent",value:this.getUserAgent()}),e},getUserAgent:function(){return navigator.userAgent},languageKey:function(e){return this.options.excludeLanguage||e.push({key:"language",value:navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage||""}),e},colorDepthKey:function(e){return this.options.excludeColorDepth||e.push({key:"color_depth",value:screen.colorDepth}),e},pixelRatioKey:function(e){return this.options.excludePixelRatio||e.push({key:"pixel_ratio",value:this.getPixelRatio()}),e},getPixelRatio:function(){return window.devicePixelRatio||""},screenResolutionKey:function(e){return this.options.excludeScreenResolution?e:this.getScreenResolution(e)},getScreenResolution:function(e){var t;return t=this.options.detectScreenOrientation&&screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height],"undefined"!=typeof t&&e.push({key:"resolution",value:t}),e},availableScreenResolutionKey:function(e){return this.options.excludeAvailableScreenResolution?e:this.getAvailableScreenResolution(e)},getAvailableScreenResolution:function(e){var t;return screen.availWidth&&screen.availHeight&&(t=this.options.detectScreenOrientation?screen.availHeight>screen.availWidth?[screen.availHeight,screen.availWidth]:[screen.availWidth,screen.availHeight]:[screen.availHeight,screen.availWidth]),"undefined"!=typeof t&&e.push({key:"available_resolution",value:t}),e},timezoneOffsetKey:function(e){return this.options.excludeTimezoneOffset||e.push({key:"timezone_offset",value:(new Date).getTimezoneOffset()}),e},sessionStorageKey:function(e){return!this.options.excludeSessionStorage&&this.hasSessionStorage()&&e.push({key:"session_storage",value:1}),e},localStorageKey:function(e){return!this.options.excludeSessionStorage&&this.hasLocalStorage()&&e.push({key:"local_storage",value:1}),e},indexedDbKey:function(e){return!this.options.excludeIndexedDB&&this.hasIndexedDB()&&e.push({key:"indexed_db",value:1}),e},addBehaviorKey:function(e){return document.body&&!this.options.excludeAddBehavior&&document.body.addBehavior&&e.push({key:"add_behavior",value:1}),e},openDatabaseKey:function(e){return!this.options.excludeOpenDatabase&&window.openDatabase&&e.push({key:"open_database",value:1}),e},cpuClassKey:function(e){return this.options.excludeCpuClass||e.push({key:"cpu_class",value:this.getNavigatorCpuClass()}),e},platformKey:function(e){return this.options.excludePlatform||e.push({key:"navigator_platform",value:this.getNavigatorPlatform()}),e},doNotTrackKey:function(e){return this.options.excludeDoNotTrack||e.push({key:"do_not_track",value:this.getDoNotTrack()}),e},canvasKey:function(e){return!this.options.excludeCanvas&&this.isCanvasSupported()&&e.push({key:"canvas",value:this.getCanvasFp()}),e},webglKey:function(e){return this.options.excludeWebGL?e:this.isWebGlSupported()?(e.push({key:"webgl",value:this.getWebglFp()}),e):e},adBlockKey:function(e){return this.options.excludeAdBlock||e.push({key:"adblock",value:this.getAdBlock()}),e},hasLiedLanguagesKey:function(e){return this.options.excludeHasLiedLanguages||e.push({key:"has_lied_languages",value:this.getHasLiedLanguages()}),e},hasLiedResolutionKey:function(e){return this.options.excludeHasLiedResolution||e.push({key:"has_lied_resolution",value:this.getHasLiedResolution()}),e},hasLiedOsKey:function(e){return this.options.excludeHasLiedOs||e.push({key:"has_lied_os",value:this.getHasLiedOs()}),e},hasLiedBrowserKey:function(e){return this.options.excludeHasLiedBrowser||e.push({key:"has_lied_browser",value:this.getHasLiedBrowser()}),e},fontsKey:function(e,t){return this.options.excludeJsFonts?this.flashFontsKey(e,t):this.jsFontsKey(e,t)},flashFontsKey:function(e,t){return this.options.excludeFlashFonts?t(e):this.hasSwfObjectLoaded()&&this.hasMinFlashInstalled()?"undefined"==typeof this.options.swfPath?t(e):void this.loadSwfAndDetectFonts(function(i){e.push({key:"swf_fonts",value:i.join(";")}),t(e)}):t(e)},jsFontsKey:function(e,t){var i=this;return setTimeout(function(){var a=["monospace","sans-serif","serif"],r=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"],n=["Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"];i.options.extendedJsFonts&&(r=r.concat(n));var o="mmmmmmmmmmlli",s="72px",l=document.getElementsByTagName("body")[0],h=document.createElement("div"),u=document.createElement("div"),d={},c={},g=function(){var e=document.createElement("span");return e.style.position="absolute",e.style.left="-9999px",e.style.fontSize=s,e.innerHTML=o,e},p=function(e,t){var i=g();return i.style.fontFamily="'"+e+"',"+t,i},f=function(){for(var e=[],t=0,i=a.length;i>t;t++){var r=g();r.style.fontFamily=a[t],h.appendChild(r),e.push(r)}return e},m=function(){for(var e={},t=0,i=r.length;i>t;t++){for(var n=[],o=0,s=a.length;s>o;o++){var l=p(r[t],a[o]);u.appendChild(l),n.push(l)}e[r[t]]=n}return e},S=function(e){for(var t=!1,i=0;i<a.length;i++)if(t=e[i].offsetWidth!==d[a[i]]||e[i].offsetHeight!==c[a[i]])return t;return t},T=f();l.appendChild(h);for(var x=0,v=a.length;v>x;x++)d[a[x]]=T[x].offsetWidth,c[a[x]]=T[x].offsetHeight;var M=m();l.appendChild(u);for(var A=[],E=0,y=r.length;y>E;E++)S(M[r[E]])&&A.push(r[E]);l.removeChild(u),l.removeChild(h),e.push({key:"js_fonts",value:A}),t(e)},1)},pluginsKey:function(e){return this.options.excludePlugins||(this.isIE()?this.options.excludeIEPlugins||e.push({key:"ie_plugins",value:this.getIEPlugins()}):e.push({key:"regular_plugins",value:this.getRegularPlugins()})),e},getRegularPlugins:function(){for(var e=[],t=0,i=navigator.plugins.length;i>t;t++)e.push(navigator.plugins[t]);return this.pluginsShouldBeSorted()&&(e=e.sort(function(e,t){return e.name>t.name?1:e.name<t.name?-1:0})),this.map(e,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this)},getIEPlugins:function(){var e=[];if(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window){var t=["AcroPDF.PDF","Adodb.Stream","AgControl.AgControl","DevalVRXCtrl.DevalVRXCtrl.1","MacromediaFlashPaper.MacromediaFlashPaper","Msxml2.DOMDocument","Msxml2.XMLHTTP","PDF.PdfCtrl","QuickTime.QuickTime","QuickTimeCheckObject.QuickTimeCheck.1","RealPlayer","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","Scripting.Dictionary","SWCtl.SWCtl","Shell.UIHelper","ShockwaveFlash.ShockwaveFlash","Skype.Detection","TDCCtl.TDCCtl","WMPlayer.OCX","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1"];e=this.map(t,function(e){try{return new ActiveXObject(e),e}catch(t){return null}})}return navigator.plugins&&(e=e.concat(this.getRegularPlugins())),e},pluginsShouldBeSorted:function(){for(var e=!1,t=0,i=this.options.sortPluginsFor.length;i>t;t++){var a=this.options.sortPluginsFor[t];if(navigator.userAgent.match(a)){e=!0;break}}return e},touchSupportKey:function(e){return this.options.excludeTouchSupport||e.push({key:"touch_support",value:this.getTouchSupport()}),e},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasIndexedDB:function(){return!!window.indexedDB},getNavigatorCpuClass:function(){return navigator.cpuClass?navigator.cpuClass:"unknown"},getNavigatorPlatform:function(){return navigator.platform?navigator.platform:"unknown"},getDoNotTrack:function(){return navigator.doNotTrack?navigator.doNotTrack:"unknown"},getTouchSupport:function(){var e=0,t=!1;"undefined"!=typeof navigator.maxTouchPoints?e=navigator.maxTouchPoints:"undefined"!=typeof navigator.msMaxTouchPoints&&(e=navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch(i){}var a="ontouchstart"in window;return[e,t,a]},getCanvasFp:function(){var e=[],t=document.createElement("canvas");t.width=2e3,t.height=200,t.style.display="inline";var i=t.getContext("2d");return i.rect(0,0,10,10),i.rect(2,2,6,6),e.push("canvas winding:"+(i.isPointInPath(5,5,"evenodd")===!1?"yes":"no")),i.textBaseline="alphabetic",i.fillStyle="#f60",i.fillRect(125,1,62,20),i.fillStyle="#069",this.options.dontUseFakeFontInCanvas?i.font="11pt Arial":i.font="11pt no-real-font-123",i.fillText("Cwm fjordbank glyphs vext quiz, 😃",2,15),i.fillStyle="rgba(102, 204, 0, 0.2)",i.font="18pt Arial",i.fillText("Cwm fjordbank glyphs vext quiz, 😃",4,45),i.globalCompositeOperation="multiply",i.fillStyle="rgb(255,0,255)",i.beginPath(),i.arc(50,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(0,255,255)",i.beginPath(),i.arc(100,50,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,255,0)",i.beginPath(),i.arc(75,100,50,0,2*Math.PI,!0),i.closePath(),i.fill(),i.fillStyle="rgb(255,0,255)",i.arc(75,75,75,0,2*Math.PI,!0),i.arc(75,75,25,0,2*Math.PI,!0),i.fill("evenodd"),e.push("canvas fp:"+t.toDataURL()),e.join("~")},getWebglFp:function(){var e,t=function(t){return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),"["+t[0]+", "+t[1]+"]"},i=function(e){var t,i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic");return i?(t=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT),0===t&&(t=2),t):null};if(e=this.getWebglCanvas(),!e)return null;var a=[],r="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}",n="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}",o=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,o);var s=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);e.bufferData(e.ARRAY_BUFFER,s,e.STATIC_DRAW),o.itemSize=3,o.numItems=3;var l=e.createProgram(),h=e.createShader(e.VERTEX_SHADER);e.shaderSource(h,r),e.compileShader(h);var u=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(u,n),e.compileShader(u),e.attachShader(l,h),e.attachShader(l,u),e.linkProgram(l),e.useProgram(l),l.vertexPosAttrib=e.getAttribLocation(l,"attrVertex"),l.offsetUniform=e.getUniformLocation(l,"uniformOffset"),e.enableVertexAttribArray(l.vertexPosArray),e.vertexAttribPointer(l.vertexPosAttrib,o.itemSize,e.FLOAT,!1,0,0),e.uniform2f(l.offsetUniform,1,1),e.drawArrays(e.TRIANGLE_STRIP,0,o.numItems),null!=e.canvas&&a.push(e.canvas.toDataURL()),a.push("extensions:"+e.getSupportedExtensions().join(";")),a.push("webgl aliased line width range:"+t(e.getParameter(e.ALIASED_LINE_WIDTH_RANGE))),a.push("webgl aliased point size range:"+t(e.getParameter(e.ALIASED_POINT_SIZE_RANGE))),a.push("webgl alpha bits:"+e.getParameter(e.ALPHA_BITS)),a.push("webgl antialiasing:"+(e.getContextAttributes().antialias?"yes":"no")),a.push("webgl blue bits:"+e.getParameter(e.BLUE_BITS)),a.push("webgl depth bits:"+e.getParameter(e.DEPTH_BITS)),a.push("webgl green bits:"+e.getParameter(e.GREEN_BITS)),a.push("webgl max anisotropy:"+i(e)),a.push("webgl max combined texture image units:"+e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),a.push("webgl max cube map texture size:"+e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE)),a.push("webgl max fragment uniform vectors:"+e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS)),a.push("webgl max render buffer size:"+e.getParameter(e.MAX_RENDERBUFFER_SIZE)),a.push("webgl max texture image units:"+e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),a.push("webgl max texture size:"+e.getParameter(e.MAX_TEXTURE_SIZE)),a.push("webgl max varying vectors:"+e.getParameter(e.MAX_VARYING_VECTORS)),a.push("webgl max vertex attribs:"+e.getParameter(e.MAX_VERTEX_ATTRIBS)),a.push("webgl max vertex texture image units:"+e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),a.push("webgl max vertex uniform vectors:"+e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS)),a.push("webgl max viewport dims:"+t(e.getParameter(e.MAX_VIEWPORT_DIMS))),a.push("webgl red bits:"+e.getParameter(e.RED_BITS)),a.push("webgl renderer:"+e.getParameter(e.RENDERER)),a.push("webgl shading language version:"+e.getParameter(e.SHADING_LANGUAGE_VERSION)),a.push("webgl stencil bits:"+e.getParameter(e.STENCIL_BITS)),a.push("webgl vendor:"+e.getParameter(e.VENDOR)),a.push("webgl version:"+e.getParameter(e.VERSION)),e.getShaderPrecisionFormat?(a.push("webgl vertex shader high float precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision),a.push("webgl vertex shader high float precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).rangeMin),a.push("webgl vertex shader high float precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).rangeMax),a.push("webgl vertex shader medium float precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision),a.push("webgl vertex shader medium float precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).rangeMin),a.push("webgl vertex shader medium float precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).rangeMax),a.push("webgl vertex shader low float precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_FLOAT).precision),a.push("webgl vertex shader low float precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_FLOAT).rangeMin),a.push("webgl vertex shader low float precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_FLOAT).rangeMax),a.push("webgl fragment shader high float precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision),a.push("webgl fragment shader high float precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).rangeMin),a.push("webgl fragment shader high float precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).rangeMax),a.push("webgl fragment shader medium float precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision),a.push("webgl fragment shader medium float precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).rangeMin),a.push("webgl fragment shader medium float precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).rangeMax),a.push("webgl fragment shader low float precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT).precision),a.push("webgl fragment shader low float precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT).rangeMin),a.push("webgl fragment shader low float precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_FLOAT).rangeMax),a.push("webgl vertex shader high int precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_INT).precision),a.push("webgl vertex shader high int precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_INT).rangeMin),a.push("webgl vertex shader high int precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_INT).rangeMax),a.push("webgl vertex shader medium int precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_INT).precision),a.push("webgl vertex shader medium int precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_INT).rangeMin),a.push("webgl vertex shader medium int precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_INT).rangeMax),a.push("webgl vertex shader low int precision:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_INT).precision),a.push("webgl vertex shader low int precision rangeMin:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_INT).rangeMin),a.push("webgl vertex shader low int precision rangeMax:"+e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.LOW_INT).rangeMax),a.push("webgl fragment shader high int precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT).precision),a.push("webgl fragment shader high int precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT).rangeMin),a.push("webgl fragment shader high int precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_INT).rangeMax),a.push("webgl fragment shader medium int precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT).precision),a.push("webgl fragment shader medium int precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT).rangeMin),a.push("webgl fragment shader medium int precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_INT).rangeMax),a.push("webgl fragment shader low int precision:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT).precision),a.push("webgl fragment shader low int precision rangeMin:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT).rangeMin),a.push("webgl fragment shader low int precision rangeMax:"+e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.LOW_INT).rangeMax),a.join("~")):a.join("~")},getAdBlock:function(){var e=document.createElement("div");e.innerHTML="&nbsp;",e.className="adsbox";var t=!1;try{document.body.appendChild(e),t=0===document.getElementsByClassName("adsbox")[0].offsetHeight,document.body.removeChild(e)}catch(i){t=!1}return t},getHasLiedLanguages:function(){if("undefined"!=typeof navigator.languages)try{var e=navigator.languages[0].substr(0,2);if(e!==navigator.language.substr(0,2))return!0}catch(t){return!0}return!1},getHasLiedResolution:function(){return screen.width<screen.availWidth?!0:screen.height<screen.availHeight},getHasLiedOs:function(){var e,t=navigator.userAgent.toLowerCase(),i=navigator.oscpu,a=navigator.platform.toLowerCase();e=t.indexOf("windows phone")>=0?"Windows Phone":t.indexOf("win")>=0?"Windows":t.indexOf("android")>=0?"Android":t.indexOf("linux")>=0?"Linux":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?"iOS":t.indexOf("mac")>=0?"Mac":"Other";var r;if(r="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,r&&"Windows Phone"!==e&&"Android"!==e&&"iOS"!==e&&"Other"!==e)return!0;if("undefined"!=typeof i){if(i=i.toLowerCase(),i.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e)return!0;if(i.indexOf("linux")>=0&&"Linux"!==e&&"Android"!==e)return!0;if(i.indexOf("mac")>=0&&"Mac"!==e&&"iOS"!==e)return!0;if(0===i.indexOf("win")&&0===i.indexOf("linux")&&i.indexOf("mac")>=0&&"other"!==e)return!0}return a.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e?!0:(a.indexOf("linux")>=0||a.indexOf("android")>=0||a.indexOf("pike")>=0)&&"Linux"!==e&&"Android"!==e?!0:(a.indexOf("mac")>=0||a.indexOf("ipad")>=0||a.indexOf("ipod")>=0||a.indexOf("iphone")>=0)&&"Mac"!==e&&"iOS"!==e?!0:0===a.indexOf("win")&&0===a.indexOf("linux")&&a.indexOf("mac")>=0&&"other"!==e?!0:"undefined"==typeof navigator.plugins&&"Windows"!==e&&"Windows Phone"!==e},getHasLiedBrowser:function(){var e,t=navigator.userAgent.toLowerCase(),i=navigator.productSub;if(e=t.indexOf("firefox")>=0?"Firefox":t.indexOf("opera")>=0||t.indexOf("opr")>=0?"Opera":t.indexOf("chrome")>=0?"Chrome":t.indexOf("safari")>=0?"Safari":t.indexOf("trident")>=0?"Internet Explorer":"Other",("Chrome"===e||"Safari"===e||"Opera"===e)&&"20030107"!==i)return!0;var a=eval.toString().length;if(37===a&&"Safari"!==e&&"Firefox"!==e&&"Other"!==e)return!0;if(39===a&&"Internet Explorer"!==e&&"Other"!==e)return!0;if(33===a&&"Chrome"!==e&&"Opera"!==e&&"Other"!==e)return!0;var r;try{throw"a"}catch(n){try{n.toSource(),r=!0}catch(o){r=!1}}return!(!r||"Firefox"===e||"Other"===e)},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isWebGlSupported:function(){if(!this.isCanvasSupported())return!1;var e,t=document.createElement("canvas");try{e=t.getContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(i){e=!1}return!!window.WebGLRenderingContext&&!!e},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName?!0:!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},hasSwfObjectLoaded:function(){return"undefined"!=typeof window.swfobject},hasMinFlashInstalled:function(){return swfobject.hasFlashPlayerVersion("9.0.0")},addFlashDivNode:function(){var e=document.createElement("div");e.setAttribute("id",this.options.swfContainerId),document.body.appendChild(e)},loadSwfAndDetectFonts:function(e){var t="___fp_swf_loaded";window[t]=function(t){e(t)};var i=this.options.swfContainerId;this.addFlashDivNode();var a={onReady:t},r={allowScriptAccess:"always",menu:"false"};swfobject.embedSWF(this.options.swfPath,i,"1","1","9.0.0",!1,a,r,{})},getWebglCanvas:function(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(i){}return t||(t=null),t},each:function(e,t,i){if(null!==e)if(this.nativeForEach&&e.forEach===this.nativeForEach)e.forEach(t,i);else if(e.length===+e.length){for(var a=0,r=e.length;r>a;a++)if(t.call(i,e[a],a,e)==={})return}else for(var n in e)if(e.hasOwnProperty(n)&&t.call(i,e[n],n,e)==={})return},map:function(e,t,i){var a=[];return null==e?a:this.nativeMap&&e.map===this.nativeMap?e.map(t,i):(this.each(e,function(e,r,n){a[a.length]=t.call(i,e,r,n)}),a)},x64Add:function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var i=[0,0,0,0];return i[3]+=e[3]+t[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=e[2]+t[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=e[1]+t[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=e[0]+t[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]},x64Multiply:function(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var i=[0,0,0,0];return i[3]+=e[3]*t[3],i[2]+=i[3]>>>16,i[3]&=65535,i[2]+=e[2]*t[3],i[1]+=i[2]>>>16,i[2]&=65535,i[2]+=e[3]*t[2],i[1]+=i[2]>>>16,i[2]&=65535,i[1]+=e[1]*t[3],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=e[2]*t[2],i[0]+=i[1]>>>16,i[1]&=65535,i[1]+=e[3]*t[1],i[0]+=i[1]>>>16,i[1]&=65535,i[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],i[0]&=65535,[i[0]<<16|i[1],i[2]<<16|i[3]]},x64Rotl:function(e,t){return t%=64,32===t?[e[1],e[0]]:32>t?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])},x64LeftShift:function(e,t){return t%=64,0===t?e:32>t?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]},x64Xor:function(e,t){return[e[0]^t[0],e[1]^t[1]]},x64Fmix:function(e){return e=this.x64Xor(e,[0,e[0]>>>1]),e=this.x64Multiply(e,[4283543511,3981806797]),e=this.x64Xor(e,[0,e[0]>>>1]),e=this.x64Multiply(e,[3301882366,444984403]),e=this.x64Xor(e,[0,e[0]>>>1])},x64hash128:function(e,t){e=e||"",t=t||0;for(var i=e.length%16,a=e.length-i,r=[0,t],n=[0,t],o=[0,0],s=[0,0],l=[2277735313,289559509],h=[1291169091,658871167],u=0;a>u;u+=16)o=[255&e.charCodeAt(u+4)|(255&e.charCodeAt(u+5))<<8|(255&e.charCodeAt(u+6))<<16|(255&e.charCodeAt(u+7))<<24,255&e.charCodeAt(u)|(255&e.charCodeAt(u+1))<<8|(255&e.charCodeAt(u+2))<<16|(255&e.charCodeAt(u+3))<<24],s=[255&e.charCodeAt(u+12)|(255&e.charCodeAt(u+13))<<8|(255&e.charCodeAt(u+14))<<16|(255&e.charCodeAt(u+15))<<24,255&e.charCodeAt(u+8)|(255&e.charCodeAt(u+9))<<8|(255&e.charCodeAt(u+10))<<16|(255&e.charCodeAt(u+11))<<24],o=this.x64Multiply(o,l),o=this.x64Rotl(o,31),o=this.x64Multiply(o,h),r=this.x64Xor(r,o),r=this.x64Rotl(r,27),r=this.x64Add(r,n),r=this.x64Add(this.x64Multiply(r,[0,5]),[0,1390208809]),
s=this.x64Multiply(s,h),s=this.x64Rotl(s,33),s=this.x64Multiply(s,l),n=this.x64Xor(n,s),n=this.x64Rotl(n,31),n=this.x64Add(n,r),n=this.x64Add(this.x64Multiply(n,[0,5]),[0,944331445]);switch(o=[0,0],s=[0,0],i){case 15:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+14)],48));case 14:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+13)],40));case 13:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+12)],32));case 12:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+11)],24));case 11:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+10)],16));case 10:s=this.x64Xor(s,this.x64LeftShift([0,e.charCodeAt(u+9)],8));case 9:s=this.x64Xor(s,[0,e.charCodeAt(u+8)]),s=this.x64Multiply(s,h),s=this.x64Rotl(s,33),s=this.x64Multiply(s,l),n=this.x64Xor(n,s);case 8:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+7)],56));case 7:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+6)],48));case 6:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+5)],40));case 5:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+4)],32));case 4:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+3)],24));case 3:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+2)],16));case 2:o=this.x64Xor(o,this.x64LeftShift([0,e.charCodeAt(u+1)],8));case 1:o=this.x64Xor(o,[0,e.charCodeAt(u)]),o=this.x64Multiply(o,l),o=this.x64Rotl(o,31),o=this.x64Multiply(o,h),r=this.x64Xor(r,o)}return r=this.x64Xor(r,[0,e.length]),n=this.x64Xor(n,[0,e.length]),r=this.x64Add(r,n),n=this.x64Add(n,r),r=this.x64Fmix(r),n=this.x64Fmix(n),r=this.x64Add(r,n),n=this.x64Add(n,r),("00000000"+(r[0]>>>0).toString(16)).slice(-8)+("00000000"+(r[1]>>>0).toString(16)).slice(-8)+("00000000"+(n[0]>>>0).toString(16)).slice(-8)+("00000000"+(n[1]>>>0).toString(16)).slice(-8)}},e.VERSION="1.4.0",e});
var advancedStoreFinder = (function (w, $, FingerPrintLib, TemplateLib) {
'use strict';
var userLocationLatitude;
var userLocationLongitude;
var userLocationAccuracy;
var userFingerPrint;
var lastSearchQuery;
var selectStoreUrl         = '/advancedstorefinder/store/select';
var fingerPrintAnalysisUrl = '/advancedstorefinder/store/find';
var logUrl                 = '/advancedstorefinder/log/log';
var autocompleteUrl        = '/advancedstorefinder/service/autocomplete';
var companyStoresUrl       = '/advancedstorefinder/service/companystores';
var nearestStoresUrl       = '/advancedstorefinder/service/neareststores';
var storeDetailUrl = '/storefinder/detail';
var urlWhitelist = [
/\/wunschzettel$/i,
/\/Inhalte\/Unsere-aktuellen-TV-Stars$/i
];
var searchStoreDialogId  = 'asf-search-store-dialog';
var cookieInitialDialogClosed = 'initial_dialog';
var cookieSessionId = '_asf_session_id';
var autosuggestTimer = 0;
var autosuggestDelay = 300;
var diaHeight = "385px";
var diaBG = 'url("/extension/cplusadvancedstorefinder/design/cplusadvancedstorefinder/images/bg_modal-search.jpg") no-repeat #f1f1f1'
var searchInputKeyBlackList = [37, 38, 39, 40, 16, 17, 35, 36];
var searchStorePopupTemplate =
'<div class="store-finder-overlay"></div>' +
'<div id="{{dialog_id}}" class="asf-dialog asf-dialog-search">' +
'        <h2 class="asf-title">{{headline}}<div id="{{close_icon_id}}" class="close"></div></h2>' +
'        <hr />' +
'        {{#show_nearest_store}}' +
'        <div class="icon_location"></div>' +
'        <div id="shop-info">' +
'            <div class="shop-info--name shop-info">{{store_name}}</div>' +
'            <div class="shop-info shop-info--street">{{store_street}}</div>' +
'            <div class="shop-info shop-info--city">{{store_zip}} {{store_city}}</div>' +
'        </div>' +
'        <br>' +
'        <div class="controls">' +
'            <button id="{{search_icon_id}}" class="location-button location-button--confirm" type="submit">' +
'                <span class="location-button--text">Fachmarkt ändern</span>' +
'                <span class="location-button--tip location-button--tip-confirm"></span>' +
'            </button>' +
'            <a href="{{select_store_url}}">' +
'            <button class="location-button location-button--search">' +
'                <span class="location-button--text">Stimmt so, vielen Dank</span>' +
'                <span class="location-button--tip location-button--tip-search"></span>' +
'            </button>' +
'            </a>' +
'        </div>' +
'        <div class="location-notice">Die Fachmarktzuordnung wird benötigt, damit wir Ihnen auf expert.de die korrekten Preise anzeigen können. Ihr Markt wurde automatisch ermittelt.</div>' +
'        {{/show_nearest_store}}' +
'        <div class="location-search">' +
'        <div id="{{locate_button_id}}" class="autolocation"><p>Aktuellen Standort verwenden</p></div>' +
'            <input id="{{search_input_id}}" type="text" class="search-input location-search-box" placeholder="PLZ / Ort eingeben" required autocomplete="off">' +
'            <div id="{{search_button_id}}" class="icon_lupe icon_hide"></div>' +
'            <div class="location-search-suggestion-wrapper">' +
'               <div id="{{suggest_container_id}}" class="suggests location-search-suggestion">' +
'            </div>' +
'        </div>' +
'        <div id="{{company_group_stores_id}}" data-group_store_name="{{group_store_name}} Fachmärkte:"></div>' +
'</div>'
;
var searchStoreSuggestsTemplate =
'{{#stores}}' +
'<a class="{{^hasOnlineStore}}redirect--not-online{{/hasOnlineStore}}" href="{{select_store_url}}">' +
'       <div class="location-search-item">' +
'           <span class="location-search-store name location-search-upper">{{store_name}}</span><br>' +
'           <div class="location-search-lower">' +
'               <span class="location-search-city">{{store_street}}</span>' +
'               <span class="location-search-town">{{store_zip}} {{store_city}}</span>' +
'           </div>' +
'           <a href="{{select_store_url}}" class="buttonStyle {{^hasOnlineStore}}button-item---not-online redirect--not-online{{/hasOnlineStore}}"><span class="buttonText">{{^hasOnlineStore}}Marktinfos{{/hasOnlineStore}}{{#hasOnlineStore}}Markt auswählen{{/hasOnlineStore}}</span><span class="buttonTip"></span></a>' +
'       </div>' +
'</a>' +
'{{/stores}}'
;
var searchStoreCompanyGroupStoresTemplate =
'{{#company_group_stores}}' +
'   <a href="{{select_store_url}}">' +
'       <div class="location-search-itemalt">' +
'           <div class="icon_location icon_location-suggest"></div>' +
'           <span class="location-search-streetalt">{{store_street}}</span><br>' +
'           <span class="location-search-cityalt">{{store_zip}} {{store_city}}</span><br>' +
'       </div>' +
'   </a>' +
'{{/company_group_stores}}'
;
var init = function (config) {
$(function () {
if (config !== undefined) {
if (!!config['searchStorePopupTemplate']) {
searchStorePopupTemplate = config['searchStorePopupTemplate'];
}
if (!!config['searchStoreSuggestsTemplate']) {
searchStoreSuggestsTemplate = config['searchStoreSuggestsTemplate'];
}
if (!!config['searchStoreCompanyGroupStoresTemplate']) {
searchStoreCompanyGroupStoresTemplate = config['searchStoreCompanyGroupStoresTemplate'];
}
}
if (!getSessionId()) {
setSessionId(generateSessionId());
}
if (companyGroupSelected() || storeSelected()) {
return;
}
if (initialDialogClosed()) {
return;
}
for (var i = 0, len = urlWhitelist.length; i < len; i++) {
if (window.location.pathname.search(urlWhitelist[i]) !== -1) {
return;
}
}
renderSearchStorePopup();
return;
});
};
var requestNearestCompanyGroupStores = function (companyGroupId, successCallback, failCallback) {
$.get(companyStoresUrl + '?companyGroupId=' + companyGroupId, {})
.done(successCallback)
.fail(failCallback);
};
var handleNearestCompanyGroupStoresSuccess = function (data) {
renderNearestCompanyGroupStores(data.stores);
};
var handleNearestCompanyGroupStoresFail = function (data) {
renderNearestCompanyGroupStores();
};
var renderNearestCompanyGroupStores = function (stores) {
if (!$.isArray(stores) || stores.length <= 1) {
return;
}
if (stores.length > 10) {
stores = stores.slice(0, 10);
}
var companyGroupStoresContainer = $('#' + searchStoreDialogId + '-company-group-stores');
var templateData = {
"company_group_stores": []
};
for (var i=0; i<stores.length; i++) {
templateData.company_group_stores[i] = {
"store_name":       stores[i].store_name,
"store_street":     stores[i].store_street,
"store_zip":        stores[i].store_zip,
"store_city":       stores[i].store_city,
"distance_text":    stores[i].distanceText,
"duration_text":    stores[i].durationText,
"select_store_url": getSelectStoreUrl(stores[i])
};
}
companyGroupStoresContainer.html(TemplateLib.render(searchStoreCompanyGroupStoresTemplate, templateData));
companyGroupStoresContainer.show();
};
var renderSearchStorePopup = function (stores, noOfflineStores) {
var store = undefined;
if ($.isArray(stores) && stores.length > 0) {
store = stores[0];
}
var templateData = {
"dialog_id":             searchStoreDialogId,
"close_icon_id" :        searchStoreDialogId + '-close',
"search_input_id" :      searchStoreDialogId + '-search-input',
"search_button_id" :     searchStoreDialogId + '-search-button',
"locate_button_id" :     searchStoreDialogId + '-locate-button',
"suggest_container_id" : searchStoreDialogId + '-suggest-conatiner',
"company_group_stores_id" : searchStoreDialogId + '-company-group-stores'
};
if (store !== undefined) {
templateData.show_nearest_store = true,
templateData.store_name         = store.store_name,
templateData.store_street       = store.store_street,
templateData.store_zip          = store.store_zip,
templateData.store_city         = store.store_city,
templateData.select_store_url   = getSelectStoreUrl(store),
templateData.distance_text      = store.distanceText,
templateData.headline           = "Ihr expert-Fachmarkt";
} else {
templateData.headline           = "Ihr expert-Fachmarkt";
}
if ((storeSelected() || companyGroupSelected())) {
diaHeight = "385px";
templateData.headline = "Fachmarkt auswählen";
templateData.group_store_name = getSelectedCompanyGroupName();
if (templateData.group_store_name.toLocaleLowerCase().indexOf("expert") == -1){
templateData.group_store_name = "expert " + templateData.group_store_name;
}
requestNearestCompanyGroupStores(getSelectedCompanyGroupId(), handleNearestCompanyGroupStoresSuccess, handleNearestCompanyGroupStoresFail)
}
if (isShopDetailsPage()) {
templateData.headline = "Preisabfrage in Ihrem Markt";
}
$('body').append(TemplateLib.render(searchStorePopupTemplate, templateData));
$('.asf-dialog-search').css("height",diaHeight);
$('.asf-dialog-search').css("background",diaBG);
diaHeight = "385px";
diaBG = 'url("/extension/cplusadvancedstorefinder/design/cplusadvancedstorefinder/images/bg_modal-search.jpg") no-repeat #f1f1f1';
var searchStoreDialog = $('#' + searchStoreDialogId);
$('#' + templateData['close_icon_id'], searchStoreDialog).click(function () {
searchStoreDialog.remove();
$('.store-finder-overlay').remove();
$.cookie(cookieInitialDialogClosed, '1', { path: '/' });
});
$(document).on('click', '.redirect--not-online', function(event) {
$.cookie(cookieInitialDialogClosed, '1', { path: '/' });
});
$('.store-finder-overlay').click(function () {
searchStoreDialog.remove();
$('.store-finder-overlay').remove();
$.cookie(cookieInitialDialogClosed, '1', { path: '/' });
});
var $searchButton = $('#' + templateData['search_button_id'], searchStoreDialog);
var $searchInput = $('#' + templateData['search_input_id'], searchStoreDialog);
$searchInput.keyup(function(e) {
if(searchInputKeyBlackList.indexOf(e.which) >= 0) {
return;
}
var searchText = $searchInput.val();
if (e.which == 13) {
$searchButton.click();
} else if(e.which == 27) {
$('#' + templateData['suggest_container_id'], searchStoreDialog).hide();
if (storeSelected() || companyGroupSelected()) {
requestNearestCompanyGroupStores(
getSelectedCompanyGroupId(),
handleNearestCompanyGroupStoresSuccess,
handleNearestCompanyGroupStoresFail
);
}
} else if (searchText.length >= 5) {
if (autosuggestTimer) {
clearTimeout(autosuggestTimer);
}
autosuggestTimer = setTimeout(function () {
$searchButton.click();
}, autosuggestDelay);
}
});
initLocateButton(searchStoreDialog, templateData['locate_button_id'], templateData['suggest_container_id'], noOfflineStores);
initSearchButton(searchStoreDialog, templateData['search_input_id'], templateData['search_button_id'], templateData['suggest_container_id'], noOfflineStores);
};
var renderSearchStoreSuggest = function (stores, noOfflineStores) {
if (!$.isArray(stores) || stores.length == 0) {
return;
}
var suggestsContainer = $('#' + searchStoreDialogId + ' .suggests');
var filteredStores = noOfflineStores ? stores.filter(function(item) {
return item.hasOnlineStore;
}) : stores;
var templateData = {
stores: filteredStores.map(function(store) {
return {
store_name: store.store_name,
store_street: store.store_street,
store_zip: store.store_zip,
store_city: store.store_city,
distance_text: store.distanceText,
duration_text: store.durationText,
select_store_url: getSelectStoreUrl(store),
hasOnlineStore: store.hasOnlineStore, // Converts number values to boolean because Mustache wont workg with number boolean
store_id: store.store_id
}
})
};
suggestsContainer.html('');
suggestsContainer.append(TemplateLib.render(searchStoreSuggestsTemplate, templateData));
$('.location-search-item', suggestsContainer).click(function () {
if (lastSearchQuery) {
log({
session_id: getSessionId(),
type:       'SearchDialogStoreSelected',
store_id:   storeId,
query:      lastSearchQuery,
latitude:   userLocationLatitude,
longitude:  userLocationLongitude,
accuracy:   userLocationAccuracy
});
}
});
};
var searchStoreSuggestSuccess = function (noOfflineStores, suggestContainerId, searchStoreDialog, data) {
if (data.length == 0) {
$('#' + suggestContainerId, searchStoreDialog).text('Ihre Suche hat leider zu keinem Ergebnis geführt. Bitte versuchen Sie es mit einer anderen PLZ oder einem anderen Ort.');
return;
}
renderSearchStoreSuggest(data, noOfflineStores);
};
var searchStoreSuggestFail = function (suggestContainerId, searchStoreDialog, error) {
$('#' + suggestContainerId, searchStoreDialog).text('Die Serveranfrage ist fehlgeschlagen. Bitte versuchen Sie es erneut.');
};
var initLocateButton = function (searchStoreDialog, locateButtonId, suggestContainerId, noOfflineStores) {
if (!browserGeoLocationSupported()) {
return;
}
$('#' + locateButtonId, searchStoreDialog).click(function () {
$("#suggests location-search-suggestion").show();
$(".location-search-suggestion-wrapper").show();
$('#' + suggestContainerId).show();
$("#asf-search-store-dialog-company-group-stores").hide();
$('#' + suggestContainerId, searchStoreDialog).text('Die Suche nach Märkten läuft. Wir bitten um einen Moment Geduld.');
navigator.geolocation.getCurrentPosition(function (position) {
$.get(nearestStoresUrl + '?lat=' + position.coords.latitude + '&lng=' + position.coords.longitude)
.then(
searchStoreSuggestSuccess.bind(this, noOfflineStores, suggestContainerId, searchStoreDialog),
searchStoreSuggestFail.bind(this, suggestContainerId, searchStoreDialog)
)
;
}, function () {
$('#' + suggestContainerId, searchStoreDialog).text('Bitte erlauben Sie dem Browser, Ihren Standort zu ermitteln');
return;
});
});
};
var removeOfflineStoresOnShop = function (initiator) {
console.log(initiator)
initiator.hasClass('specialist-retail-overlay');
}
var initSearchButton = function (searchStoreDialog, searchInputId, searchButtonId, suggestContainerId, noOfflineStores) {
var isWord = /[^a-zA-Z/ü/ö/ä/Ä/Ü/Ö/ß/]+/g;
var isNumb = /[^0-9]+/g;
$('#' + searchButtonId, searchStoreDialog).click(function (e) {
$(".location-search-suggestion-wrapper").show();
$('#' + suggestContainerId).show();
$("#asf-search-store-dialog-company-group-stores").hide();
lastSearchQuery = $('#' + searchInputId, searchStoreDialog).val();
if (lastSearchQuery.replace(isNumb, "").length > 5) {
$('#' + suggestContainerId, searchStoreDialog).text('Ihre Suche hat leider zu keinem Ergebnis geführt. Bitte versuchen Sie es mit einer anderen PLZ oder einem anderen Ort.');
return;
}
if (lastSearchQuery.replace(isNumb, "").length > 0 & lastSearchQuery.replace(isWord, "").length > 0) {
$('#' + suggestContainerId, searchStoreDialog).text('Ihre Suche hat leider zu keinem Ergebnis geführt. Bitte versuchen Sie es mit einer anderen PLZ oder einem anderen Ort.');
return;
}
lastSearchQuery = lastSearchQuery.replace(/\s+/g, '');
lastSearchQuery = encodeURIComponent(lastSearchQuery);
$('#' + suggestContainerId, searchStoreDialog).text('Die Suche nach Märkten läuft. Wir bitten um einen Moment Geduld.');
$.get(autocompleteUrl + '?query=' + lastSearchQuery)
.then(
searchStoreSuggestSuccess.bind(this, noOfflineStores, suggestContainerId, searchStoreDialog),
searchStoreSuggestFail.bind(this, suggestContainerId, searchStoreDialog)
)
;
});
};
var decodeURIComponentDeeply = function(location) {
var decodedLocation = location;
for (var i = 0; i < 10; i++) {
decodedLocation = decodeURIComponent(location);
if (decodedLocation === decodeURIComponent(location)) {
break;
}
}
return decodedLocation;
};
var getStoreDetailUrl = function(storeNodeId) {
return storeDetailUrl + '?storeId='+encodeURIComponent(storeNodeId);
};
var getSelectStoreUrl = function (store) {
var url = '';
var storeId = store.store_id || store.storeId; // fallback because fingerprint data seems to be different...
if (store.hasWebsite && store.hasOnlineStore) {
var redirectUrl = decodeURIComponentDeeply(w.location);
url = selectStoreUrl
+ '?storeId=' + storeId
+ '&fp=' + userFingerPrint;
if (isShopEnvironment()) {
url += '&redirectUrl=' + encodeURIComponent(redirectUrl) + '&branch_id=' + storeId
}
} else {
url = getStoreDetailUrl(store.node_id);
}
return url;
};
var storeSelected = function () {
return getSelectedStoreId() != 0;
};
var companyGroupSelected = function () {
return (storeSelected() && getSelectedStoreId() == getSelectedCompanyGroupId());
};
var getSelectedStoreId = function () {
return w.selectedStoreId;
};
var getSelectedCompanyGroupId = function () {
return w.selectedCompanyGroupId;
};
var getSelectedCompanyGroupName = function () {
return w.selectedCompanyGroupName;
};
var initialDialogClosed = function () {
return $.cookie(cookieInitialDialogClosed) == '1';
};
var browserGeoLocationSupported = function () {
return (navigator !== undefined && navigator.geolocation !== undefined);
};
var isShopEnvironment = function () {
return (w.location.href.indexOf('/shop/') !== -1);
};
var isShopDetailsPage = function () {
if (!isShopEnvironment()) {
return false;
}
var detailsPageRegex = /\/[0-9]{9,}[^\/]+\.html$/;
var detailsPageMatch = detailsPageRegex.exec(w.location.href);
return !!detailsPageMatch;
};
var isMobileEnvironment = function () {
return (w.location.href.indexOf('/m-stage.expert.de/') !== -1 || w.location.href.indexOf('/m.expert.de/') !== -1);
};
var generateSessionId = function () {
try {
return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
return v.toString(16);
});
} catch (e) {
return '1';
}
};
var getSessionId = function () {
return $.cookie(cookieSessionId);
};
var setSessionId = function (sessionId) {
$.cookie(cookieSessionId, sessionId);
};
var log = function (params) {
$.post(logUrl, params);
};
return {
'init': init,
'openSearchDialog': renderSearchStorePopup
}
var requestFingerprintAnalysis = function (fingerPrint, successCallback, failCallback) {
$.get(fingerPrintAnalysisUrl + '?fp=' + fingerPrint, {})
.done(successCallback)
.fail(failCallback);
};
var handleFingerprintAnalysisSuccess = function (data) {
if (isMobileEnvironment()) {
return renderSearchStorePopup();
} else {
return requestGeoLocation(locationLoadedForNearestStore, locationLoadedForNearestStore);
}
w.location = getSelectStoreUrl(data);
};
var handleFingerprintAnalysisFail = function (data) {
requestGeoLocation(locationLoadedForNearestStore, locationLoadedForNearestStore);
};
}(window, jQuery, Fingerprint2, Mustache));
StoreFinderOverlay = (function () {
'use strict';
return {
selectStoreId : function (storeId, targetUrl) {
targetUrl = targetUrl == null ? '' : targetUrl;
var redirectUrl = '/fullrange/redirect/' + storeId;
if (targetUrl != '') {
redirectUrl += '?url=' + encodeURIComponent(targetUrl);
}
window.analytics.trackEvent('Fachmarkt finden', 'Fachmarkt aus Ergebnisliste ausgewählt');
window.setTimeout(function () {
window.location.href = redirectUrl;
}, 500);   // Give the tracking time to track
},
close : function () {
$.prettyPhoto.close();
},
init : function (selector) {
selector = selector == null ? 'a.storeFinderLink' : selector;
var storeFinderLink = $(selector);
storeFinderLink.prettyPhoto({
deeplinking: false,   // prevent URL in the address bar from beeing changed
default_width  : 800,
default_height : 480,
show_title : false,
callback : function () {
window.analytics.trackEvent('Fachmarkt finden', 'Fachmarkt-Finder abgebrochen');
}
}).click(function (e) {
document.domain = location.hostname.replace(/.*\.([a-z-]+\.[a-z]+)/i, '$1');
$('a.pp_close').remove();
e.preventDefault();
});
}
};
}());
FullrangeNavigation = (function() {
'use strict';
return {
init : function () {
},
resetMainMenu : function () {
$('.main-navi ul.navi > li').removeClass('active');
$('nav.second-navi').hide();
},
resetSubMenu : function () {
$('nav ul.sub-navi li[data-category-id]').removeClass('selected');
},
setMainMenuActive : function (name) {
this.resetMainMenu();
$('.main-navi ul.navi > li[data-name="' + name + '"]').addClass('active');
$('nav.second-navi[data-name="' + name + '"]').show();
},
setSubMenuActive : function (categoryId) {
this.resetSubMenu();
$('nav ul.sub-navi li[data-category-id=' + categoryId + ']').addClass('selected');
}
};
}());
$(document).ready(function () {
'use strict';
StoreFinderOverlay.init();
FullrangeNavigation.init();
});
$.fn.extend({
extendendDatePicker: function (allowedDays, options) {
$.extend(options, $.datepicker.regional['de']);
var calculateEastern = function (year) {
var a = year % 19;
var b = Math.floor(year / 100);
var c = year % 100;
var d = Math.floor(b / 4);
var e = b % 4;
var f = Math.floor((b + 8) / 25);
var g = Math.floor((b - f + 1) / 3);
var h = (19 * a + b - d - g + 15) % 30;
var i = Math.floor(c / 4);
var k = c % 4;
var l = (32 + 2 * e + 2 * i - h - k) % 7;
var m = Math.floor((a + 11 * h + 22 * l) / 451);
var n0 = (h + l + 7 * m + 114);
var n = Math.floor(n0 / 31) - 1;
var p = n0 % 31 + 1;
return new Date(year, n, p);
};
var dateToString = function (date) {
return date.getDate() + '.' + (date.getMonth() + 1);
};
var getHolidays = function () {
var easter = calculateEastern(new Date().getFullYear());
return [
dateToString(easter),
dateToString(new DateTime(easter).modifyDate(-2).getDate()),
dateToString(new DateTime(easter).modifyDate(+1).getDate()),
dateToString(new DateTime(easter).modifyDate(+39).getDate()),
dateToString(new DateTime(easter).modifyDate(+50).getDate()),
'1.1', '1.5', '3.10', '25.12', '26.12'
];
};
var holidays = getHolidays();
$.extend(options, {
beforeShowDay : function (currentDate) {
var dayOfTheWeekNumeric = currentDate.getDay();
var dayOfTheWeek = options.dayNamesMin[dayOfTheWeekNumeric];
var germanDate = dateToString(currentDate);
if ($.inArray(germanDate, holidays) !== -1) {
return [false, 'no', ''];
}
if ($.inArray(dayOfTheWeek, allowedDays) === -1) {
return [false, 'no', ''];
} else {
return [true, 'yes', ''];
}
},
beforeShow : function (input, inst) {
inst.dpDiv.css({marginLeft: (input.offsetWidth - 200) + 'px'});
}
});
$(this).datepicker(options);
}
});
var bindAppointmentPageValidation = function () {
var $pageAppointmentForm = $('.appointmentPage form'),
pageAppointValidator = $pageAppointmentForm.jqEnsure({
options: {
styling: {
label: {
enabled: true
},
field: {
enabled: true
}
},
onTheFlyValidation: {
enabled: true
}
}
});
pageAppointValidator.bindValidator('.requiredVal', 'required', {});
pageAppointValidator.bindValidator('#pageEmail', 'email', {});
$pageAppointmentForm.submit(function (event) {
if (pageAppointValidator.validate() === false) {
event.preventDefault();
}
});
};
var bindAppointmentFlyoutValidation = function () {
var $headerAppointmentModul = $('.headerAppointmentModul'),
$pageAppointmentForm = $headerAppointmentModul.find('form'),
pageAppointValidator = $pageAppointmentForm.jqEnsure({
options: {
styling: {
label: {
enabled: true
},
field: {
enabled: true
}
},
onTheFlyValidation: {
enabled: true
}
}
});
pageAppointValidator.bindValidator('.requiredVal', 'required', {});
pageAppointValidator.bindValidator('#flyoutEmail', 'email', {});
$pageAppointmentForm.submit(function (event) {
event.preventDefault();
if (pageAppointValidator.validate() === true) {
$.post($pageAppointmentForm.attr('action'), $pageAppointmentForm.serialize(), function (data) {
data = $.parseJSON(data);
$headerAppointmentModul.find('.moduleAppointmentForm, p.introText').hide();
if (data.status === 'pass') {
$headerAppointmentModul.find('.success').show('slow');
} else if (data.status === 'alreadyDone') {
$headerAppointmentModul.find('.alreadyRequested').show('slow');
} else {
$headerAppointmentModul.find('.error').show('slow');
}
window.setTimeout(function () {
var $header = $('.appointmentHeaderHover'),
$navigationPointText = $header.find('span.moduleType'),
$headerMetaPositioning = $header.find('div.headerMetaAppointmentPositioning'),
$layer = $header.find('div.headerModulFlyout');
$layer.hide();
$headerMetaPositioning.css({'display': ''});
$navigationPointText.removeClass('hover');
}, 10000);
});
}
});
};
var appointment = {
prodConsult: 'Produktberatung'
};
var bindStoreFinderAutocomplete = function ($searchField, $storeNodeIdField, $storeIdField, $dateField, $timeField, $reasonListField) {
window.appointmentAutocomplete = $searchField.expertAutocomplete({
'serviceUrl': '/appointments/store/search',
'params': {
'storeNodeId': $('#currentStoreNodeId').val()
},
'minChars': 1,
'onSelect': function (value, data) {
$(this).parent('.appointment').show();
$storeNodeIdField.val(data.storeNodeId);
$storeIdField.val(data.storeId);
$dateField.val('');
assignReasonList(data.storeNodeId, $reasonListField);
assignOpeningDates(data.storeNodeId, $dateField, $timeField);
}
});
};
var assignReasonList = function (storeNodeId, $reasonListField) {
if (isProductPage()) {
$reasonListField.find('option').remove();
var data = '<option title="' + appointment.prodConsult + '">' + appointment.prodConsult + '</option>';
$reasonListField.append(data);
return;
}
$.get('/appointments/store/getReasonList?storeNodeId=' + storeNodeId, {}, function (data) {
$reasonListField.find('option').remove();
$reasonListField.append(data);
});
};
var assignOpeningDates = function (nodeId, $datePickerField, $timePickerField) {
$('option', $timePickerField).remove();
$timePickerField.append('<option></option>');
var openingTimes = {},
$form = $datePickerField.parents('form'),
minHoursToGrant = $form.data('mitime'),
maxTimeToGrant = $form.data('matime'),
earliestDateTimePossible = new DateTime(new Date()).modifyHours(minHoursToGrant),
dayShortName = earliestDateTimePossible.getShortDayName('de');
$.get('/appointments/store/info', {'storeNodeId': nodeId}, function (data) {
openingTimes = (typeof data == 'object') ? data : $.parseJSON(data);
var currentDaysOpeningTimes = openingTimes[dayShortName];
if (typeof currentDaysOpeningTimes == 'undefined') {
bindDatePicker(earliestDateTimePossible.modifyDate(+1).resetTime().getDate(), maxTimeToGrant, openingTimes);
return true;
}
var endTime = currentDaysOpeningTimes[currentDaysOpeningTimes.length - 1];
if (earliestDateTimePossible.isTimeAfter(endTime)) {
bindDatePicker(earliestDateTimePossible.modifyDate(+1).resetTime().getDate(), maxTimeToGrant, openingTimes);
return true;
}
bindDatePicker(earliestDateTimePossible.getDate(), maxTimeToGrant, openingTimes);
return true;
});
var bindDatePicker = function (minDateToGrant, maxTimeToGrant, openingTimes) {
$datePickerField.extendendDatePicker(objectKeys(openingTimes), {
onSelect: function (dateText, instance) {
var date = new Date();
date.setFullYear(instance.selectedYear);
date.setMonth(instance.selectedMonth);
date.setDate(instance.selectedDay);
var minOpeningDate = false;
if (minDateToGrant.getDate() == date.getDate() && minDateToGrant.getMonth() == date.getMonth() && minDateToGrant.getYear() == date.getYear()) {
minOpeningDate = minDateToGrant;
}
assignOpeningTimes($timePickerField, openingTimes[new DateTime(date).getShortDayName('de')], minOpeningDate);
var $this = $(this);
$this.removeClass('error');
$this.prev('label').removeClass('error');
},
minDate: minDateToGrant,
maxDate: maxTimeToGrant
});
};
};
var assignOpeningTimes = function ($timePickerField, openingTimes, minDate) {
$timePickerField.find('>option').remove();
$timePickerField.append('<option></option>');
if (minDate) {
var currentDateTime = new DateTime(minDate);
while (!currentDateTime.isTimeBefore(openingTimes[0])) {
openingTimes.shift();
}
}
for (var i = 0; i < openingTimes.length; i++) {
$timePickerField.append('<option>' + openingTimes[i] + '</option>');
}
};
function fillAppointmentSubject() {
var productDiv = document.getElementById('product');
if (!productDiv) {
return;
}
var h1 = productDiv.getElementsByTagName('H1')[0];
if (!h1) {
return;
}
var productTitle = h1.innerHTML;
document.getElementById('pageSubject').value = 'Anfrage zu ' + productTitle;
}
function triggerProductAppointment() {
window.scrollTo(0, 0);
fillAppointmentSubject();
$('.appointmentHeaderHover').trigger('mouseover');
}
var isProductPage = function () {
return !!document.getElementById('product');
};
$(document).ready(function () {
var $flyoutStoreNodeId = $('#flyoutStoreNodeId'),
$flyoutDate = $('#flyoutDate'),
$flyoutTime = $('#flyoutTime'),
$pageStoreNodeId = $('#pageStoreNodeId'),
$pageDate = $('#pageDate'),
$pageTime = $('#pageTime');
bindAppointmentPageValidation();
bindAppointmentFlyoutValidation();
bindStoreFinderAutocomplete(
$('#pageStore'),
$pageStoreNodeId,
$('#pageStoreId'),
$pageDate,
$pageTime,
$('#pageReason')
);
bindStoreFinderAutocomplete(
$('#flyoutStore'),
$flyoutStoreNodeId,
$('#flyoutStoreId'),
$flyoutDate,
$flyoutTime,
$('#flyoutReason')
);
var pageStoreNodeId = $pageStoreNodeId.val(),
flyoutStoreNodeId = $flyoutStoreNodeId.val();
if ($pageStoreNodeId.length && pageStoreNodeId !== '') {
assignOpeningDates(pageStoreNodeId, $pageDate, $pageTime);
}
if ($flyoutStoreNodeId.length && flyoutStoreNodeId !== '') {
assignOpeningDates(flyoutStoreNodeId, $flyoutDate, $flyoutTime);
}
$('#pageMessage').keypress(function () {
var $this = $(this),
currentVal = $this.val(),
maxLen = 1000;
if (currentVal.length >= maxLen) {
$this.val(currentVal.substr(0, maxLen));
}
});
if (isProductPage()) {
assignReasonList(null, $('#flyoutReason'));
$('label[for=flyoutReason]').remove();
var flyoutReason = document.getElementById('flyoutReason');
if (flyoutReason) {
flyoutReason.selectedIndex = 0;
flyoutReason.style.display = 'none';
}
}
});
